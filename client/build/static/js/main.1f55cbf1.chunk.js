(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{221:function(t,e,n){},222:function(t,e,n){},380:function(t,e){},411:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(20),i=n.n(r),c=(n(221),n.p,n(222),n(490)),l=n(22),s=n(15),u=n(12),d=n(9),b=n(4),g=n(204),m=n(449),p=n(448),f=n(196),j=n.n(f),O=n(3),h=n(192),y=n.n(h),x=n(11),k=n(58),C=n.n(k),v="",S="";v="/api",S="/api/avatar",C.a.interceptors.request.use((function(t){return C.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),t}));var B=v,E=n(103),w=n(1),A=Object(o.createContext)(),I=y()({});function T(){for(var t,e={},n={},o={},a={},r={},i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return c.forEach((function(t){e=Object(b.a)(Object(b.a)({},e),{},Object(s.a)({},t[0],t[1])),n=Object(b.a)(Object(b.a)({},n),{},Object(s.a)({},t[0],t[2]||t[1])),o=Object(b.a)(Object(b.a)({},o),{},Object(s.a)({},t[0],t[3]||t[2]||t[1])),a=Object(b.a)(Object(b.a)({},a),{},Object(s.a)({},t[0],t[4]||t[3]||t[2]||t[1])),r=Object(b.a)(Object(b.a)({},r),{},Object(s.a)({},t[0],t[5]||t[4]||t[3]||t[2]||t[1]))})),t={},Object(s.a)(t,I.only("xs"),Object(b.a)({},e)),Object(s.a)(t,I.only("sm"),Object(b.a)({},n)),Object(s.a)(t,I.only("md"),Object(b.a)({},o)),Object(s.a)(t,I.only("lg"),Object(b.a)({},a)),Object(s.a)(t,I.only("xl"),Object(b.a)({},r)),t}function M(t){var e=x.isMobile?["1.5rem","1.5rem","1.5rem","1.5rem","1.5rem"]:["1.1rem","1.1rem","1.1rem","1.1rem","1.1rem"],n=["1.8rem","1.8rem","1.8rem","1.8rem","1.8rem"],a=Object(o.useState)(!0),r=Object(d.a)(a,2),i=r[0],c=r[1],s=Object(o.useMemo)((function(){var t=Object(g.a)({backgourndImageArr:[{backgroundImage:"url(".concat(B,"/picture/downloadbackpicture/60b7028076fa440017fb5779)"),color:"darkgray"},{backgroundImage:"url(".concat(B,"/picture/downloadbackpicture/60b6f77fae1acf0017a96c4b)"),color:"orange"},{backgroundImage:"url(".concat(B,"/picture/downloadbackpicture/60b701a9dc07780017dcfd38)"),color:"white"},{backgroundImage:"url(https://picsum.photos/1024/576)",color:"white"},{backgroundImage:"url(https://picsum.photos/512/288)",color:"white"},{backgroundImage:"url(https://picsum.photos/800/450)",color:"white"},{backgroundImage:"url(https://picsum.photos/640/360)",color:"white"},{backgroundImage:"url(https://picsum.photos/600/337)",color:"white"},{backgroundImage:"url(https://picsum.photos/640/361)",color:"white"},{backgroundImage:"url(https://picsum.photos/600/338)",color:"white"},{backgroundImage:"url(https://picsum.photos/800/451)",color:"white"}],palette:{primary:j.a,type:i?"light":"dark"},typography:{fontSize:14,button:{textTransform:"none"},body2:T(["fontSize"].concat(e))},overrides:{MuiAvatar:{root:Object(b.a)({},T(["width"].concat(n),["height"].concat(n)))},MuiSvgIcon:{root:Object(b.a)({},T(["fontSize"].concat(n)))},MuiChip:{root:{borderRadius:0,backgroundColor:"transparent","& .MuiChip-avatar":Object(b.a)({color:"#616161",marginLeft:"5px",marginRight:"-6px",objectFit:"cover",textAlign:"center"},T(["width","1.8rem","1.8rem"],["height","1.8rem","1.8rem"]))},label:{"& > .MuiTypography-root.MuiTypography-body2":Object(b.a)({},T(["fontSize","1.2rem","1.2rem"]))}}}});return t.palette.mentionBackColor=i?"#b7e1fc":t.palette.primary.light,t}),[i]),u=Object(p.a)(s.breakpoints.only("xs")),f=Object(p.a)(s.breakpoints.only("sm")),h=Object(p.a)(s.breakpoints.only("md")),y=Object(p.a)(s.breakpoints.only("lg")),k=(Object(p.a)(s.breakpoints.only("xl")),u?"xs":f?"sm":h?"md":y?"lg":"xl"),v=Object(o.useState)(localStorage.getItem("token")?Object(E.a)(localStorage.getItem("token")):{userName:"__temp__"}),S=Object(d.a)(v,2),I=S[0],M=S[1],P=Object(o.useState)(O.EditorState.createWithContent(O.ContentState.createFromText(""))),L=Object(d.a)(P,2),R=L[0],F=L[1],N=Object(o.useState)([]),D=Object(d.a)(N,2),K=D[0],z=D[1],U=Object(o.useState)([]),H=Object(d.a)(U,2),_=H[0],Y=H[1],W=Object(o.useState)([]),X=Object(d.a)(W,2),G=X[0],V=X[1],J=Object(o.useCallback)((function(t){return C.a.get("".concat(B,"/article/deletesinglepost/").concat(t)).then((function(e){var n=_.findIndex((function(e){return e.postID===t}));return Y((function(e){return e.filter((function(e){return e.postID!==t}))})),V((function(t){return t.filter((function(t,e){return e!==n}))})),e.data}))}));return Object(o.useEffect)((function(){"__temp__"===I.userName&&C.a.post("".concat(B,"/user/register"),I).then((function(t){localStorage.setItem("token",t.headers["x-auth-token"]),M(Object(E.a)(t.headers["x-auth-token"]))}))}),[]),Object(w.jsx)(A.Provider,{value:{token:I,setToken:M,isLight:i,setIsLight:c,theme:s,breakpointsAttribute:T,editorContent:R,setEditorContent:F,lgSizeObj:{xs:"2rem",sm:"2rem",md:"2rem",lg:"2rem",xl:"2rem"},smSizeObj:{xs:"1rem",sm:"1rem",md:"1rem",lg:"1rem",xl:"1rem"},deviceSize:k,picArr:K,setPicArr:z,postArr:_,setPostArr:Y,postPicArr:G,setPostPicArr:V,getSinglePost:function(){var t=Math.min.apply(Math,Object(l.a)(_.map((function(t){return t.postingTime}))).concat([Date.now()]));return C.a.get("".concat(B,"/article/singlepost2/").concat(t)).then((function(t){return 0===t.data.length?Promise.resolve(t.data):(Y((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.data.map((function(t){return t}))))})),V((function(t){return[].concat(Object(l.a)(t),[""])})),t.data)}))},deleteSinglePost:J,changeOwnerName:function(t){return C.a.post("".concat(B,"/article/changeownername"),{newName:t}).then((function(t){return t.data?(localStorage.setItem("token",t.headers["x-auth-token"]),M(Object(E.a)(t.headers["x-auth-token"])),I):t.data}))}},children:Object(w.jsx)(m.a,{theme:s,children:t.children})})}var P=n(46),L=n.n(P),R=n(25),F=(n(174),n(450)),N=n(414),D=n(452),K=n(453),z=n(39),U=["block","editor","contentState","picArr","setPicArr"],H=["children","picArr","setPicArr","editor"],_=["editor"];function Y(){var t=null,e=null;function n(){var n=t.getCurrentContent(),o=n.getSelectionBefore(),a=n.getSelectionAfter(),r=n.getBlocksAsArray().find((function(t){return"imageBlock"===t.type||"atomic"===t.type})),i=n.getBlocksAsArray().filter((function(t){return!("imageBlock"===t.type||"atomic"===t.type)})),c=r&&r.getKey();if(c){if(c&&n.getBlocksAsArray().length<=1)return t=O.EditorState.createEmpty(),setTimeout((function(){e(t)}),0),null;r=n.getBlockForKey(c),n=(n=O.ContentState.createFromBlockArray(i)).merge({selectionAfter:a,selectionBefore:o}),t=O.EditorState.createWithContent(n),e(t)}}function a(){var e=t.getSelection(),n=t.getCurrentContent();n.getBlockForKey(e.getEndKey());return n.getBlockMap().toArray().findIndex((function(t){return"atomic"===t.type&&"imageBlockText"===t.text||"imageBlock"===t.type}))>=0}return{ImageBlog:function(t){t.block,t.editor,t.contentState;var e=t.picArr,o=t.setPicArr,a=(Object(u.a)(t,U),Object(z.a)()),r=e.length,i=e;return 0===r?Object(w.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundColor:a.palette.divider,overflow:"hidden"},children:Object(w.jsx)("button",{onClick:function(){},children:"delete"})}):1===r?Object(w.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[0].localUrl+")",backgroundColor:a.palette.divider,overflow:"hidden"},onClick:function(){o((function(t){return setTimeout((function(){n()}),0),[]}))}}):2===r?Object(w.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:a.palette.divider,overflow:"hidden"},children:[Object(w.jsx)("div",{style:Object(s.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[1]]}))}}),Object(w.jsx)("div",{style:Object(s.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[1].localUrl+")",transform:"translateX(1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[0]]}))}})]}):3===r?Object(w.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:a.palette.divider,overflow:"hidden"},children:[Object(w.jsx)("div",{style:Object(s.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[1],t[2]]}))}}),Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[0],t[2]]}))}}),Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[2].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(t){return[t[0],t[1]]}))}})]}):Object(w.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:a.palette.divider,overflow:"hidden"},children:[Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[0].localUrl+")",transform:"translateX(-1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[1],t[2],t[3]]}))}}),Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[0],t[2],t[3]]}))}}),Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[2].localUrl+")",transform:"translateX(-1px) translateY(1px)"},onClick:function(){o((function(t){return[t[0],t[1],t[3]]}))}}),Object(w.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+i[3].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(t){return[t[1],t[2],t[3]]}))}})]})},ImageButton:function(n){n.children;var r=n.picArr,i=n.setPicArr,c=n.editor,s=Object(u.a)(n,H),d=Object(o.useRef)(),g=Object(z.a)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},s),{},{style:{color:"dark"===g.palette.type?r.length>=4&&a()?g.palette.action.disabled:g.palette.text.secondary:r.length>=4&&a()?g.palette.action.disabled:g.palette.primary.main},disabled:r.length>=4&&a(),onClick:function(t){d.current.click()},children:Object(w.jsx)(D.a,{})})),Object(w.jsx)("input",{ref:d,type:"file",style:{display:"none"},onClick:function(t){t.currentTarget.value=null},onChange:function(n){if(n.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)){var o=n.currentTarget.files[0];o.localUrl=URL.createObjectURL(n.currentTarget.files[0]),console.log(n.currentTarget.files[0]),i((function(t){return[].concat(Object(l.a)(t),[o])})),a()?c.current.focus():function(n){var o=t.getCurrentContent(),a=t.getSelection(),r=a.getEndKey(),i=(o.getBlockForKey(a.getEndKey()),o.getBlocksAsArray()),c=o.getSelectionBefore(),l=o.getSelectionAfter(),s=i.findIndex((function(t){return t.key===r}));s=s>=0?s:i.length-1,console.log(s),i.splice(s+1,0,new O.ContentBlock({key:W(),type:"imageBlock",text:""})),o=(o=O.ContentState.createFromBlockArray(i)).merge({selectionAfter:l,selectionBefore:c}),t=O.EditorState.push(t,o,"insert-fragment"),e(t)}(URL.createObjectURL(n.currentTarget.files[0]))}}})]})},TopImageButton:function(n){n.editor;var o=Object(u.a)(n,_),a=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){!function(n){t.getSelection();var o=t.getCurrentContent(),a=o.getSelectionBefore(),r=o.getSelectionAfter(),i=o.getBlocksAsArray().find((function(t){return"imageBlock"===t.type||"atomic"===t.type})),c=o.getBlocksAsArray().sort((function(t,e){return"imageBlock"===t.type||"atomic"===t.type?-1:0})),l=i&&i.getKey();l&&(i=o.getBlockForKey(l),console.log(o.getBlocksAsArray().length),o=(o=O.ContentState.createFromBlockArray(c)).merge({selectionAfter:r,selectionBefore:a}),t=O.EditorState.push(t,o,"insert-fragment"),e(t))}()},children:Object(w.jsx)(K.a,{})}))},removeImageBlog:n,hasImageBlock:a,imagePlugin:{onChange:function(n,o){var a=o.setEditorState;return e=a,t=n}}}}function W(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,a=0;a<t;a++)e+=n.charAt(Math.floor(Math.random()*o));return e}var X=n(454),G=n(455),V=n(456),J=n(457),q=n(458),Z=n(459),Q=["editor","isLargeOn","setIsLargeOn"],$=["editor","isSmallOn","setIsSmallOn"],tt=["children","makeBold","isBoldOn","setIsBoldOn","styleType","editor"],et=["children","makeBold","isItalicOn","setIsItalicOn","styleType","editor"],nt=["children","makeBold","isUnderlineOn","setIsUnderlineOn","styleType","editor"];function ot(){var t=null,e=null;function n(n,o){if(t.getSelection().isCollapsed()){var a=t.getSelection(),r=a.toArray(),i=Object(d.a)(r,6),c=i[0],l=i[1],s=i[2],u=i[3],b=(i[4],i[5],t.getCurrentInlineStyle().toObject()),g=O.Modifier.replaceText(t.getCurrentContent(),a," "),m=a.merge({anchorKey:c,anchorOffset:l,focusKey:s,focusOffset:u+" ".length,isBackward:!1,hasFocus:!0});Object.keys(b).forEach((function(t){t!==n&&(g=O.Modifier.applyInlineStyle(g,m,b[t]))})),g=O.Modifier.applyInlineStyle(g,m,b[n]?[]:n),t=O.EditorState.push(t,g,"insert-characters"),t=O.EditorState.acceptSelection(t,m),e(t)}else{var p=(t=O.RichUtils.toggleInlineStyle(t,n)).getSelection().toArray(),f=Object(d.a)(p,6);f[0],f[1],f[2],f[3],f[4],f[5];e(t)}}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LARGE",o=t.getSelection().isCollapsed();if(o){if(o){var a=t.getSelection(),r=a.toArray(),i=Object(d.a)(r,6),c=i[0],l=i[1],s=i[2],u=i[3],b=(i[4],i[5],t.getCurrentInlineStyle().toObject()),g=" ",m=O.Modifier.insertText(t.getCurrentContent(),a,g),p=a.merge({anchorKey:c,anchorOffset:l,focusKey:s,focusOffset:u+g.length,isBackward:!1,hasFocus:!0});Object.keys(b).forEach((function(t){t!==n&&"LARGE"!==t&&"SMALL"!==t&&(m=O.Modifier.applyInlineStyle(m,p,b[t]))})),m=O.Modifier.applyInlineStyle(m,p,b[n]?[]:n),t=O.EditorState.push(t,m,"insert-characters"),t=O.EditorState.acceptSelection(t,p),e(t)}}else{var f=t.getSelection(),j=f.toArray(),h=Object(d.a)(j,6),y=(h[0],h[1],h[2],h[3],h[4],h[5],t.getCurrentInlineStyle().toObject()),x=t.getCurrentContent();console.log(y),"LARGE"===n?(x=O.Modifier.removeInlineStyle(x,f,"SMALL"),x=O.Modifier.removeInlineStyle(x,f,"LARGE"),y.LARGE||(x=O.Modifier.applyInlineStyle(x,f,"LARGE"))):"SMALL"===n&&(x=O.Modifier.removeInlineStyle(x,f,"SMALL"),x=O.Modifier.removeInlineStyle(x,f,"LARGE"),y.SMALL||(x=O.Modifier.applyInlineStyle(x,f,"SMALL"))),t=O.EditorState.push(t,x,"change-inline-style"),t=O.EditorState.acceptSelection(t,f),e(t)}}return{boldPlugin:{onChange:function(n,o){var a=o.setEditorState;return e=a,t=n}},BoldButton:function(t){return Object(w.jsx)(at,Object(b.a)({makeBold:n},t))},ItalicButton:function(t){return Object(w.jsx)(rt,Object(b.a)({makeBold:n},t))},UnderlineButton:function(t){return Object(w.jsx)(it,Object(b.a)({makeBold:n},t))},LargeButton:function(t){var e=t.editor,n=t.isLargeOn,a=t.setIsLargeOn,r=Object(u.a)(t,Q),i=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},r),{},{style:{backgroundColor:n?i.palette.primary.main:"",color:"light"===i.palette.type?n?i.palette.primary.contrastText:i.palette.primary.main:n?i.palette.primary.contrastText:i.palette.text.secondary},onClick:function(t){e.current.focus(),o("LARGE",a)},children:Object(w.jsx)(X.a,{})}))},SmallButton:function(t){var e=t.editor,n=t.isSmallOn,a=t.setIsSmallOn,r=Object(u.a)(t,$),i=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},r),{},{style:{backgroundColor:n?i.palette.primary.main:"",color:"light"===i.palette.type?n?i.palette.primary.contrastText:i.palette.primary.main:n?i.palette.primary.contrastText:i.palette.text.secondary},onClick:function(t){e.current.focus(),o("SMALL",a)},children:Object(w.jsx)(G.a,{})}))}}}function at(t){t.children;var e=t.makeBold,n=t.isBoldOn,o=t.setIsBoldOn,a=(t.styleType,t.editor),r=Object(u.a)(t,tt),i=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},r),{},{style:{backgroundColor:n?i.palette.primary.main:"",color:"light"===i.palette.type?n?i.palette.primary.contrastText:i.palette.primary.main:n?i.palette.primary.contrastText:i.palette.text.secondary},onClick:function(t){a.current.focus(),e("BOLD",o)},children:Object(w.jsx)(J.a,{})}))}function rt(t){t.children;var e=t.makeBold,n=t.isItalicOn,o=t.setIsItalicOn,a=(t.styleType,t.editor),r=Object(u.a)(t,et),i=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},r),{},{style:{backgroundColor:n?i.palette.primary.main:"",color:"light"===i.palette.type?n?i.palette.primary.contrastText:i.palette.primary.main:n?i.palette.primary.contrastText:i.palette.text.secondary},onClick:function(t){a.current.focus(),e("ITALIC",o)},children:Object(w.jsx)(q.a,{})}))}function it(t){t.children;var e=t.makeBold,n=t.isUnderlineOn,o=t.setIsUnderlineOn,a=(t.styleType,t.editor),r=Object(u.a)(t,nt),i=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},r),{},{style:{backgroundColor:n?i.palette.primary.main:"",color:"light"===i.palette.type?n?i.palette.primary.contrastText:i.palette.primary.main:n?i.palette.primary.contrastText:i.palette.text.secondary},onClick:function(t){a.current.focus(),e("UNDERLINE",o)},children:Object(w.jsx)(Z.a,{})}))}var ct=n(461),lt=n(462),st=n(496),ut=n(460),dt=["children","isEmojiPanelOn","setIsEmojiPanelOn"],bt=["children","isEmojiPanelOn","setIsEmojiPanelOn"],gt=["children","emoji","insertEmoji","isEmojiPanelOn","marginBottom"];function mt(){var t=null,e=null,n="url(".concat(B,"/picture/downloademoji/"),a={};function r(n){var o=t.getSelection().toArray(),a=Object(d.a)(o,6),r=a[0],i=a[1],c=a[2],l=a[3],s=a[4],u=(a[5],[s?c:r,s?l:i,s?r:c,s?i:l]),b=u[0],g=u[1],m=O.Modifier.replaceText(t.getCurrentContent(),t.getSelection(),n),p=t.getSelection().merge({anchorKey:b,anchorOffset:g+n.length,focusKey:b,focusOffset:g+n.length,isBackward:!1,hasFocus:!0});t=O.EditorState.push(t,m,"insert-characters"),t=O.EditorState.acceptSelection(t,p),e(t)}return["\u2620","\u2764","\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69","\ud83d\udc7f","\ud83d\udc80","\ud83d\udca9","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude07","\ud83d\ude08","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude0e","\ud83d\ude0f","\ud83d\ude10","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude16","\ud83d\ude18","\ud83d\ude1a","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1e","\ud83d\ude20","\ud83d\ude21","\ud83d\ude22","\ud83d\ude23","\ud83d\ude24","\ud83d\ude25","\ud83d\ude28","\ud83d\ude29","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude2d","\ud83d\ude30","\ud83d\ude31","\ud83d\ude32","\ud83d\ude33","\ud83d\ude35","\ud83d\ude36","\ud83d\ude37","\ud83d\ude47\u200d\u2640\ufe0f","\ud83e\udd24","\ud83e\udd71"].forEach((function(t){a[t]=n+t+".png"})),{emojiPlugin:{onChange:function(n,o){var r=o.setEditorState;return t=n,e=r,t=function(){var e=t.getSelection().toArray(),n=Object(d.a)(e,6),o=(n[0],n[1],n[2],n[3],n[4],n[5],t.getSelection()),r=t.getCurrentContent(),i=t.getSelection();return t.getCurrentContent().getBlocksAsArray().forEach((function(t){var e=t.toArray(),n=Object(d.a)(e,4),o=n[0],c=n[2];n[3].forEach((function(t,e){var n=t.getEntity();n&&"EMOJI"===r.getEntity(n).getType()&&(i=i.merge({anchorKey:o,anchorOffset:e,focusKey:o,focusOffset:e+1,isBackward:!1,hasFocus:!1}),r=O.Modifier.applyEntity(r,i,null))})),Object.keys(a).forEach((function(t){for(var e,n=new RegExp("".concat(t),"g"),l=[];null!==(e=n.exec(c));){var s=e.index;e.index,e[0].length,l.push(s)}l.forEach((function(e){var n=(r=r.createEntity("EMOJI","IMMUTABLE",{url:a[t],symbol:t})).getLastCreatedEntityKey();i=i.merge({anchorKey:o,anchorOffset:e,focusKey:o,focusOffset:e+t.length,isBackward:!1,hasFocus:!1}),r=O.Modifier.applyEntity(r,i,n)}))}))})),t=O.EditorState.push(t,r,"insert-characters"),t=O.EditorState.acceptSelection(t,o)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&"EMOJI"===n.getEntity(e).getType()}),e)},component:function(t){t.contentState,t.entityKey,t.blockKey,t.offsetKey,t.start,t.end;var e=t.decoratedText,n=Object(o.useRef)(),r=Object(z.a)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("span",{ref:n,className:"emoji",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",marginLeft:.12*r.typography.fontSize,marginRight:.12*r.typography.fontSize,transform:(x.isMobile,"scale(1.2)"),backgroundImage:a[e]},children:Object(w.jsx)("span",{style:{clipPath:"circle(0% at 50% 50%)"},children:t.children})})})}}]},EmojiButton:function(t){return Object(w.jsx)(pt,Object(b.a)({},t))},EmojiIconButton:function(t){return Object(w.jsx)(ft,Object(b.a)({},t))},EmojiPanel:function(t){return Object(w.jsx)(jt,Object(b.a)({emoji:a,insertEmoji:r},t))}}}function pt(t){t.children;var e=t.isEmojiPanelOn,n=t.setIsEmojiPanelOn,o=Object(u.a)(t,dt),a=Object(z.a)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{backgroundColor:e?a.palette.primary.main:"",color:"light"===a.palette.type?e?a.palette.primary.contrastText:a.palette.primary.main:e?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(t){n((function(t){return!t}))},children:Object(w.jsx)(ut.a,{})}))})}function ft(t){t.children;var e=t.isEmojiPanelOn,n=t.setIsEmojiPanelOn,o=Object(u.a)(t,bt),a=Object(z.a)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(ct.a,{style:{borderRadius:"1000px",transform:"scale(0.8)"},elevation:3,children:Object(w.jsx)(lt.a,Object(b.a)(Object(b.a)({size:"small"},o),{},{style:{backgroundColor:e?a.palette.primary.main:a.palette.background.paper,color:"light"===a.palette.type?e?a.palette.primary.contrastText:a.palette.primary.main:e?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(t){n((function(t){return!t}))},children:Object(w.jsx)(ut.a,{})}))})})}function jt(t){t.children;var e=t.emoji,n=t.insertEmoji,o=t.isEmojiPanelOn,a=t.marginBottom,r=(Object(u.a)(t,gt),Object(z.a)());return Object(w.jsx)(ct.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:o?"10px":0,maxHeight:o?"30vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:o?1:0,marginBottom:a||r.spacing(2)},children:Object.keys(e).map((function(t,o){return Object(w.jsx)(N.a,{variant:"text",onClick:function(e){n(t)},children:Object(w.jsx)(st.a,{src:e[t].replace("url(","").replace(")",""),style:{transform:"scale(1.2)",borderRadius:0}})},t)}))})}var Ot=n(463),ht=n(497),yt=n(120),xt=n(464),kt=["inMentionPanel"],Ct=["isMentionPanelOn","setIsMentionPanelOn"],vt=["isMentionPanelOn","setIsMentionPanelOn"],St=["getEditorState","setEditorState"],Bt=Object(Ot.a)((function(t){var e=Object(z.a)();return{mentionHeadAvatar:function(t){return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1)"}},mentionHeadRoot:function(t){return Object(s.a)({borderRadius:999,borderTopRightRadius:0,borderBottomRightRadius:0,position:"relative",height:"100%",backgroundColor:e.palette.mentionBackColor},"position","relative")},mentionBodyRoot:function(t){return{borderRadius:999,borderTopLeftRadius:0,borderBottomLeftRadius:0,height:"100%",backgroundColor:e.palette.mentionBackColor}},mentionBodyRoot2:function(t){return{borderRadius:999,height:"100%",backgroundColor:e.palette.mentionBackColor,boxShadow:e.shadows[2]}},mentionHeadLabel:function(t){return{paddingLeft:0,paddingRight:0,borderStyle:"none"}},mentionHeadLabel2:function(t){return{paddingLeft:0,paddingRight:0,borderStyle:"none",color:"rgba(200,0,0,0)"}},mentionBodyLabel:function(t){return{borderStyle:"none"}}}}));function Et(){var t=S,e=null,n=null,a=x.isMobile?[]:["\u5218\u5fb7\u534e","\u90ed\u5bcc\u57ce","\u963f\u72d7"],r={};a.forEach((function(e){r[e]=null,C.a.get("".concat(t,"/").concat(e,".svg"),{responseType:"arraybuffer",onDownloadProgress:function(t){}}).then((function(t){var n=btoa(new Uint8Array(t.data).reduce((function(t,e){return t+String.fromCharCode(e)}),""));r[e]="data:"+t.headers["content-type"]+";base64,"+n}))}));var i=99123;function c(t){var e=t.inMentionPanel,n=void 0!==e&&e,i=Object(u.a)(t,kt),c=Object(z.a)(),l=Object(o.useState)(0),b=Object(d.a)(l,2),g=b[0],m=b[1],p=i.mentionHeadKey,f=i.mentionBodyKey,j=i.entityKey,O=Bt(),h=(O.mentionHeadRoot,O.mentionBodyRoot,O.mentionBodyRoot2),y=(O.mentionHeadAvatar,O.mentionHeadLabel,O.mentionHeadLabel2,O.mentionBodyLabel);return Object(o.useEffect)((function(){m(1)}),[]),Object(w.jsx)(ct.a,{elevation:2,contentEditable:"false",suppressContentEditableWarning:"true",style:{width:"max-content",position:"absolute",marginTop:c.spacing(0),left:"0px",zIndex:122,display:"flex",flexDirection:"column",opacity:g,transform:"scale(".concat(g,")"),transitionProperty:"opacity,transform",transitionDuration:"0.2s"},children:a.map((function(t,e){return Object(w.jsx)(ht.a,{classes:{root:h,label:y},style:{backgroundColor:i.tabIndex%a.length===e||n?c.palette.mentionBackColor:c.palette.action.disabledBackground,cursor:"pointer",width:"fit-content"},avatar:Object(w.jsx)(st.a,{alt:"Natacha",src:r[t]}),onMouseDown:function(){s(n?" @"+t:t,p,f,j)},label:Object(w.jsx)(yt.a,{variant:"body2",children:t})},e)}))})}function s(t,o,a,r){var i=t+" ",c=e.getCurrentContent(),l=e.getSelection(),s=a?c.getEntity(a).getData().person.replace(" @",""):"",u=l.toArray(),b=Object(d.a)(u,6),g=b[0],m=b[1],p=b[2],f=b[3],j=b[4],h=(b[5],[j?p:g,j?f:m,j?g:p,j?m:f]),y=h[0],x=h[1],k=l.merge({anchorKey:y,anchorOffset:x,focusKey:y,focusOffset:x+s.length,isBackward:!1,hasFocus:!0}),C=O.Modifier.replaceText(c,k,i);k=e.getSelection().merge({anchorKey:y,anchorOffset:x+i.length,focusKey:y,focusOffset:x+i.length,isBackward:!1,hasFocus:!0}),e=O.EditorState.push(e,C,"insert-characters"),e=O.EditorState.acceptSelection(e,k),n(e)}function g(){if(a.length<=0)return!1;var t=!1,n=e.getCurrentContent();return n.getBlocksAsArray().forEach((function(e){if(e.getCharacterList().forEach((function(e,o){var r=e.getEntity();if(r){var c=n.getEntity(r).getData(),l=c.mentionType,s=c.mentionHeadKey,u=c.mentionBodyKey;if(l){if("shortMentionOn"===l)return t=[a[i%a.length],"","",r];if(l.indexOf("longMentionOnAt")>=0)return t=[a[i%a.length],s,u,r]}}})),t)return t})),t}return{mentionPlugin:{handleBeforeInput:function(t,o,a,r){var i=r.setEditorState,c=e.getSelection().toArray(),l=Object(d.a)(c,6),s=l[0],u=l[1],b=l[2],m=l[3],p=l[4],f=(l[5],[p?b:s,p?m:u,p?s:b,p?u:m]),j=f[1],h=f[3];if(g()&&x.isMobile&&!x.isFirefox){n=i;var y=(e=o).getSelection(),k=e.getCurrentContent();return y=y.merge({isBackward:!1,hasFocus:!0}),k=O.Modifier.replaceText(k,y,t),y=y.merge({anchorOffset:j+2*t.length,focusOffset:h+2*t.length,isBackward:!1,hasFocus:!0}),e=O.EditorState.push(e,k,"insert-characters"),i(e=O.EditorState.acceptSelection(e,y)),"handled"}},handleReturn:function(t,e,n){var o=n.setEditorState;return g()?(s.apply(void 0,Object(l.a)(g())),"handled"):(o(O.RichUtils.insertSoftNewline(e)),"handled")},keyBindingFn:function(t,e){e.getEditorState,e.setEditorState,Object(u.a)(e,St);return 40===t.keyCode&&g()?(i+=1,"fire-arrow"):38===t.keyCode&&g()?(i-=1,"fire-arrow"):void 0},handleKeyCommand:function(t,o,a,r){r.setEditorState;return"fire-arrow"===t?(n(e),"handled"):"not-handled"},onChange:function(o,a){var r=a.setEditorState;return e=o,n=r,e=function(){var n=e.getSelection().toArray(),o=Object(d.a)(n,6),a=o[0],r=o[1],i=o[2],c=o[3],l=o[4],s=o[5],u=[l?i:a,l?c:r,l?a:i,l?r:c],b=u[2],g=u[3],m=/\s([@][\w_\[\u4E00-\u9FCA\]]*)/g,p=e.getSelection(),f=e.getSelection(),j=e.getCurrentContent();return e.getCurrentContent().getBlocksAsArray().forEach((function(e){var n,o=e.toArray(),a=Object(d.a)(o,4),r=a[0],i=a[2];a[3].forEach((function(t,e){var n=t.getEntity();n&&j.getEntity(n).getType().indexOf("Mention")>=0&&(f=f.merge({anchorKey:r,anchorOffset:e,focusKey:r,focusOffset:e+1,isBackward:!1,hasFocus:!1}),j=O.Modifier.applyEntity(j,f,null))}));for(var c=function(){var e=n.index,o=n.index+n[0].length,a=o-e,c=g-e,l=2===a&&(!s||r!==b||2!==c),u=a>2&&s&&r===b&&2===c,d=a>2&&s&&r===b&&2!==c&&c>0&&c<=a,m=a>2&&(!s||r!==b||c<=0||c>a);if(2===a&&s&&r===b&&2===c){var p=(j=j.createEntity("shortMentionOn","MUTABLE",{mentionType:"shortMentionOn"})).getLastCreatedEntityKey();f=f.merge({anchorKey:r,focusKey:r,anchorOffset:e,focusOffset:o,isBackward:!1,hasFocus:!1}),j=O.Modifier.applyEntity(j,f,p)}else if(l){var h=(j=j.createEntity("shortMentionOff","MUTABLE",{mentionType:"shortMentionOff"})).getLastCreatedEntityKey();f=f.merge({anchorKey:r,focusKey:r,anchorOffset:e,focusOffset:o,isBackward:!1,hasFocus:!1}),j=O.Modifier.applyEntity(j,f,h)}else u?y("longMentionOnAt"):d?y("longMentionOnOther"):m&&y("longMentionOff");function y(n){var a=(j=j.createEntity("".concat(n,"_HEAD"),"MUTABLE",{mentionType:"".concat(n,"_HEAD")})).getLastCreatedEntityKey();f=f.merge({anchorKey:r,focusKey:r,anchorOffset:e,focusOffset:e+2,isBackward:!1,hasFocus:!1});var c=(j=(j=O.Modifier.applyEntity(j,f,a)).createEntity("".concat(n,"_BODY"),"MUTABLE",{mentionType:"".concat(n,"_BODY")})).getLastCreatedEntityKey();f=f.merge({anchorKey:r,focusKey:r,anchorOffset:e+2,focusOffset:o,isBackward:!1,hasFocus:!1}),j=(j=(j=O.Modifier.applyEntity(j,f,c)).mergeEntityData(a,{mentionHeadKey:a,mentionBodyKey:c,person:i.substring(e,o).replace(" @",""),imgurl:"".concat(t,"/").concat(i.substring(e,o).replace(" @",""),").svg")})).mergeEntityData(c,{mentionHeadKey:a,mentionBodyKey:c,person:i.substring(e,o).replace(" @",""),imgurl:"".concat(t,"/").concat(i.substring(e,o).replace(" @",""),").svg")})}};null!==(n=m.exec(i));)c()})),e=O.EditorState.push(e,j,"apply-entity"),e=O.EditorState.acceptSelection(e,p)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&n.getEntity(e).getType().indexOf("Mention")>=0}),e)},component:function(e){var n=e.contentState,o=e.entityKey,a=(e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText,e.children),l=n.getEntity(o).getData(),s=l.mentionHeadKey,u=l.mentionBodyKey,d=l.person,b=(l.imgurl,l.mentionType),g=(Object(z.a)(),Bt()),m=g.mentionHeadRoot,p=g.mentionBodyRoot,f=g.mentionBodyRoot2,j=g.mentionHeadAvatar,O=g.mentionHeadLabel,h=(g.mentionHeadLabel2,g.mentionBodyLabel);return"shortMentionOn"===b?Object(w.jsxs)("span",{style:{position:"relative"},children:[Object(w.jsx)(ht.a,{style:{display:"inline-block"},classes:{root:m,avatar:j,label:O},avatar:Object(w.jsx)(st.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(w.jsx)(yt.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:a})}),!x.isMobile&&Object(w.jsx)(c,{tabIndex:i,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"shortMentionOff"===b?Object(w.jsx)("span",{style:{position:"relative",borderTopLeftRadius:"999px",borderBottomLeftRadius:"999px"},children:a}):"longMentionOnAt_HEAD"===b?Object(w.jsxs)("span",{style:{position:"relative"},children:[Object(w.jsx)(ht.a,{classes:{root:m,avatar:j,label:O},avatar:Object(w.jsx)(st.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(w.jsx)(yt.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:a})}),!x.isMobile&&Object(w.jsx)(c,{tabIndex:i,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"longMentionOnAt_BODY"===b?Object(w.jsx)(ht.a,{classes:{root:p,label:h},size:"medium",label:Object(w.jsx)(yt.a,{variant:"body2",children:a})}):"longMentionOnOther_HEAD"===b?Object(w.jsx)(ht.a,{classes:{root:m,avatar:j,label:O},avatar:Object(w.jsx)(st.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(w.jsx)(yt.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:a})}):"longMentionOnOther_BODY"===b?Object(w.jsx)(ht.a,{classes:{root:p,label:h},label:Object(w.jsx)(yt.a,{variant:"body2",children:a})}):"longMentionOff_HEAD"===b?Object(w.jsx)(w.Fragment,{}):"longMentionOff_BODY"===b?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(ht.a,{classes:{root:f,label:h},avatar:Object(w.jsx)(st.a,{alt:"Natacha",src:r[d]||"".concat(t,"/").concat(d,".svg")}),label:Object(w.jsx)(yt.a,{variant:"body2",children:a})})}):void 0}}]},MentionButton:function(t){var e=t.isMentionPanelOn,n=t.setIsMentionPanelOn,o=Object(u.a)(t,Ct),a=Object(z.a)();return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{backgroundColor:e?a.palette.primary.main:"",color:"light"===a.palette.type?e?a.palette.primary.contrastText:a.palette.primary.main:e?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){n((function(t){return!t}))},children:Object(w.jsx)(xt.a,{})}))})},MentionPanel:function(t){var e=t.isMentionPanelOn;return t.setIsMentionPanelOn,Object(u.a)(t,vt),Object(w.jsx)(ct.a,{style:{position:"relative"},children:e&&Object(w.jsx)(c,{inMentionPanel:!0})})}}}var wt=n(465),At=n(493);function It(){var t=null;return{linkPlugin:{onChange:function(e,n){var o=n.setEditorState;return t=e,o,t=function(){var e=t.getSelection().toArray(),n=Object(d.a)(e,6),o=n[0],a=n[1],r=n[2],i=n[3],c=n[4],l=n[5],s=[c?r:o,c?i:a,c?o:r,c?a:i],u=s[2],b=s[3],g=t.getSelection(),m=t.getCurrentContent(),p=t.getSelection();return t.getCurrentContent().getBlocksAsArray().forEach((function(e){var n,o=e.getKey(),a=(e.getType(),e.getText()),r=/\s([a-zA-Z]{1,10}:\/\/)(([a-zA-Z0-9-_]+\.?)+(:\d{0,6})?)(\/[^\s\r\n\/]+){0,7}(\/)?/g;for(e.getCharacterList().forEach((function(e,n){if(e.getEntity()){var a=m.getEntity(e.getEntity()).getType();"linkOn"!==a&&"linkOff"!==a||(p=t.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}),m=O.Modifier.applyEntity(m,p,null))}e.getStyle()&&e.getStyle().toArray().includes("linkStyle")&&(p=t.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}))}));null!==(n=r.exec(a));){var i=n.index,c=n.index+n[0].length,s=c-i,d=b-i,g=a.substring(i,c),f=" "+n[2],j=!l||o!==u||d<=0||d-s>0;if(l&&o===u&&d>0&&d<=s){var h=(m=m.createEntity("linkOn","MUTABLE",{linkType:"linkOn",linkAddress:g,linkHost:f})).getLastCreatedEntityKey();p=t.getSelection().merge({anchorKey:o,anchorOffset:i+1,focusKey:o,focusOffset:c,isBackward:!1,hasFocus:!1}),m=O.Modifier.applyEntity(m,p,h)}else if(j){var y=(m=m.createEntity("linkOff","MUTABLE",{linkType:"linkOff",linkAddress:g,linkHost:f})).getLastCreatedEntityKey();p=t.getSelection().merge({anchorKey:o,anchorOffset:i+1,focusKey:o,focusOffset:c,isBackward:!1,hasFocus:!1}),m=O.Modifier.applyEntity(m,p,y)}}})),t=O.EditorState.push(t,m,"insert-fragment"),t=O.EditorState.acceptSelection(t,g)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&("linkOn"===n.getEntity(e).getType()||"linkOff"===n.getEntity(e).getType())}),e)},component:function(t){Object(z.a)();var e=t.contentState,n=t.entityKey,o=(t.blockKey,t.offsetKey,t.start,t.end,t.decoratedText,e.getEntity(n).getData()),a=o.linkType;return o.linkAddress,o.linkHost,"linkOn"===a||"linkOff"===a?Object(w.jsx)(wt.a,{children:t.children}):void 0}}]}}}var Tt=n(466),Mt=n(467),Pt=n(468),Lt=n(469),Rt=["editor"],Ft=["editor"],Nt=["editor"],Dt=["editor","isCenterOn","setIsCenterOn"],Kt=["editor","isRightOn","setIsRightOn"],zt=["editor"];function Ut(){var t=null,e=null;function n(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t.getCurrentContent(),r=t.getSelection(),i=(a.getSelectionBefore(),a.getSelectionAfter(),r.getEndKey()),c=a.getBlocksAsArray(),s=a.getBlockForKey(i),u=(s.getType(),Ht());return c=o?[new O.ContentBlock({key:u,type:"unstyled",text:""})].concat(Object(l.a)(c)):[].concat(Object(l.a)(c),[new O.ContentBlock({key:u,type:"unstyled",text:""})]),a=O.ContentState.createFromBlockArray(c),r=r.merge({anchorKey:u,focusKey:u,anchorOffset:0,focusOffset:0,isBackward:!1,hasFocus:!0}),t=O.EditorState.createWithContent(a),t=O.EditorState.acceptSelection(t,r),e(t),setTimeout((function(){n.current.focus()}),0),t}function o(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centerBlock",a=t.getCurrentContent(),r=t.getSelection(),i=r.getEndKey(),c=(a.getBlocksAsArray(),a.getBlockForKey(i)),l=c.getType();"unstyled"!==l&&"centerBlock"!==l&&"rightBlock"!==l||(a=O.Modifier.setBlockType(a,r,"unstyled"===l?o:l===o?"unstyled":o),t=O.EditorState.push(t,a,"change-block-type"),t=O.EditorState.acceptSelection(t,r),e(t),setTimeout((function(){n.current.focus()}),0))}return{DeleteBlogButton:function(n){var o=n.editor,a=Object(u.a)(n,Rt),r=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){!function(n){var o=t.getCurrentContent(),a=t.getSelection().getEndKey(),r=o.getBlocksAsArray(),i=o.getBlockForKey(a).getType();if("unstyled"===i||"centerBlock"===i||"rightBlock"===i||"colorBlock"===i)r.length<=1?(t=O.EditorState.createEmpty(),setTimeout((function(){e(t),n.current.focus()}),0)):(r=r.filter((function(t){return t.key!==a})),o=O.ContentState.createFromBlockArray(r),t=O.EditorState.createWithContent(o),e(t))}(o)},children:Object(w.jsx)(Tt.a,{})}))},AddTopLineButton:function(t){var e=t.editor,o=Object(u.a)(t,Ft),a=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){n(e)},children:Object(w.jsx)(Mt.a,{style:{transform:"rotate(180deg)"}})}))},AddBottomLineButton:function(t){var e=t.editor,o=Object(u.a)(t,Nt),a=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){n(e,!1)},children:Object(w.jsx)(Mt.a,{})}))},AlignCenterButton:function(t){var e=t.editor,n=t.isCenterOn,a=(t.setIsCenterOn,Object(u.a)(t,Dt)),r=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{style:{backgroundColor:n?r.palette.primary.main:"",color:"light"===r.palette.type?n?r.palette.primary.contrastText:r.palette.primary.main:n?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){o(e,"centerBlock")},children:Object(w.jsx)(V.a,{})}))},AlignRightButton:function(t){var e=t.editor,n=t.isRightOn,a=(t.setIsRightOn,Object(u.a)(t,Kt)),r=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{style:{backgroundColor:n?r.palette.primary.main:"",color:"light"===r.palette.type?n?r.palette.primary.contrastText:r.palette.primary.main:n?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){o(e,"rightBlock")},children:Object(w.jsx)(Pt.a,{})}))},AddBackColorButton:function(n){var o=n.editor,a=Object(u.a)(n,zt),r=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},a),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){!function(n){var o=t.getCurrentContent(),a=t.getSelection(),r=a.getEndKey();o.getBlocksAsArray(),o.getBlockForKey(r).getType(),o=O.Modifier.setBlockType(o,a,"colorBlock"),t=O.EditorState.push(t,o,"change-block-type"),t=O.EditorState.acceptSelection(t,a),e(t),setTimeout((function(){n.current.focus()}),0)}(o)},children:Object(w.jsx)(Lt.a,{})}))},BackColorPanel:function(t){return Object.assign({},t),Object(w.jsx)(w.Fragment,{children:"ddd"})},deleteBlogPlugin:{onChange:function(n,o){var a=o.setEditorState;return e=a,t=n}}}}function Ht(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,a=0;a<t;a++)e+=n.charAt(Math.floor(Math.random()*o));return e}var _t=["editor","isBackColorPanelOn","setIsBackColorPanelOn"],Yt=["editor","isBackColorPanelOn","backImageArr","setBackImageArr","backImageIndex","setBackImageIndex"];function Wt(){var t=null,e=null;return{AddBackColorButton:function(t){t.editor;var e=t.isBackColorPanelOn,n=t.setIsBackColorPanelOn,o=Object(u.a)(t,_t),a=Object(z.a)();return Object(w.jsx)(N.a,Object(b.a)(Object(b.a)({},o),{},{style:{backgroundColor:e?a.palette.primary.main:"",color:"light"===a.palette.type?e?a.palette.primary.contrastText:a.palette.primary.main:e?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){n((function(t){return!t}))},children:Object(w.jsx)(Lt.a,{})}))},BackColorPanel:function(n){var o=n.editor,a=n.isBackColorPanelOn,r=(n.backImageArr,n.setBackImageArr,n.backImageIndex,n.setBackImageIndex,Object(u.a)(n,Yt),Object(z.a)());return Object(w.jsx)(At.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:a?"10px":0,maxHeight:a?"35vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:a?1:0,marginBottom:r.spacing(2),display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:r.backgourndImageArr.map((function(n,a){return Object(w.jsx)(N.a,{style:{backgroundImage:n.backgroundImage,backgroundSize:"contain",width:"80px",height:"45px"},onClick:function(){!function(n,o,a){var r=t.getCurrentContent(),i=t.getSelection(),c=i.getEndKey();r.getBlocksAsArray(),r.getBlockForKey(c).getType(),r=O.Modifier.setBlockType(r,i,"colorBlock"),r=O.Modifier.setBlockData(r,i,{img:o,textColor:a}),t=O.EditorState.push(t,r,"change-block-type"),t=O.EditorState.acceptSelection(t,i),e(t),setTimeout((function(){n.current.focus()}),0)}(o,n.backgroundImage,n.color||"white")}},a)}))})},backColorPlugin:{blockStyleFn:function(t){},onChange:function(n,o){var a=o.setEditorState;return e=a,t=n}}}}var Xt=n(70),Gt=n(43),Vt=n.n(Gt),Jt=n(470),qt=n(471),Zt=n(472),Qt=n(473),$t=["editorPaperCss","className1","unstyledBlockCss","imageBlockCss","centerBlockCss","rightBlockCss","colorBlockCss"],te=ot(),ee=te.boldPlugin,ne=te.BoldButton,oe=te.ItalicButton,ae=te.UnderlineButton,re=te.LargeButton,ie=te.SmallButton,ce=mt(),le=ce.emojiPlugin,se=ce.EmojiButton,ue=ce.EmojiPanel,de=Y(),be=de.imagePlugin,ge=de.ImageButton,me=(de.TopImageButton,de.ImageBlog),pe=(de.hasImageBlock,Et()),fe=pe.mentionPlugin,je=pe.MentionButton,Oe=pe.MentionPanel,he=It().linkPlugin,ye=Ut(),xe=ye.deleteBlogPlugin,ke=ye.DeleteBlogButton,Ce=ye.AddTopLineButton,ve=ye.AddBottomLineButton,Se=ye.AlignCenterButton,Be=ye.AlignRightButton,Ee=Wt(),we=Ee.backColorPlugin,Ae=Ee.AddBackColorButton,Ie=Ee.BackColorPanel,Te=Object(Ot.a)((function(t){var e={};return t.backgourndImageArr.forEach((function(t,n){e["css"+n]=t})),console.log(e),Object(b.a)(Object(b.a)({},e),{},{editorPaperCss:function(e){e.isLight,e.breakpointsAttribute;return{borderWidth:"1px",borderStyle:"none",borderColor:e.isEditorFocusOn?t.palette.primary.main:t.palette.text.secondary,wordBreak:"break-all",whiteSpace:"pre-wrap",lineBreak:"anywhere"}},unstyledBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)}},imageBlockCss:function(){return{margin:0,padding:0,width:"100%",height:0,paddingBottom:"56.25%"}},centerBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1),textAlign:"center"}},rightBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1),textAlign:"end"}},colorBlockCss:function(){return{position:"relative",display:"flex",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",alignItems:"center",justifyContent:"center",overflow:"auto",backgroundSize:"contain","& > div":{textAlign:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}}},className1:function(t){return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)","&:hover":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}})})),Me={entityMap:{},blocks:[]};function Pe(){var t=Object(o.useContext)(A),e=t.token,n=t.isLight,a=t.setIsLight,r=t.breakpointsAttribute,i=t.editorContent,c=t.setEditorContent,g=t.lgSizeObj,m=t.smSizeObj,p=t.deviceSize,f=t.picArr,j=t.setPicArr,h=(t.postArr,t.setPostArr),y=(t.postPicArr,t.setPostPicArr),k=Object(z.a)(),v=Object(o.useState)(!1),S=Object(d.a)(v,2),E=S[0],I=S[1],T=Object(o.useState)(!1),M=Object(d.a)(T,2),P=M[0],F=M[1],D=Object(o.useState)(!1),K=Object(d.a)(D,2),U=K[0],H=K[1],_=Object(o.useState)(!1),Y=Object(d.a)(_,2),W=Y[0],X=Y[1],G=Object(o.useState)(!1),V=Object(d.a)(G,2),J=V[0],q=V[1],Z=Object(o.useState)(!1),Q=Object(d.a)(Z,2),$=Q[0],tt=Q[1],et=Object(o.useState)(!1),nt=Object(d.a)(et,2),ot=nt[0],at=nt[1],rt=Object(o.useState)(!1),it=Object(d.a)(rt,2),lt=it[0],st=it[1],ut=Object(o.useState)(!1),dt=Object(d.a)(ut,2),bt=dt[0],gt=dt[1],mt=Object(o.useState)(!1),pt=Object(d.a)(mt,2),ft=pt[0],jt=pt[1],Ot=Object(o.useState)(!1),ht=Object(d.a)(Ot,2),yt=ht[0],xt=ht[1],kt=Object(o.useRef)(),Ct=Te({isLight:n,isEditorFocusOn:yt,breakpointsAttribute:r}),vt=Ct.editorPaperCss,St=(Ct.className1,Ct.unstyledBlockCss),Bt=Ct.imageBlockCss,Et=Ct.centerBlockCss,wt=Ct.rightBlockCss,It=Ct.colorBlockCss,Tt=Object(u.a)(Ct,$t),Mt=Object(o.useState)(O.EditorState.createWithContent(Object(O.convertFromRaw)(Me))),Pt=Object(d.a)(Mt,2),Lt=Pt[0],Rt=Pt[1],Ft=Object(o.useState)(!0),Nt=Object(d.a)(Ft,2),Dt=Nt[0],Kt=Nt[1];function zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local",n=Object(Xt.a)(t.getCurrentContent(),{defaultBlockTag:"div",inlineStyles:{LARGE:{style:{fontSize:g[p]}},SMALL:{style:{fontSize:m[p]}}},blockStyleFn:function(t){var e,n,o=t.getType();return"unstyled"===o?{attributes:{},style:Object(s.a)({paddingLeft:x.isMobile?"4px":k.spacing(1)},"paddingLeft",x.isMobile?"4px":k.spacing(1))}:"centerBlock"===o?{attributes:{},style:(e={paddingLeft:x.isMobile?"4px":k.spacing(1)},Object(s.a)(e,"paddingLeft",x.isMobile?"4px":k.spacing(1)),Object(s.a)(e,"textAlign","center"),e)}:"rightBlock"===o?{attributes:{},style:(n={paddingLeft:x.isMobile?"4px":k.spacing(1)},Object(s.a)(n,"paddingLeft",x.isMobile?"4px":k.spacing(1)),Object(s.a)(n,"textAlign","end"),n)}:"colorBlock"===o?{attributes:{colorblock:"true",backimage:t.getData().toJS().img,textcolor:t.getData().toJS().textColor}}:void 0},blockRenderers:{imageBlock:function(t){t.getText(),t.getData().toObject(),t.getType();return'<imgtag id="'.concat(e,'">')+escape(t.getText())+"</imgtag>"}},entityStyleFn:function(t){var e=t.toObject(),n=e.type,o=e.data;e.mutablity;if("shortMentionOff"===n)return{element:"shortMentionoff"};if("longMentionOff_HEAD"===n)return{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}};if("longMentionOff_BODY"===n)return{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}};if("EMOJI"===n)return console.log(o.url),{element:"emoji",attributes:{imgurl:o.url,symbol:o.symbol}};if("linkOff"===n){o.linkType,o.linkAddress,o.linkHost;return{element:"linkoff",attributes:Object(b.a)({},o)}}}});return n}return Object(o.useEffect)((function(){setTimeout((function(){kt.current.focus(),O.EditorState.moveFocusToEnd(Lt)}),0)}),[]),Object(w.jsxs)(Jt.a,{disableGutters:!1,children:[Object(w.jsxs)(At.a,{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:(x.isMobile,"wrap"),gap:k.spacing(1)},children:[Object(w.jsx)(ct.a,{style:Object(b.a)(Object(b.a)({},x.isMobile&&!x.isFirefox&&{marginRight:k.spacing(1)}),{},{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:k.spacing(1),width:"fit-content"}),children:Object(w.jsxs)(qt.a,{variant:"text",style:{},children:[Object(w.jsx)(ne,{editor:kt,isBoldOn:E,setIsBoldOn:I}),Object(w.jsx)(oe,{editor:kt,isItalicOn:P,setIsItalicOn:F}),Object(w.jsx)(ae,{editor:kt,isUnderlineOn:U,setIsUnderlineOn:H}),Object(w.jsx)(re,{editor:kt,isLargeOn:W,setIsLargeOn:X}),Object(w.jsx)(ie,{editor:kt,isSmallOn:J,setIsSmallOn:q})]})}),Object(w.jsx)(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:k.spacing(1),width:"fit-content"},children:Object(w.jsxs)(qt.a,{variant:"text",style:{},children:[!x.isMobile&&Object(w.jsx)(se,{color:"primary",fontSize:"small",isEmojiPanelOn:$,setIsEmojiPanelOn:tt}),Object(w.jsx)(je,{color:"primary",fontSize:"small",isMentionPanelOn:ot,setIsMentionPanelOn:at}),Object(w.jsx)(ge,{color:"primary",fontSize:"small",picArr:f,setPicArr:j,editor:kt}),Object(w.jsx)(Ae,{editor:kt,color:"primary",fontSize:"small",isBackColorPanelOn:lt,setIsBackColorPanelOn:st}),Object(w.jsx)(N.a,{onClick:function(){a((function(t){return!t})),kt.current.focus()},style:{color:"dark"===k.palette.type?k.palette.text.secondary:k.palette.primary.main},children:n?Object(w.jsx)(Zt.a,{}):Object(w.jsx)(Qt.a,{})})]})}),Object(w.jsx)(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:k.spacing(1),width:"fit-content"},children:Object(w.jsxs)(qt.a,{variant:"text",style:{},children:[Object(w.jsx)(Ce,{editor:kt}),Object(w.jsx)(ke,{editor:kt}),Object(w.jsx)(ve,{editor:kt}),Object(w.jsx)(Se,{editor:kt,isCenterOn:bt,setIsCenterOn:gt}),Object(w.jsx)(Be,{editor:kt,isRightOn:ft,setIsRightOn:jt})]})})]}),Object(w.jsx)(ct.a,{elevation:yt?5:1,classes:{root:vt},style:Object(b.a)({},!x.isMobile&&{minHeight:"3rem"}),onClick:function(){var t=O.EditorState.moveSelectionToEnd(Lt);Rt(O.EditorState.forceSelection(t,Lt.getSelection())),xt(!0)},children:Object(w.jsx)(L.a,{ref:function(t){kt.current=t},editorState:Lt,onChange:function(t,e){Object.assign({},e);var n=t.getCurrentInlineStyle().toObject(),o=n.BOLD,a=n.ITALIC,r=n.UNDERLINE,i=n.LARGE,l=n.SMALL,s=t.getSelection(),u=t.getCurrentContent(),d=s.getFocusKey(),b=u.getBlockForKey(d).getType();gt("centerBlock"===b),jt("rightBlock"===b),xt(s.hasFocus),I(Boolean(o)),F(Boolean(a)),H(Boolean(r)),X(Boolean(i)),q(Boolean(l)),c(t),Rt(t)},plugins:[ee,be,le,fe,he,xe,we],preserveSelectionOnBlur:!0,customStyleMap:R.b.Map({}),customStyleFn:function(t,e){var n=t.toObject();if(n.LARGE&&n.SMALL);else{if(Boolean(n.LARGE))return{fontSize:g[p]};if(Boolean(n.SMALL))return{fontSize:m[p]};if(Boolean(n.CENTER))return{display:"flex",justifyContent:"center"}}},blockRenderMap:R.b.Map({}),blockStyleFn:function(t){var e=t.getType(),n=t.getText();if("unstyled"===e)return St;if("atomic"===e&&"imageBlockText"===n)return Bt;if("centerBlock"===e)return Et;if("rightBlock"===e)return wt;if("colorBlock"===e){console.log(Tt);var o=t.getData().toJS().img,a=k.backgourndImageArr.findIndex((function(t){return t.backgroundImage===o}));return It+" "+Tt["css"+a]}},blockRendererFn:function(t){var e=t.getText(),n=(t.getData().toObject(),t.getType());return"atomic"===n&&"imageBlockText"===e||"imageBlock"===n?{component:function(t){return Object(w.jsx)(me,Object(b.a)(Object(b.a)({},t),{},{picArr:f,setPicArr:j,editor:kt}))},editable:!1}:null},handleKeyCommand:function(t,e,n,o){o.getEditorState;"bold"===t?(I((function(t){return!t})),Rt(O.RichUtils.handleKeyCommand(e,t))):"italic"===t?(F((function(t){return!t})),Rt(O.RichUtils.handleKeyCommand(e,t))):"underline"===t&&(H((function(t){return!t})),Rt(O.RichUtils.handleKeyCommand(e,t)))},stripPastedStyles:!0,handlePastedText:function(t,e,n,o){return!0}})}),Object(w.jsx)(N.a,{variant:"contained",color:"primary",disabled:!Dt,style:{display:"block",width:"100%",marginTop:k.spacing(1)},onClick:function(t){kt.current.focus(),Kt(!1);var n=String(Math.floor(1e6*Math.random()))+"_"+f.length;if(C.a.post("".concat(B,"/article"),{ownerName:e.userName,content:zt(i,n),postID:n}).then((function(t){console.log(t.data),0===f.length&&(Kt(!0),Rt(O.EditorState.createWithContent(Object(O.convertFromRaw)(Me))))})),f.length>0){var o=new FormData,a={ownerName:"aaa",picName:[]};f.forEach((function(t,e){var r=n+"_"+e;o.append("file",t),a.picName.push(r),t.picID=r,console.log(r)})),o.append("obj",JSON.stringify(a)),C.a.post("".concat(B,"/picture/uploadpicture"),o,{headers:{"content-type":"multipart/form-data"}}).then((function(t){Kt(!0),j([]),Rt(O.EditorState.createWithContent(Object(O.convertFromRaw)(Me)))}))}h((function(t){return[{ownerName:e.userName,postID:n,postingTime:Date.now(),content:zt(i,"local")}].concat(Object(l.a)(t))})),y((function(t){return[f].concat(Object(l.a)(t))}))},children:"Post"}),Object(w.jsx)(Ie,{editor:kt,isBackColorPanelOn:lt}),!x.isMobile&&Object(w.jsx)(ue,{isEmojiPanelOn:$}),Object(w.jsx)(Oe,{isMentionPanelOn:ot})]})}var Le=n(198),Re=n(117),Fe=n.n(Re),Ne=n(484),De=n(480),Ke=n(491),ze=n(495),Ue=n(483),He=n(482),_e=n(487),Ye=n(481),We=n(485),Xe=n(486),Ge=n(488),Ve=n(478),Je=n(489),qe=n(479),Ze=n(492),Qe=n(201),$e=(n(410),n(118)),tn=n(97),en=n(98),nn=n(102),on=n(101),an=n(475),rn=n(474),cn=n(476),ln=n(477),sn=n(203),un=["editorPaperCss","className1","unstyledBlockCss","imageBlockCss","centerBlockCss","rightBlockCss","colorBlockCss"],dn=(Object(sn.a)("yuan"),ot()),bn=(dn.boldPlugin,dn.BoldButton,dn.ItalicButton,dn.UnderlineButton,dn.LargeButton,dn.SmallButton,mt()),gn=bn.emojiPlugin,mn=(bn.EmojiButton,bn.EmojiPanel),pn=bn.EmojiIconButton,fn=Y(),jn=(fn.imagePlugin,fn.ImageButton,fn.TopImageButton,fn.ImageBlog,fn.hasImageBlock,Et()),On=jn.mentionPlugin,hn=(jn.MentionButton,jn.MentionPanel,It().linkPlugin),yn=Ut(),xn=(yn.deleteBlogPlugin,yn.DeleteBlogButton,yn.AddTopLineButton,yn.AddBottomLineButton,yn.AlignCenterButton,yn.AlignRightButton,Wt()),kn=(xn.backColorPlugin,xn.AddBackColorButton,xn.BackColorPanel,Object(Ot.a)((function(t){var e={};return t.backgourndImageArr.forEach((function(t,n){e["css"+n]=t})),console.log(e),Object(b.a)(Object(b.a)({},e),{},{labelShrinkCss:function(){return{transform:"translate(0, 1.5px) scale(0.5)"}},textFieldCss:function(){return{fontSize:"1.5rem"}},editorPaperCss:function(e){e.isLight,e.breakpointsAttribute;return{borderWidth:"1px",borderStyle:"none",borderColor:e.isEditorFocusOn?t.palette.primary.main:t.palette.text.secondary,wordBreak:"break-all",whiteSpace:"pre-wrap",lineBreak:"anywhere"}},unstyledBlockCss:function(){return{paddingLeft:"4px",paddingRight:"4px"}},className1:function(t){return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)","&:hover":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}})}))),Cn={entityMap:{},blocks:[]};function vn(t){var e=Object(Xt.a)(t.getCurrentContent(),{defaultBlockTag:"div",inlineStyles:{},blockStyleFn:function(t){if("unstyled"===t.getType())return{attributes:{},style:{fontSize:"1.2rem"}}},blockRenderers:{},entityStyleFn:function(t){var e=t.toObject(),n=e.type,o=e.data;e.mutablity;if("shortMentionOff"===n)return{element:"shortMentionoff"};if("longMentionOff_HEAD"===n)return{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}};if("longMentionOff_BODY"===n)return{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}};if("EMOJI"===n)return console.log(o.url),{element:"emoji",attributes:{imgurl:o.url,symbol:o.symbol}};if("linkOff"===n){o.linkType,o.linkAddress,o.linkHost;return{element:"linkoff",attributes:Object(b.a)({},o)}}}});return e}function Sn(t){var e=t.postID,n=t.index,a=t.toHtml,r=t.setCommentCount,i=t.commentCount,c=t.avatarPic,s=t.showComment,g=Object(o.useContext)(A),m=g.token,p=g.isLight,f=(g.setIsLight,g.breakpointsAttribute),j=g.editorContent,h=g.setEditorContent,y=(g.lgSizeObj,g.smSizeObj,g.deviceSize,Object(z.a)()),k=Object(o.useState)(!1),v=Object(d.a)(k,2),S=v[0],E=v[1],I=Object(o.useState)(!1),T=Object(d.a)(I,2),M=(T[0],T[1],Object(o.useState)(!1)),P=Object(d.a)(M,2),F=P[0],D=P[1],K=Object(o.useRef)(),U=kn({isLight:p,isEditorFocusOn:F,breakpointsAttribute:f}),H=(U.editorPaperCss,U.className1,U.unstyledBlockCss),_=(U.imageBlockCss,U.centerBlockCss,U.rightBlockCss,U.colorBlockCss,Object(u.a)(U,un),Object(o.useState)(O.EditorState.createWithContent(Object(O.convertFromRaw)(Cn)))),Y=Object(d.a)(_,2),W=Y[0],X=Y[1],G=Object(o.useState)(!0),V=Object(d.a)(G,2),J=(V[0],V[1],Object(o.useState)([])),q=Object(d.a)(J,2),Z=q[0],Q=q[1],$=Object(o.useRef)([]),tt=Object(o.useState)(999),et=Object(d.a)(tt,2),nt=et[0],ot=et[1];function at(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return Object(w.jsxs)(At.a,{style:Object(b.a)({display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:(x.isMobile,"wrap"),gap:y.spacing(0)},t&&{marginLeft:"1.6rem"}),children:[Object(w.jsx)(ht.a,{avatar:Object(w.jsx)(st.a,{alt:null,src:c?URL.createObjectURL(c):"".concat(B,"/avatar/").concat(m.userName,".svg")}),label:Object(w.jsx)(yt.a,{style:{marginTop:"3px",lineHeight:"1.0",fontWeight:"bold",fontSize:"0.9rem"},children:m.userName})},n),!x.isMobile&&Object(w.jsx)(pn,{color:"primary",fontSize:"small",isEmojiPanelOn:S,setIsEmojiPanelOn:E}),Object(w.jsx)(ct.a,{style:{borderRadius:"1000px",transform:"scale(0.8)",padding:"0px"},elevation:3,children:Object(w.jsx)(lt.a,{size:"small",style:{},onClick:function(){var t=vn(j);if(o){var n=String(Math.floor(1e6*Math.random()));C.a.post("".concat(B,"/subcomment"),{ownerName:m.userName,content:t,postID:e,postingTime:Date.now(),commentID:o,subCommentID:n}).then((function(t){console.log($.current);var e=$.current.find((function(t){return t.commentID===o}));Q((function(t){return t.forEach((function(t){t.commentID===o&&(t.subCommentCount?t.subCommentCount++:t.subCommentCount=1)})),t})),e.updateSubCommentArr(t.data),X(O.EditorState.createWithContent(Object(O.convertFromRaw)(Cn)))}))}else{var a=String(Math.floor(1e6*Math.random()));C.a.post("".concat(B,"/comment"),{ownerName:m.userName,content:t,postID:e,postingTime:Date.now(),commentID:a}).then((function(n){Q((function(n){return[{ownerName:m.userName,content:t,postID:e,postingTime:Date.now(),commentID:a}].concat(Object(l.a)(n))})),X(O.EditorState.createWithContent(Object(O.convertFromRaw)(Cn))),r((function(t){return Number(t)+1}))}))}},children:Object(w.jsx)(rn.a,{style:{transform:"scale(0.9)",color:"light"===y.palette.type?y.palette.primary.main:y.palette.text.secondary}})})})]})}function rt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return Object(w.jsxs)(w.Fragment,{children:[at(t,e),Object(w.jsx)(ct.a,{elevation:F?3:2,style:{marginLeft:t?"3.6rem":"2rem",marginRight:"4px",fontSize:"1.2rem",borderWidth:"2px",borderColor:"rgb(63, 81, 181)",borderStyle:"solid"},onClick:function(){var t=O.EditorState.moveSelectionToEnd(W);X(O.EditorState.forceSelection(t,W.getSelection())),D(!0)},children:Object(w.jsx)(L.a,{ref:function(t){K.current=t},editorState:W,onChange:function(t,e){Object.assign({},e);var n=t.getSelection();D(n.hasFocus),h(t),X(t)},plugins:[gn,On,hn],preserveSelectionOnBlur:!0,customStyleMap:R.b.Map({}),customStyleFn:function(t,e){t.toObject()},blockRenderMap:R.b.Map({}),blockStyleFn:function(t){var e=t.getType();t.getText();if("unstyled"===e)return H},blockRendererFn:function(t){t.getText(),t.getData().toObject(),t.getType();return null},handleKeyCommand:function(t,e,n,o){o.getEditorState}})}),!x.isMobile&&Object(w.jsx)(mn,{isEmojiPanelOn:S,marginBottom:"0"}),!t&&Z.length>0&&Object(w.jsx)(an.a,{style:{marginTop:y.spacing(1)}})]})}return Object(o.useEffect)((function(){C.a.get("".concat(B,"/comment/loadfive/").concat(e,"/").concat(Date.now())).then((function(t){Q(t.data)}))}),[]),Object(o.useEffect)((function(){!x.isMobile&&s&&setTimeout((function(){K.current.focus(),O.EditorState.moveFocusToEnd(W)}),0)}),[s]),Object(w.jsxs)(Jt.a,{disableGutters:!0,maxWidth:"lg",style:{backgroundColor:y.palette.action.disabledBackground,paddingBottom:y.spacing(0),display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[999===nt&&rt(!1,null),Z.map((function(t,e){return Object(w.jsxs)("span",{children:[Object(w.jsx)(ht.a,{style:{verticalAlign:"top"},onClick:function(){var n=$.current.find((function(e){return t.commentID===e.commentID}));nt===e?n.clearSubComments():n.loadSubComments(),ot((function(t){return t===e?999:e})),setTimeout((function(){!x.isMobile&&K.current.focus(),!x.isMobile&&O.EditorState.moveFocusToEnd(W)}),0)},deleteIcon:Object(w.jsxs)(w.Fragment,{children:[nt===e?Object(w.jsx)(cn.a,{style:{fontSize:"1.2rem",color:y.palette.text.secondary}}):Object(w.jsx)(ln.a,{style:{fontSize:"1.2rem",color:y.palette.text.secondary}}),Object(w.jsx)("span",{style:{fontWeight:"bold",fontSize:"1rem",color:y.palette.text.secondary,verticalAlign:"middle"},children:t.subCommentCount})]}),onDelete:function(){var n=$.current.find((function(e){return t.commentID===e.commentID}));nt===e?n.clearSubComments():n.loadSubComments(),ot((function(t){return t===e?999:e})),setTimeout((function(){!x.isMobile&&K.current.focus(),!x.isMobile&&O.EditorState.moveFocusToEnd(W)}),1e3)},avatar:Object(w.jsx)(st.a,{alt:null,src:c&&m.userName===t.ownerName?URL.createObjectURL(c):"".concat(B,"/avatar/").concat(t.ownerName,".svg")}),label:Object(w.jsxs)(yt.a,{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[t.ownerName,"\xa0",Object(w.jsx)("span",{style:{color:y.palette.text.secondary,fontSize:"0.7rem",fontWeight:"normal"},children:Object(Ze.a)(Number(t.postingTime)).replace("less than ","").replace("about ","")})]})},n),m.userName==t.ownerName&&Object(w.jsx)(lt.a,{size:"small",style:{float:"right"},onClick:function(){Q((function(e){return e.filter((function(e){return e.commentID!==t.commentID}))})),C.a.get("".concat(B,"/comment/deletecomment/").concat(t.commentID)).then((function(t){r((function(t){return Number(t)-1}))}))},children:Object(w.jsx)(Ve.a,{style:{fontSize:"1.5rem"}})}),Object(w.jsx)(ct.a,{style:{marginLeft:"2rem",paddingLeft:"4px",paddingRight:"4px",marginRight:"4px",fontSize:"1.2rem",backgroundColor:y.palette.background.default},children:a(t.content,null,null,!0)}),nt===e&&rt(!0,t.commentID),Object(w.jsx)(Bn,{setReplyNum:ot,replyNum:nt,listIndex:e,commentArr:Z,toHtml:a,comment:t,theme:y,index:n,editor:K,commentObjList:$,setCommentArr:Q,token:m,avatarPic:c}),e!==Z.length-1&&Object(w.jsx)(an.a,{light:!1,style:{marginTop:"8px"}})]},t.commentID)})),Z.length<i?Object(w.jsxs)(N.a,{onClick:function(){var t=Math.min.apply(Math,Object(l.a)(Z.map((function(t){return t.postingTime})))),e=Z.find((function(e){return e.postingTime===t})).postID;C.a.get("".concat(B,"/comment/loadfive/").concat(e,"/").concat(t)).then((function(t){Q((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.data))}))}))},style:{marginTop:"8px",borderTopLeftRadius:0,borderTopRightRadius:0,padding:0,boxShadow:y.shadows[0],color:"dark"===y.palette.type?y.palette.text.secondary:y.palette.primary.main,fontWeight:"bold"},size:"small",disableElevation:!0,fullWidth:!0,children:[Object(w.jsx)(qe.a,{}),"\xa0",Z.length,"/",i]}):Object(w.jsx)("div",{style:{marginTop:"16px"}})]})}var Bn=function(t){Object(nn.a)(n,t);var e=Object(on.a)(n);function n(t,o){var a;return Object(tn.a)(this,n),(a=e.call(this,t,o)).updateSubCommentArr=function(t){a.setState((function(e){var n=e.subCommentArr;return{subCommentArr:[t].concat(Object(l.a)(n)),showingCount:Math.min(e.showingCount+1,e.subCommentArr.length+1)}}))},a.loadSubComments=function(){C.a.get("".concat(B,"/subcomment/").concat(a.props.comment.commentID)).then((function(t){a.setState((function(e){return e.subCommentArr=t.data,e.showingCount=5,e})),setTimeout((function(){a.setState((function(t){return t.open=!0,t}))}),200)}))},a.clearSubComments=function(){a.setState((function(t){return t.open=!1,t})),setTimeout((function(){a.setState((function(t){return t.subCommentArr=[],t.showingCount=5,t}))}),200)},a.commentID=a.props.comment.commentID,a.state={subCommentArr:[],showingCount:5,open:!1},a.subCommentCount=a.props.comment.subCommentCount,a}return Object(en.a)(n,[{key:"componentDidMount",value:function(){this.props.commentObjList.current.push(this)}},{key:"render",value:function(){var t=this;return Object(w.jsx)(De.a,{in:Boolean(this.state.subCommentArr.length)&&this.state.open,children:this.state.subCommentArr.map((function(e,n){return n>t.state.showingCount?Object(w.jsx)(w.Fragment,{}):n===t.state.showingCount?Object(w.jsx)("div",{style:{marginLeft:"3.6rem",marginRight:"4px",marginTop:"4px",display:"flex",justifyContent:"center",height:"1.5rem"},children:Object(w.jsxs)(N.a,{fullWidth:!0,size:"small",disableElevation:!0,style:{color:t.props.theme.palette.text.secondary,fontWeight:"bold"},onClick:function(){t.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{showingCount:Math.min(t.showingCount+5,t.subCommentArr.length)})}))},children:[Object(w.jsx)(qe.a,{}),t.state.showingCount,"/",t.state.subCommentArr.length]})}):Object(w.jsxs)("span",{children:[Object(w.jsx)(ht.a,{style:{marginLeft:"1.6rem"},avatar:Object(w.jsx)(st.a,{alt:null,src:t.props.avatarPic&&t.props.token.userName===e.ownerName?URL.createObjectURL(t.props.avatarPic):"".concat(B,"/avatar/").concat(e.ownerName,".svg")}),label:Object(w.jsxs)(yt.a,{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[e.ownerName,"\xa0",Object(w.jsx)("span",{style:{color:t.props.theme.palette.text.secondary,verticalAlign:"middle",fontSize:"0.7rem",fontWeight:"normal"},children:Object(Ze.a)(Number(e.postingTime)).replace("less than ","").replace("about ","")})]})}),t.props.token.userName===e.ownerName&&Object(w.jsx)(lt.a,{size:"small",style:{float:"right",marginTop:"4px"},onClick:function(){C.a.get("".concat(B,"/subcomment/deletesubcomment/").concat(e.subCommentID)).then((function(n){t.setState((function(t){return{subCommentArr:t.subCommentArr.filter((function(t){return t.subCommentID!==e.subCommentID})),showingCount:Math.max(t.showingCount-1,0)}})),t.props.setCommentArr((function(e){return e.forEach((function(e){e.commentID===t.commentID&&(e.subCommentCount?e.subCommentCount--:e.subCommentCount=1)})),Object(l.a)(e)}))}))},children:Object(w.jsx)(Ve.a,{style:{fontSize:"1.5rem"}})}),Object(w.jsx)(ct.a,{style:{marginLeft:"3.6rem",paddingLeft:"4px",paddingRight:"4px",marginRight:"4px",fontSize:"1.2rem",backgroundColor:t.props.theme.palette.background.default},children:t.props.toHtml(e.content,null,null,!0)})]},e.subCommentID)}))})}}]),n}(o.Component),En=["picArr","picName","setFullVisible"],wn=["toHtml","node","index","imgArr"],An=["backimage","textcolor","transformFn","node","index","arr","arr2","inView"],In=Object(Ot.a)((function(t){return{textFieldCss:function(){return{fontSize:"1.5rem","&.MuiInputLabel-shrink":{transform:"translate(0, 1.5px) scale(0.5)"}}},labelShrinkCss:function(){return{transform:"translate(0, 1.5px) scale(0.5)"}}}}));function Tn(t){t.style;var e,n=Object(o.useContext)(A),a=n.token,r=(n.setToken,n.breakpointsAttribute),i=(n.editorContent,n.setEditorContent,n.lgSizeObj,n.smSizeObj,n.deviceSize,n.picArr,n.setPicArr,n.postArr),c=n.setPostArr,u=n.postPicArr,b=(n.setPostPicArr,n.getSinglePost),g=n.deleteSinglePost,m=n.changeOwnerName,p=Object(o.useState)(),f=Object(d.a)(p,2),j=f[0],O=f[1],h=Object(o.useState)(!1),y=Object(d.a)(h,2),k=y[0],v=y[1],S=Object(z.a)(),E=Te({}),I=E.editorPaperCss,T=(E.className1,E.unstyledBlockCss,E.imageBlockCss,E.centerBlockCss,E.rightBlockCss,Bt()),M=(T.mentionHeadRoot,T.mentionBodyRoot,T.mentionBodyRoot2),P=T.mentionHeadAvatar,L=T.mentionHeadLabel,R=T.mentionHeadLabel2,F=T.mentionBodyLabel,D=In(),K=D.textFieldCss,U=(D.labelShrinkCss,Object(o.useState)(!0)),H=Object(d.a)(U,2),_=H[0],Y=H[1],W=Object(o.useCallback)((function(t,e,n,o){return Vt()(t,{transform:function t(r,i){if("imgtag"===r.name)return n&&Object(w.jsx)(Pn,{picArr:e,picName:r.attribs.id,fullVisible:_,setFullVisible:Y},i);if("emoji"===r.name){var c="url(".concat(B,"/picture/downloademoji/").concat(r.attribs.imgurl.substring(r.attribs.imgurl.lastIndexOf("/")+1,r.attribs.imgurl.length),")");return Object(w.jsx)(yt.a,{variant:o?"inherit":"body2",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",color:"rgba(0,0,0,0)",backgroundImage:c,transform:(x.isMobile,"scale(1.2)"),marginLeft:.12*S.typography.fontSize,marginRight:.12*S.typography.fontSize},children:r.attribs.symbol},i)}if("longmentionoff_head"===r.name)return Object(w.jsx)("span",{},i);if("longmentionoff_body"===r.name){var l=[];r.children.forEach((function(t){l.push(Object(Gt.convertNodeToElement)(t))}));var s="".concat(B,"/avatar").concat(r.attribs.imgurl.substring(r.attribs.imgurl.lastIndexOf("/"),r.attribs.imgurl.length)).replace(").","."),u=r.attribs.imgurl.substring(r.attribs.imgurl.lastIndexOf("/")+1,r.attribs.imgurl.length-5);return Object(w.jsx)(ht.a,{classes:{root:M,label:F},avatar:Object(w.jsx)(st.a,{alt:null,src:j&&a.userName===u?URL.createObjectURL(j):s}),label:Object(w.jsx)(yt.a,{variant:"body2",children:l.map((function(t,e){return Object(w.jsx)("span",{children:t},e)}))})},i)}if(Object.keys(r.attribs||{}).includes("colorblock")){var d=[],b=[],g=r.attribs.backimage,m=r.attribs.textcolor;return r.children.forEach((function(t){d.push("tag"===t.type?t:t.data),b.push(Object(Gt.convertNodeToElement)(t))})),Object(w.jsx)(Rn,{arr:d,transformFn:t,index:i,arr2:b,backimage:g,textcolor:m,inView:n},Math.random())}if("linkoff"===r.name){var p=[];return r.children.forEach((function(t){p.push(Object(Gt.convertNodeToElement)(t))})),Object(w.jsx)("span",{children:Object(w.jsx)(Ln,{toHtml:W,node:r,imgArr:e,index:i})},i)}}})}),[M,P,L,R,F]),X=(e={},Object(s.a)(e,S.breakpoints.values.xs,1),Object(s.a)(e,S.breakpoints.values.sm,1),Object(s.a)(e,S.breakpoints.values.md,2),Object(s.a)(e,S.breakpoints.values.lg,3),Object(s.a)(e,S.breakpoints.values.xl,4),e),G=Object($e.a)({threshold:.8,triggerOnce:!1,initialInView:!0}),V=G.ref,J=G.inView;G.entry;Object(o.useEffect)((function(){J&&!k&&b().then((function(t){0===t.length&&v(!0)}))}),[k,i,J]);var q=Object(o.useState)(!1),Z=Object(d.a)(q,2),Q=Z[0],$=Z[1],tt=Object(o.useState)(""),et=Object(d.a)(tt,2),nt=et[0],ot=et[1],at=Object(o.useRef)(),rt=Object(o.useState)(!0),it=Object(d.a)(rt,2),lt=it[0],ut=it[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(Jt.a,{disableGutters:!1,children:[Object(w.jsxs)(ze.a,{open:Q,onClose:function(){$(!1)},"aria-labelledby":"form-dialog-title",children:[Object(w.jsxs)(Ye.a,{id:"form-dialog-title",children:[Object(w.jsx)("input",{type:"file",style:{display:"none"},ref:at,onClick:function(t){t.currentTarget.value=null},accept:"image/*",onChange:function(t){t.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp|svg)$/i)&&O(t.currentTarget.files[0])}}),Object(w.jsx)(ht.a,{style:{backgroundColor:"transparent"},avatar:Object(w.jsx)(st.a,{style:{transform:"scale(2)"},alt:null,src:j?URL.createObjectURL(j):"".concat(B,"/avatar/").concat(a.userName,".svg")}),label:Object(w.jsxs)(yt.a,{variant:"h5",children:["\xa0\xa0\xa0",a.userName]}),onClick:function(){O(null),at.current.click()}})]}),Object(w.jsx)(He.a,{children:Object(w.jsx)(Ke.a,{InputLabelProps:{classes:{root:K,animated:K}},InputProps:{classes:{input:K}},value:nt,onChange:function(t){ot(t.target.value)},margin:"dense",id:"name",label:"\u65b0\u540d\u5b57/new name"})}),lt&&Object(w.jsxs)(Ue.a,{children:[Object(w.jsx)(N.a,{onClick:function(){ot(""),$(!1),O(null)},style:{fontSize:"1.5rem",color:"dark"===S.palette.type?S.palette.text.secondary:S.palette.primary.main},children:"Cancel"}),Object(w.jsx)(N.a,{onClick:function(){ut(!1);var t=a.userName;if(j){var e=new FormData;return e.append("file",j),e.append("obj",JSON.stringify({filename:j.name.trim(),ownerName:t,uploadTime:Date.now()})),C.a.post("".concat(B,"/avatar"),e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){nt?m(nt).then((function(e){e?(c((function(e){return Object(l.a)(e.map((function(e){return e.ownerName===t?(e.ownerName=nt,e):e})))})),ot(""),$(!1)):alert("name is taken")})):$(!1)}))}nt&&m(nt).then((function(e){e?(c((function(e){return Object(l.a)(e.map((function(e){return e.ownerName===t?(e.ownerName=nt,e):e})))})),ot(""),$(!1)):alert("name is taken")}))},style:{fontSize:"1.5rem",color:"dark"===S.palette.type?S.palette.text.secondary:S.palette.primary.main},children:"OK"})]})]}),Object(w.jsx)(Le.a,{breakpointCols:X,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:i.map((function(t,e){return Object(w.jsx)(Mn,{postArr:i,postPicArr:u,index:e,editorPaperCss:I,toHtml:W,token:a,mentionBodyRoot2:M,mentionBodyLabel:F,deleteSinglePost:g,breakpointsAttribute:r,setOpen:$,mentionHeadAvatar:P,avatarPic:j,setShowOk:ut,fullVisible:_},t.postID)}))}),Object(w.jsx)(ct.a,{ref:V,style:{padding:S.spacing(1),margin:"auto",backgroundColor:S.palette.background.default,width:"100%",opacity:Boolean(!k)&&J?1:0,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(w.jsx)(Ne.a,{size:"1.5rem"})})]})})}function Mn(t){var e=t.postArr,n=t.postPicArr,a=t.index,r=t.editorPaperCss,i=t.toHtml,c=t.token,l=(t.mentionBodyRoot2,t.mentionHeadAvatar,t.mentionBodyLabel,t.breakpointsAttribute,t.deleteSinglePost),s=t.setOpen,u=t.avatarPic,g=t.setShowOk,m=t.fullVisible,p=Object(z.a)(),f=Object($e.a)({threshold:0,triggerOnce:!0,initialInView:!1}),j=f.ref,O=f.inView,h=(f.entry,Object(o.useState)("auto")),y=Object(d.a)(h,2),k=y[0],v=y[1],S=Object(o.useState)("none"),E=Object(d.a)(S,2),A=E[0],I=E[1],T=Object(o.useRef)(),M=Object(o.useState)(!1),P=Object(d.a)(M,2),L=P[0],R=P[1],F=Object(o.useState)(e[a].commentCount),D=Object(d.a)(F,2),K=D[0],U=D[1],H=Object(o.useState)(!1),_=Object(d.a)(H,2),Y=_[0],W=_[1],X=Object(o.useState)(!1),G=Object(d.a)(X,2),V=G[0],J=G[1];return Object(o.useEffect)((function(){Number(window.getComputedStyle(T.current).height.replace("px",""))>360&&(W(!0),v("360px"),I("block"))}),[]),Object(w.jsxs)(ct.a,{classes:{root:r},elevation:3,ref:j,style:{padding:"0px",whiteSpace:"normal"},children:[!x.isMobile&&Object(w.jsxs)(ze.a,{open:V,onClose:function(){J(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",style:{display:m?"block":"none"},children:[Object(w.jsxs)(Ye.a,{id:"scroll-dialog-title",style:{padding:"8px 16px"},children:[Object(w.jsx)(ht.a,{onClick:function(){c.userName===e[a].ownerName&&s((function(t){return!t})),c.userName===e[a].ownerName&&g(!0)},avatar:Object(w.jsx)(st.a,{alt:null,src:u&&c.userName===e[a].ownerName?URL.createObjectURL(u):"".concat(B,"/avatar/").concat(e[a].ownerName,".svg")}),label:Object(w.jsxs)(yt.a,{style:Object(b.a)({marginTop:"3px",lineHeight:"1.0",fontWeight:"bold"},c.userName===e[a].ownerName&&{color:p.palette.primary.main}),children:[e[a].ownerName,Object(w.jsx)("br",{}),Object(w.jsx)("span",{style:{color:p.palette.text.secondary,verticalAlign:"middle",fontSize:"0.7rem",fontWeight:"normal"},children:Object(Ze.a)(e[a].postingTime)})]})},a),Object(w.jsxs)(lt.a,{size:"small",style:{justifySelf:"right"},onClick:function(){R((function(t){return!t})),C.a.get("".concat(B,"/comment/count/").concat(e[a].postID)).then((function(t){U(t.data)}))},children:[Object(w.jsx)(We.a,{style:{fontSize:"1.5rem"}}),"\xa0",Object(w.jsx)("span",{style:{fontWeight:"bold",fontSize:"1rem",color:p.palette.text.secondary,verticalAlign:"middle"},children:K})]}),Object(w.jsx)(lt.a,{size:"small",style:{float:"right"},onClick:function(){J(!1)},children:Object(w.jsx)(Xe.a,{fontSize:"medium"})})]}),Object(w.jsxs)(He.a,{dividers:!0,style:{padding:0},children:[Object(w.jsx)(_e.a,{style:{padding:"16px"},id:"scroll-dialog-description",tabIndex:-1,children:i(e[a].content,n[a],O)}),Object(w.jsx)(De.a,{in:L,children:Object(w.jsx)(Sn,{postID:e[a].postID,index:a,toHtml:i,setCommentCount:U,commentCount:K,avatarPic:u,showComment:L,fullScreen:V},e[a].postID)})]})]}),Object(w.jsxs)("div",{ref:T,style:{position:"relative",overflow:"none"===A?"visible":"hidden",height:k},children:[Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"2px",paddingBottom:"0px"},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht.a,{onClick:function(){c.userName===e[a].ownerName&&s((function(t){return!t})),c.userName===e[a].ownerName&&g(!0)},avatar:Object(w.jsx)(st.a,{alt:null,src:u&&c.userName===e[a].ownerName?URL.createObjectURL(u):"".concat(B,"/avatar/").concat(e[a].ownerName,".svg")}),label:Object(w.jsxs)(yt.a,{style:Object(b.a)({marginTop:"3px",lineHeight:"1.0",fontWeight:"bold"},c.userName===e[a].ownerName&&{color:p.palette.primary.main}),children:[e[a].ownerName,Object(w.jsx)("br",{}),Object(w.jsx)("span",{style:{color:p.palette.text.secondary,verticalAlign:"middle",fontSize:"0.7rem",fontWeight:"normal"},children:Object(Ze.a)(e[a].postingTime)})]})},a),!x.isMobile&&Object(w.jsx)(lt.a,{size:"small",style:{justifySelf:"right"},onClick:function(){J(!0)},children:Object(w.jsx)(Ge.a,{fontSize:"medium"})}),Object(w.jsxs)(lt.a,{size:"small",style:{justifySelf:"right"},onClick:function(){R((function(t){return!t})),C.a.get("".concat(B,"/comment/count/").concat(e[a].postID)).then((function(t){U(t.data)}))},children:[Object(w.jsx)(We.a,{style:{fontSize:"1.5rem"}}),"\xa0",Object(w.jsx)("span",{style:{fontWeight:"bold",fontSize:"1rem",color:p.palette.text.secondary,verticalAlign:"middle"},children:K})]})]}),c.userName==e[a].ownerName&&Object(w.jsx)(lt.a,{size:"small",onClick:function(){l(e[a].postID).then((function(t){}))},children:Object(w.jsx)(Ve.a,{style:{fontSize:"1.5rem"}})})]}),i(e[a].content,n[a],O),Y&&Object(w.jsx)(N.a,{style:Object(b.a)({borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:L?0:"4px",borderBottomRightRadius:L?0:"4px",padding:0,position:"none"===A?"relative":"absolute",bottom:0,opacity:.8,backgroundColor:p.palette.background.default,boxShadow:"none"===A?p.shadows[0]:p.shadows[5],color:"dark"===p.palette.type?p.palette.text.secondary:p.palette.primary.main},"none"===A&&{display:"flex"}),onClick:function(){v((function(t){return"auto"===t?"360px":"auto"})),I((function(t){return"none"===t?"auto":"none"}))},size:"small",fullWidth:!0,children:"none"===A?Object(w.jsx)(Je.a,{}):Object(w.jsx)(qe.a,{})})]}),L&&Object(w.jsx)(Sn,{postID:e[a].postID,index:a,toHtml:i,setCommentCount:U,commentCount:K,avatarPic:u,showComment:L,fullScreen:V},e[a].postID)]},a)}function Pn(t){var e=t.picArr,n=t.picName,a=t.setFullVisible,r=(Object(u.a)(t,En),Object(z.a)()),i="local"===n?e.length:Number(n.split("_")[1]),c=e||[],s=Object(o.useState)(0),g=Object(d.a)(s,2),m=g[0],p=g[1],f=Object(o.useState)(!1),j=Object(d.a)(f,2),O=j[0],h=j[1],y={position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},x={position:"absolute",backgroundColor:"wheat",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover"},k="local"===n?c.map((function(t){return t.localUrl})):Object(l.a)(Array(i)).map((function(t,e){return"".concat(B,"/picture/downloadpicture/").concat(n,"_").concat(e)})),C=Object(w.jsx)(Qe.a,{mainSrc:k[m],nextSrc:k[(m+1)%k.length],prevSrc:k[(m+k.length-1)%k.length],onCloseRequest:function(){h(!1),a(!0)},onMovePrevRequest:function(){return p((function(t){return(t+k.length-1)%k.length}))},onMoveNextRequest:function(){return p((function(t){return(t+k.length+1)%k.length}))}});return 1===i?Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},y),{},{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_0)")}),onClick:function(){a(!1),h(!0)},children:O&&C}):2===i?Object(w.jsxs)("div",{style:Object(b.a)({},y),children:[Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"100%",top:"0%",left:"0%",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)",backgroundColor:"wheat"}),onClick:function(){p(0),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"100%",top:"0%",left:"50%",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(0px)"}),onClick:function(){p(1),h(!0),a(!1)}}),O&&C]}):3===i?Object(w.jsxs)("div",{style:Object(b.a)({},y),children:[Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"100%",left:"0%",top:"0%",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)"}),onClick:function(){p(0),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",left:"50%",top:"0%",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"}),onClick:function(){p(1),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",left:"50%",top:"50%",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(1px) translateY(1px)"}),onClick:function(){p(2),h(!0),a(!1)}}),O&&C]}):Object(w.jsxs)("div",{style:Object(b.a)({},y),children:[Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",top:"0%",left:"0%",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(-1px)"}),onClick:function(){p(0),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",top:"0%",left:"50%",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"}),onClick:function(){p(1),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",top:"50%",left:"0%",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(-1px) translateY(1px)"}),onClick:function(){p(2),h(!0),a(!1)}}),Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)({},x),{},{width:"50%",height:"50%",top:"50%",left:"50%",backgroundImage:"local"===n?"url("+c[3].localUrl+")":"url(".concat(B,"/picture/downloadpicture/").concat(n,"_3)"),transform:"translateX(1px) translateY(1px)"}),onClick:function(){p(3),h(!0),a(!1)}}),O&&C]})}function Ln(t){t.toHtml;var e=t.node,n=t.index,a=(t.imgArr,Object(u.a)(t,wn),Object(z.a)()),r=e.attribs.linkhost,i=e.attribs.linkaddress,c=Object(o.useState)(r.substr(1)),l=Object(d.a)(c,2),s=l[0],b=l[1],g=[];return e.children.forEach((function(t,e){g.push(Object(Gt.convertNodeToElement)(t))})),Object(w.jsx)("span",{target:"_blank",style:{color:a.palette.primary.main,cursor:"pointer"},onClick:function(t){t.stopPropagation(),b(Object(w.jsx)(wt.a,{href:i,target:"_blank",rel:"noopener",children:g.map((function(t,e){return t}))}))},children:Object(w.jsx)("span",{children:s},n)})}function Rn(t){var e=t.backimage,n=t.textcolor,a=t.transformFn,r=(t.node,t.index),i=t.arr,c=t.arr2,l=t.inView,s=(Object(u.a)(t,An),Object(o.useState)(!1)),g=Object(d.a)(s,2),m=g[0],p=g[1],f=e.indexOf("downloadbackpicture")>=0?"url(".concat(B,"/picture/downloadbackpicture/").concat(e.substring(e.lastIndexOf("/")+1,e.length-1),")"):e;return Object(w.jsx)(Fe.a,{onChange:function(t){p(t)},style:Object(b.a)(Object(b.a)({},l&&{backgroundImage:f}),{},{color:n,backgroundSize:"cover",position:"relative",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",display:"flex",alignItems:m?"flex-start":"center",justifyContent:"center",overflow:"auto"}),children:Object(w.jsx)("div",{style:Object(b.a)(Object(b.a)(Object(b.a)({textAlign:"center",position:m?"block":"absolute"},!m&&{top:"50%"}),!m&&{transform:"translateY(-50%)"}),{},{padding:"8px",whiteSpace:"pre-wrap"}),children:i.map((function(t,e){return"span"===t.name?(t.children=t.children.filter((function(t){return"br"!==t.name})),Object(Gt.convertNodeToElement)(t)):"tag"!==t.type?Object(w.jsx)("span",{children:t},e):"span"===t.name?c[e]:Object(w.jsx)("span",{children:a(t,e)},e)}))})},r)}var Fn=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(c.a,{}),"  ",Object(w.jsx)(F.a,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",spacing:0,children:Object(w.jsx)(F.a,{item:!0,xs:12,sm:12,md:10,lg:6,xl:6,children:Object(w.jsx)(Pe,{})})}),Object(w.jsx)(Tn,{})]})},Nn=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,499)).then((function(e){var n=e.getCLS,o=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),o(t),a(t),r(t),i(t)}))};i.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(M,{children:Object(w.jsx)(Fn,{})})}),document.getElementById("root")),Nn()}},[[411,1,2]]]);
//# sourceMappingURL=main.1f55cbf1.chunk.js.map