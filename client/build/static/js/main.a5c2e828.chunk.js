(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{219:function(t,e,n){},220:function(t,e,n){},377:function(t,e){},407:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(19),c=n.n(a),i=(n(219),n.p,n(220),n(480)),l=n(22),s=n(11),u=n(9),d=n(7),b=n(17),g=n(201),p=n(444),f=n(443),m=n(195),j=n.n(m),h=n(3),O=n(191),y=n.n(O),k=n(21),x=n(42),v=n.n(x),C="";C="/api",v.a.interceptors.request.use((function(t){return v.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),t}));var S=C,B=n(104),E=n(1),w=Object(o.createContext)(),A=y()({});function I(){for(var t,e={},n={},o={},r={},a={},c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return i.forEach((function(t){e=Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t[0],t[1])),n=Object(d.a)(Object(d.a)({},n),{},Object(b.a)({},t[0],t[2]||t[1])),o=Object(d.a)(Object(d.a)({},o),{},Object(b.a)({},t[0],t[3]||t[2]||t[1])),r=Object(d.a)(Object(d.a)({},r),{},Object(b.a)({},t[0],t[4]||t[3]||t[2]||t[1])),a=Object(d.a)(Object(d.a)({},a),{},Object(b.a)({},t[0],t[5]||t[4]||t[3]||t[2]||t[1]))})),t={},Object(b.a)(t,A.only("xs"),Object(d.a)({},e)),Object(b.a)(t,A.only("sm"),Object(d.a)({},n)),Object(b.a)(t,A.only("md"),Object(d.a)({},o)),Object(b.a)(t,A.only("lg"),Object(d.a)({},r)),Object(b.a)(t,A.only("xl"),Object(d.a)({},a)),t}function P(t){var e=Object(o.useState)(localStorage.getItem("token")?Object(B.a)(localStorage.getItem("token")):{userName:"__temp__"}),n=Object(u.a)(e,2),r=n[0],a=n[1],c=Object(o.useState)(h.EditorState.createWithContent(h.ContentState.createFromText(""))),i=Object(u.a)(c,2),s=i[0],b=i[1],m=Object(o.useState)(!0),O=Object(u.a)(m,2),y=O[0],k=O[1],x=Object(o.useState)([]),C=Object(u.a)(x,2),A=C[0],P=C[1],T=Object(o.useState)([]),M=Object(u.a)(T,2),R=M[0],L=M[1],F=Object(o.useState)([]),K=Object(u.a)(F,2),D=K[0],z=K[1],N=Object(o.useCallback)((function(t){return v.a.get("".concat(S,"/article/deletesinglepost/").concat(t)).then((function(e){var n=R.findIndex((function(e){return e.postID===t}));return L((function(e){return e.filter((function(e){return e.postID!==t}))})),z((function(t){return t.filter((function(t,e){return e!==n}))})),e.data}))})),U=["1.5rem","1.5rem","1.5rem","1.5rem","1.5rem"],_=["2rem","2rem","2rem","2rem","2rem"];Object(o.useEffect)((function(){"__temp__"===r.userName&&v.a.post("".concat(S,"/user/register"),r).then((function(t){localStorage.setItem("token",t.headers["x-auth-token"]),a(Object(B.a)(t.headers["x-auth-token"]))}))}),[]);var Y=Object(o.useMemo)((function(){var t=Object(g.a)({backgourndImageArr:[{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b7028076fa440017fb5779)"),color:"darkgray"},{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b6f77fae1acf0017a96c4b)"),color:"orange"},{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b701a9dc07780017dcfd38)"),color:"white"},{backgroundImage:"url(https://picsum.photos/1024/576)",color:"white"},{backgroundImage:"url(https://picsum.photos/512/288)",color:"white"}],palette:{primary:j.a,type:y?"light":"dark"},typography:{fontSize:14,button:{textTransform:"none"},body2:I(["fontSize"].concat(U))},overrides:{MuiAvatar:{root:Object(d.a)({},I(["width"].concat(_),["height"].concat(_)))},MuiSvgIcon:{root:Object(d.a)({},I(["fontSize"].concat(_)))},MuiChip:{root:{borderRadius:0,backgroundColor:"transparent","& .MuiChip-avatar":Object(d.a)({color:"#616161",marginLeft:"5px",marginRight:"-6px",objectFit:"cover",textAlign:"center"},I(["width"].concat(U),["height"].concat(U)))},label:{"& > .MuiTypography-root.MuiTypography-body2":Object(d.a)({},I(["fontSize","1.2rem","1.2rem"]))}}}});return t.palette.mentionBackColor=y?"#b7e1fc":t.palette.primary.light,t}),[y]),H=Object(f.a)(Y.breakpoints.only("xs")),X=Object(f.a)(Y.breakpoints.only("sm")),W=Object(f.a)(Y.breakpoints.only("md")),G=Object(f.a)(Y.breakpoints.only("lg")),q=(Object(f.a)(Y.breakpoints.only("xl")),H?"xs":X?"sm":W?"md":G?"lg":"xl");return Object(E.jsx)(w.Provider,{value:{token:r,setToken:a,isLight:y,setIsLight:k,theme:Y,breakpointsAttribute:I,editorContent:s,setEditorContent:b,lgSizeObj:{xs:"2.5rem",sm:"2.5rem",md:"2.5rem",lg:"2.5rem",xl:"2.5rem"},smSizeObj:{xs:"1rem",sm:"1rem",md:"1rem",lg:"1rem",xl:"1rem"},deviceSize:q,picArr:A,setPicArr:P,postArr:R,setPostArr:L,postPicArr:D,setPostPicArr:z,getSinglePost:function(){var t=Math.min.apply(Math,Object(l.a)(R.map((function(t){return t.postingTime}))).concat([Date.now()]));return v.a.get("".concat(S,"/article/singlepost2/").concat(t)).then((function(t){return 0===t.data.length?Promise.resolve(t.data):(L((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.data.map((function(t){return t}))))})),z((function(t){return[].concat(Object(l.a)(t),[""])})),t.data)}))},deleteSinglePost:N,changeOwnerName:function(t){return v.a.post("".concat(S,"/article/changeownername"),{newName:t}).then((function(t){return t.data?(localStorage.setItem("token",t.headers["x-auth-token"]),a(Object(B.a)(t.headers["x-auth-token"])),r):t.data}))}},children:Object(E.jsx)(p.a,{theme:Y,children:t.children})})}var T=n(41),M=n.n(T),R=n(25),L=(n(173),n(445)),F=n(410),K=n(447),D=n(448),z=n(48),N=["block","editor","contentState","picArr","setPicArr"],U=["children","picArr","setPicArr","editor"],_=["editor"];function Y(){var t=null,e=null;function n(){var n=t.getCurrentContent(),o=n.getSelectionBefore(),r=n.getSelectionAfter(),a=n.getBlocksAsArray().find((function(t){return"imageBlock"===t.type||"atomic"===t.type})),c=n.getBlocksAsArray().filter((function(t){return!("imageBlock"===t.type||"atomic"===t.type)})),i=a&&a.getKey();if(i){if(i&&n.getBlocksAsArray().length<=1)return t=h.EditorState.createEmpty(),setTimeout((function(){e(t)}),0),null;a=n.getBlockForKey(i),n=(n=h.ContentState.createFromBlockArray(c)).merge({selectionAfter:r,selectionBefore:o}),t=h.EditorState.createWithContent(n),e(t)}}function r(){var e=t.getSelection(),n=t.getCurrentContent();n.getBlockForKey(e.getEndKey());return n.getBlockMap().toArray().findIndex((function(t){return"atomic"===t.type&&"imageBlockText"===t.text||"imageBlock"===t.type}))>=0}return{ImageBlog:function(t){t.block,t.editor,t.contentState;var e=t.picArr,o=t.setPicArr,r=(Object(s.a)(t,N),Object(z.a)()),a=e.length,c=e;return 0===a?Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundColor:r.palette.divider,overflow:"hidden"},children:Object(E.jsx)("button",{onClick:function(){},children:"delete"})}):1===a?Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",backgroundColor:r.palette.divider,overflow:"hidden"},onClick:function(){o((function(t){return setTimeout((function(){n()}),0),[]}))}}):2===a?Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[1]]}))}}),Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[0]]}))}})]}):3===a?Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(t){return[t[1],t[2]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[0],t[2]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[2].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(t){return[t[0],t[1]]}))}})]}):Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[1],t[2],t[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(t){return[t[0],t[2],t[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[2].localUrl+")",transform:"translateX(-1px) translateY(1px)"},onClick:function(){o((function(t){return[t[0],t[1],t[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[3].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(t){return[t[1],t[2],t[3]]}))}})]})},ImageButton:function(n){n.children;var a=n.picArr,c=n.setPicArr,i=n.editor,u=Object(s.a)(n,U),b=Object(o.useRef)(),g=Object(z.a)();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},u),{},{style:{color:"dark"===g.palette.type?a.length>=4&&r()?g.palette.action.disabled:g.palette.text.secondary:a.length>=4&&r()?g.palette.action.disabled:g.palette.primary.main},disabled:a.length>=4&&r(),onClick:function(t){b.current.click()},children:Object(E.jsx)(K.a,{})})),Object(E.jsx)("input",{ref:b,type:"file",style:{display:"none"},onClick:function(t){t.currentTarget.value=null},onChange:function(n){if(n.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)){var o=n.currentTarget.files[0];o.localUrl=URL.createObjectURL(n.currentTarget.files[0]),console.log(n.currentTarget.files[0]),c((function(t){return[].concat(Object(l.a)(t),[o])})),r()?i.current.focus():function(n){var o=t.getCurrentContent(),r=t.getSelection(),a=r.getEndKey(),c=(o.getBlockForKey(r.getEndKey()),o.getBlocksAsArray()),i=o.getSelectionBefore(),l=o.getSelectionAfter(),s=c.findIndex((function(t){return t.key===a}));s=s>=0?s:c.length-1,console.log(s),c.splice(s+1,0,new h.ContentBlock({key:H(),type:"imageBlock",text:""})),o=(o=h.ContentState.createFromBlockArray(c)).merge({selectionAfter:l,selectionBefore:i}),t=h.EditorState.push(t,o,"insert-fragment"),e(t)}(URL.createObjectURL(n.currentTarget.files[0]))}}})]})},TopImageButton:function(n){n.editor;var o=Object(s.a)(n,_),r=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){!function(n){t.getSelection();var o=t.getCurrentContent(),r=o.getSelectionBefore(),a=o.getSelectionAfter(),c=o.getBlocksAsArray().find((function(t){return"imageBlock"===t.type||"atomic"===t.type})),i=o.getBlocksAsArray().sort((function(t,e){return"imageBlock"===t.type||"atomic"===t.type?-1:0})),l=c&&c.getKey();l&&(c=o.getBlockForKey(l),console.log(o.getBlocksAsArray().length),o=(o=h.ContentState.createFromBlockArray(i)).merge({selectionAfter:a,selectionBefore:r}),t=h.EditorState.push(t,o,"insert-fragment"),e(t))}()},children:Object(E.jsx)(D.a,{})}))},removeImageBlog:n,hasImageBlock:r,imagePlugin:{onChange:function(n,o){var r=o.setEditorState;return e=r,t=n}}}}function H(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*o));return e}var X=n(449),W=n(450),G=n(451),q=n(452),J=n(453),V=n(454),Z=["editor","isLargeOn","setIsLargeOn"],Q=["editor","isSmallOn","setIsSmallOn"],$=["children","makeBold","isBoldOn","setIsBoldOn","styleType","editor"],tt=["children","makeBold","isItalicOn","setIsItalicOn","styleType","editor"],et=["children","makeBold","isUnderlineOn","setIsUnderlineOn","styleType","editor"];function nt(){var t=null,e=null;function n(n,o){if(t.getSelection().isCollapsed()){var r=t.getSelection(),a=r.toArray(),c=Object(u.a)(a,6),i=c[0],l=c[1],s=c[2],d=c[3],b=(c[4],c[5],t.getCurrentInlineStyle().toObject()),g=h.Modifier.replaceText(t.getCurrentContent(),r," "),p=r.merge({anchorKey:i,anchorOffset:l,focusKey:s,focusOffset:d+" ".length,isBackward:!1,hasFocus:!0});Object.keys(b).forEach((function(t){t!==n&&(g=h.Modifier.applyInlineStyle(g,p,b[t]))})),g=h.Modifier.applyInlineStyle(g,p,b[n]?[]:n),t=h.EditorState.push(t,g,"insert-characters"),t=h.EditorState.acceptSelection(t,p),e(t)}else{var f=(t=h.RichUtils.toggleInlineStyle(t,n)).getSelection().toArray(),m=Object(u.a)(f,6);m[0],m[1],m[2],m[3],m[4],m[5];e(t)}}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LARGE",o=t.getSelection().isCollapsed();if(o){if(o){var r=t.getSelection(),a=r.toArray(),c=Object(u.a)(a,6),i=c[0],l=c[1],s=c[2],d=c[3],b=(c[4],c[5],t.getCurrentInlineStyle().toObject()),g=" ",p=h.Modifier.insertText(t.getCurrentContent(),r,g),f=r.merge({anchorKey:i,anchorOffset:l,focusKey:s,focusOffset:d+g.length,isBackward:!1,hasFocus:!0});Object.keys(b).forEach((function(t){t!==n&&"LARGE"!==t&&"SMALL"!==t&&(p=h.Modifier.applyInlineStyle(p,f,b[t]))})),p=h.Modifier.applyInlineStyle(p,f,b[n]?[]:n),t=h.EditorState.push(t,p,"insert-characters"),t=h.EditorState.acceptSelection(t,f),e(t)}}else{var m=t.getSelection(),j=m.toArray(),O=Object(u.a)(j,6),y=(O[0],O[1],O[2],O[3],O[4],O[5],t.getCurrentInlineStyle().toObject()),k=t.getCurrentContent();console.log(y),"LARGE"===n?(k=h.Modifier.removeInlineStyle(k,m,"SMALL"),k=h.Modifier.removeInlineStyle(k,m,"LARGE"),y.LARGE||(k=h.Modifier.applyInlineStyle(k,m,"LARGE"))):"SMALL"===n&&(k=h.Modifier.removeInlineStyle(k,m,"SMALL"),k=h.Modifier.removeInlineStyle(k,m,"LARGE"),y.SMALL||(k=h.Modifier.applyInlineStyle(k,m,"SMALL"))),t=h.EditorState.push(t,k,"change-inline-style"),t=h.EditorState.acceptSelection(t,m),e(t)}}return{boldPlugin:{onChange:function(n,o){var r=o.setEditorState;return e=r,t=n}},BoldButton:function(t){return Object(E.jsx)(ot,Object(d.a)({makeBold:n},t))},ItalicButton:function(t){return Object(E.jsx)(rt,Object(d.a)({makeBold:n},t))},UnderlineButton:function(t){return Object(E.jsx)(at,Object(d.a)({makeBold:n},t))},LargeButton:function(t){var e=t.editor,n=t.isLargeOn,r=t.setIsLargeOn,a=Object(s.a)(t,Z),c=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(t){e.current.focus(),o("LARGE",r)},children:Object(E.jsx)(X.a,{})}))},SmallButton:function(t){var e=t.editor,n=t.isSmallOn,r=t.setIsSmallOn,a=Object(s.a)(t,Q),c=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(t){e.current.focus(),o("SMALL",r)},children:Object(E.jsx)(W.a,{})}))}}}function ot(t){t.children;var e=t.makeBold,n=t.isBoldOn,o=t.setIsBoldOn,r=(t.styleType,t.editor),a=Object(s.a)(t,$),c=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(t){r.current.focus(),e("BOLD",o)},children:Object(E.jsx)(q.a,{})}))}function rt(t){t.children;var e=t.makeBold,n=t.isItalicOn,o=t.setIsItalicOn,r=(t.styleType,t.editor),a=Object(s.a)(t,tt),c=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(t){r.current.focus(),e("ITALIC",o)},children:Object(E.jsx)(J.a,{})}))}function at(t){t.children;var e=t.makeBold,n=t.isUnderlineOn,o=t.setIsUnderlineOn,r=(t.styleType,t.editor),a=Object(s.a)(t,et),c=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(t){r.current.focus(),e("UNDERLINE",o)},children:Object(E.jsx)(V.a,{})}))}var ct=n(456),it=n(457),lt=n(486),st=n(455),ut=["children","isEmojiPanelOn","setIsEmojiPanelOn"],dt=["children","isEmojiPanelOn","setIsEmojiPanelOn"],bt=["children","emoji","insertEmoji","isEmojiPanelOn","marginBottom"];function gt(){var t=null,e=null,n="url(".concat(S,"/picture/downloademoji/"),r={};function a(n){var o=t.getSelection().toArray(),r=Object(u.a)(o,6),a=r[0],c=r[1],i=r[2],l=r[3],s=r[4],d=(r[5],[s?i:a,s?l:c,s?a:i,s?c:l]),b=d[0],g=d[1],p=h.Modifier.replaceText(t.getCurrentContent(),t.getSelection(),n),f=t.getSelection().merge({anchorKey:b,anchorOffset:g+n.length,focusKey:b,focusOffset:g+n.length,isBackward:!1,hasFocus:!0});t=h.EditorState.push(t,p,"insert-characters"),t=h.EditorState.acceptSelection(t,f),e(t)}return["\u2620","\u2764","\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69","\ud83d\udc7f","\ud83d\udc80","\ud83d\udca9","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude07","\ud83d\ude08","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude0e","\ud83d\ude0f","\ud83d\ude10","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude16","\ud83d\ude18","\ud83d\ude1a","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1e","\ud83d\ude20","\ud83d\ude21","\ud83d\ude22","\ud83d\ude23","\ud83d\ude24","\ud83d\ude25","\ud83d\ude28","\ud83d\ude29","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude2d","\ud83d\ude30","\ud83d\ude31","\ud83d\ude32","\ud83d\ude33","\ud83d\ude35","\ud83d\ude36","\ud83d\ude37","\ud83d\ude47\u200d\u2640\ufe0f","\ud83e\udd24","\ud83e\udd71"].forEach((function(t){r[t]=n+t+".png"})),{emojiPlugin:{onChange:function(n,o){var a=o.setEditorState;return t=n,e=a,t=function(){var e=t.getSelection().toArray(),n=Object(u.a)(e,6),o=(n[0],n[1],n[2],n[3],n[4],n[5],t.getSelection()),a=t.getCurrentContent(),c=t.getSelection();return t.getCurrentContent().getBlocksAsArray().forEach((function(t){var e=t.toArray(),n=Object(u.a)(e,4),o=n[0],i=n[2];n[3].forEach((function(t,e){var n=t.getEntity();n&&"EMOJI"===a.getEntity(n).getType()&&(c=c.merge({anchorKey:o,anchorOffset:e,focusKey:o,focusOffset:e+1,isBackward:!1,hasFocus:!1}),a=h.Modifier.applyEntity(a,c,null))})),Object.keys(r).forEach((function(t){for(var e,n=new RegExp("".concat(t),"g"),l=[];null!==(e=n.exec(i));){var s=e.index;e.index,e[0].length,l.push(s)}l.forEach((function(e){var n=(a=a.createEntity("EMOJI","IMMUTABLE",{url:r[t],symbol:t})).getLastCreatedEntityKey();c=c.merge({anchorKey:o,anchorOffset:e,focusKey:o,focusOffset:e+t.length,isBackward:!1,hasFocus:!1}),a=h.Modifier.applyEntity(a,c,n)}))}))})),t=h.EditorState.push(t,a,"insert-characters"),t=h.EditorState.acceptSelection(t,o)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&"EMOJI"===n.getEntity(e).getType()}),e)},component:function(t){t.contentState,t.entityKey,t.blockKey,t.offsetKey,t.start,t.end;var e=t.decoratedText,n=Object(o.useRef)(),a=Object(z.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("span",{ref:n,className:"emoji",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",marginLeft:.12*a.typography.fontSize,marginRight:.12*a.typography.fontSize,transform:(k.isMobile,"scale(1.2)"),backgroundImage:r[e]},children:Object(E.jsx)("span",{style:{clipPath:"circle(0% at 50% 50%)"},children:t.children})})})}}]},EmojiButton:function(t){return Object(E.jsx)(pt,Object(d.a)({},t))},EmojiIconButton:function(t){return Object(E.jsx)(ft,Object(d.a)({},t))},EmojiPanel:function(t){return Object(E.jsx)(mt,Object(d.a)({emoji:r,insertEmoji:a},t))}}}function pt(t){t.children;var e=t.isEmojiPanelOn,n=t.setIsEmojiPanelOn,o=Object(s.a)(t,ut),r=Object(z.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:e?r.palette.primary.main:"",color:"light"===r.palette.type?e?r.palette.primary.contrastText:r.palette.primary.main:e?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(t){n((function(t){return!t}))},children:Object(E.jsx)(st.a,{})}))})}function ft(t){t.children;var e=t.isEmojiPanelOn,n=t.setIsEmojiPanelOn,o=Object(s.a)(t,dt),r=Object(z.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(ct.a,{style:{borderRadius:"1000px",transform:"scale(0.8)"},elevation:3,children:Object(E.jsx)(it.a,Object(d.a)(Object(d.a)({size:"small"},o),{},{style:{backgroundColor:e?r.palette.primary.main:r.palette.background.paper,color:"light"===r.palette.type?e?r.palette.primary.contrastText:r.palette.primary.main:e?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(t){n((function(t){return!t}))},children:Object(E.jsx)(st.a,{})}))})})}function mt(t){t.children;var e=t.emoji,n=t.insertEmoji,o=t.isEmojiPanelOn,r=t.marginBottom,a=(Object(s.a)(t,bt),Object(z.a)());return Object(E.jsx)(ct.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:o?"10px":0,maxHeight:o?"30vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:o?1:0,marginBottom:r||a.spacing(2)},children:Object.keys(e).map((function(t,o){return Object(E.jsx)(F.a,{variant:"text",onClick:function(e){n(t)},children:Object(E.jsx)(lt.a,{src:e[t].replace("url(","").replace(")",""),style:{transform:"scale(1.2)",borderRadius:0}})},t)}))})}var jt=n(458),ht=n(487),Ot=n(203),yt=n(459),kt=["inMentionPanel"],xt=["isMentionPanelOn","setIsMentionPanelOn"],vt=["isMentionPanelOn","setIsMentionPanelOn"],Ct=["getEditorState","setEditorState"],St=Object(jt.a)((function(t){var e=Object(z.a)();return{mentionHeadAvatar:function(t){return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1)"}},mentionHeadRoot:function(t){return Object(b.a)({borderRadius:999,borderTopRightRadius:0,borderBottomRightRadius:0,position:"relative",height:"100%",backgroundColor:e.palette.mentionBackColor},"position","relative")},mentionBodyRoot:function(t){return{borderRadius:999,borderTopLeftRadius:0,borderBottomLeftRadius:0,height:"100%",backgroundColor:e.palette.mentionBackColor}},mentionBodyRoot2:function(t){return{borderRadius:999,height:"100%",backgroundColor:e.palette.mentionBackColor,boxShadow:e.shadows[2]}},mentionHeadLabel:function(t){return{paddingLeft:0,paddingRight:0,borderStyle:"none"}},mentionHeadLabel2:function(t){return{paddingLeft:0,paddingRight:0,borderStyle:"none",color:"rgba(200,0,0,0)"}},mentionBodyLabel:function(t){return{borderStyle:"none"}}}}));function Bt(){var t="https://api.multiavatar.com",e=null,n=null,r=[],a={};r.forEach((function(e){a[e]=null,v.a.get("".concat(t,"/").concat(e,".svg"),{responseType:"arraybuffer",onDownloadProgress:function(t){}}).then((function(t){var n=btoa(new Uint8Array(t.data).reduce((function(t,e){return t+String.fromCharCode(e)}),""));a[e]="data:"+t.headers["content-type"]+";base64,"+n}))}));var c=99123;function i(t){var e=t.inMentionPanel,n=void 0!==e&&e,c=Object(s.a)(t,kt),i=Object(z.a)(),l=Object(o.useState)(0),d=Object(u.a)(l,2),g=d[0],p=d[1],f=c.mentionHeadKey,m=c.mentionBodyKey,j=c.entityKey,h=St(),O=(h.mentionHeadRoot,h.mentionBodyRoot,h.mentionBodyRoot2),y=(h.mentionHeadAvatar,h.mentionHeadLabel,h.mentionHeadLabel2,h.mentionBodyLabel);return Object(o.useEffect)((function(){p(1)}),[]),Object(E.jsx)(ct.a,{elevation:2,contentEditable:"false",suppressContentEditableWarning:"true",style:{width:"max-content",position:"absolute",marginTop:i.spacing(0),left:"0px",zIndex:122,display:"flex",flexDirection:"column",opacity:g,transform:"scale(".concat(g,")"),transitionProperty:"opacity,transform",transitionDuration:"0.2s"},children:r.map((function(t,e){return Object(E.jsx)(ht.a,{classes:{root:O,label:y},style:{backgroundColor:c.tabIndex%r.length===e||n?i.palette.mentionBackColor:i.palette.action.disabledBackground,cursor:"pointer",width:"fit-content"},avatar:Object(E.jsx)(lt.a,{alt:"Natacha",src:a[t]}),onMouseDown:function(){b(n?" @"+t:t,f,m,j)},label:Object(E.jsx)(Ot.a,{variant:"body2",children:t})},e)}))})}function b(t,o,r,a){var c=t+" ",i=e.getCurrentContent(),l=e.getSelection(),s=r?i.getEntity(r).getData().person.replace(" @",""):"",d=l.toArray(),b=Object(u.a)(d,6),g=b[0],p=b[1],f=b[2],m=b[3],j=b[4],O=(b[5],[j?f:g,j?m:p,j?g:f,j?p:m]),y=O[0],k=O[1],x=l.merge({anchorKey:y,anchorOffset:k,focusKey:y,focusOffset:k+s.length,isBackward:!1,hasFocus:!0}),v=h.Modifier.replaceText(i,x,c);x=e.getSelection().merge({anchorKey:y,anchorOffset:k+c.length,focusKey:y,focusOffset:k+c.length,isBackward:!1,hasFocus:!0}),e=h.EditorState.push(e,v,"insert-characters"),e=h.EditorState.acceptSelection(e,x),n(e)}function g(){if(r.length<=0)return!1;var t=!1,n=e.getCurrentContent();return n.getBlocksAsArray().forEach((function(e){if(e.getCharacterList().forEach((function(e,o){var a=e.getEntity();if(a){var i=n.getEntity(a).getData(),l=i.mentionType,s=i.mentionHeadKey,u=i.mentionBodyKey;if(l){if("shortMentionOn"===l)return t=[r[c%r.length],"","",a];if(l.indexOf("longMentionOnAt")>=0)return t=[r[c%r.length],s,u,a]}}})),t)return t})),t}return{mentionPlugin:{handleBeforeInput:function(t,o,r,a){var c=a.setEditorState,i=e.getSelection().toArray(),l=Object(u.a)(i,6),s=l[0],d=l[1],b=l[2],p=l[3],f=l[4],m=(l[5],[f?b:s,f?p:d,f?s:b,f?d:p]),j=m[1],O=m[3];if(g()&&k.isMobile&&!k.isFirefox){n=c;var y=(e=o).getSelection(),x=e.getCurrentContent();return y=y.merge({isBackward:!1,hasFocus:!0}),x=h.Modifier.replaceText(x,y,t),y=y.merge({anchorOffset:j+2*t.length,focusOffset:O+2*t.length,isBackward:!1,hasFocus:!0}),e=h.EditorState.push(e,x,"insert-characters"),c(e=h.EditorState.acceptSelection(e,y)),"handled"}},handleReturn:function(t,e,n){var o=n.setEditorState;return g()?(b.apply(void 0,Object(l.a)(g())),"handled"):(o(h.RichUtils.insertSoftNewline(e)),"handled")},keyBindingFn:function(t,e){e.getEditorState,e.setEditorState,Object(s.a)(e,Ct);return 40===t.keyCode&&g()?(c+=1,"fire-arrow"):38===t.keyCode&&g()?(c-=1,"fire-arrow"):void 0},handleKeyCommand:function(t,o,r,a){a.setEditorState;return"fire-arrow"===t?(n(e),"handled"):"not-handled"},onChange:function(o,r){var a=r.setEditorState;return e=o,n=a,e=function(){var n=e.getSelection().toArray(),o=Object(u.a)(n,6),r=o[0],a=o[1],c=o[2],i=o[3],l=o[4],s=o[5],d=[l?c:r,l?i:a,l?r:c,l?a:i],b=d[2],g=d[3],p=/\s([@][\w_\[\u4E00-\u9FCA\]]*)/g,f=e.getSelection(),m=e.getSelection(),j=e.getCurrentContent();return e.getCurrentContent().getBlocksAsArray().forEach((function(e){var n,o=e.toArray(),r=Object(u.a)(o,4),a=r[0],c=r[2];r[3].forEach((function(t,e){var n=t.getEntity();n&&j.getEntity(n).getType().indexOf("Mention")>=0&&(m=m.merge({anchorKey:a,anchorOffset:e,focusKey:a,focusOffset:e+1,isBackward:!1,hasFocus:!1}),j=h.Modifier.applyEntity(j,m,null))}));for(var i=function(){var e=n.index,o=n.index+n[0].length,r=o-e,i=g-e,l=2===r&&(!s||a!==b||2!==i),u=r>2&&s&&a===b&&2===i,d=r>2&&s&&a===b&&2!==i&&i>0&&i<=r,p=r>2&&(!s||a!==b||i<=0||i>r);if(2===r&&s&&a===b&&2===i){var f=(j=j.createEntity("shortMentionOn","MUTABLE",{mentionType:"shortMentionOn"})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:o,isBackward:!1,hasFocus:!1}),j=h.Modifier.applyEntity(j,m,f)}else if(l){var O=(j=j.createEntity("shortMentionOff","MUTABLE",{mentionType:"shortMentionOff"})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:o,isBackward:!1,hasFocus:!1}),j=h.Modifier.applyEntity(j,m,O)}else u?y("longMentionOnAt"):d?y("longMentionOnOther"):p&&y("longMentionOff");function y(n){var r=(j=j.createEntity("".concat(n,"_HEAD"),"MUTABLE",{mentionType:"".concat(n,"_HEAD")})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e,focusOffset:e+2,isBackward:!1,hasFocus:!1});var i=(j=(j=h.Modifier.applyEntity(j,m,r)).createEntity("".concat(n,"_BODY"),"MUTABLE",{mentionType:"".concat(n,"_BODY")})).getLastCreatedEntityKey();m=m.merge({anchorKey:a,focusKey:a,anchorOffset:e+2,focusOffset:o,isBackward:!1,hasFocus:!1}),j=(j=(j=h.Modifier.applyEntity(j,m,i)).mergeEntityData(r,{mentionHeadKey:r,mentionBodyKey:i,person:c.substring(e,o).replace(" @",""),imgurl:"".concat(t,"/").concat(c.substring(e,o).replace(" @",""),").svg")})).mergeEntityData(i,{mentionHeadKey:r,mentionBodyKey:i,person:c.substring(e,o).replace(" @",""),imgurl:"".concat(t,"/").concat(c.substring(e,o).replace(" @",""),").svg")})}};null!==(n=p.exec(c));)i()})),e=h.EditorState.push(e,j,"apply-entity"),e=h.EditorState.acceptSelection(e,f)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&n.getEntity(e).getType().indexOf("Mention")>=0}),e)},component:function(e){var n=e.contentState,o=e.entityKey,r=(e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText,e.children),l=n.getEntity(o).getData(),s=l.mentionHeadKey,u=l.mentionBodyKey,d=l.person,b=(l.imgurl,l.mentionType),g=(Object(z.a)(),St()),p=g.mentionHeadRoot,f=g.mentionBodyRoot,m=g.mentionBodyRoot2,j=g.mentionHeadAvatar,h=g.mentionHeadLabel,O=(g.mentionHeadLabel2,g.mentionBodyLabel);return"shortMentionOn"===b?Object(E.jsxs)("span",{style:{position:"relative"},children:[Object(E.jsx)(ht.a,{style:{display:"inline-block"},classes:{root:p,avatar:j,label:h},avatar:Object(E.jsx)(lt.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(Ot.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}),!k.isMobile&&Object(E.jsx)(i,{tabIndex:c,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"shortMentionOff"===b?Object(E.jsx)("span",{style:{position:"relative",borderTopLeftRadius:"999px",borderBottomLeftRadius:"999px"},children:r}):"longMentionOnAt_HEAD"===b?Object(E.jsxs)("span",{style:{position:"relative"},children:[Object(E.jsx)(ht.a,{classes:{root:p,avatar:j,label:h},avatar:Object(E.jsx)(lt.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(Ot.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}),!k.isMobile&&Object(E.jsx)(i,{tabIndex:c,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"longMentionOnAt_BODY"===b?Object(E.jsx)(ht.a,{classes:{root:f,label:O},size:"medium",label:Object(E.jsx)(Ot.a,{variant:"body2",children:r})}):"longMentionOnOther_HEAD"===b?Object(E.jsx)(ht.a,{classes:{root:p,avatar:j,label:h},avatar:Object(E.jsx)(lt.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(Ot.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}):"longMentionOnOther_BODY"===b?Object(E.jsx)(ht.a,{classes:{root:f,label:O},label:Object(E.jsx)(Ot.a,{variant:"body2",children:r})}):"longMentionOff_HEAD"===b?Object(E.jsx)(E.Fragment,{}):"longMentionOff_BODY"===b?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(ht.a,{classes:{root:m,label:O},avatar:Object(E.jsx)(lt.a,{alt:"Natacha",src:a[d]||"".concat(t,"/").concat(d,".svg")}),label:Object(E.jsx)(Ot.a,{variant:"body2",children:r})})}):void 0}}]},MentionButton:function(t){var e=t.isMentionPanelOn,n=t.setIsMentionPanelOn,o=Object(s.a)(t,xt),r=Object(z.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:e?r.palette.primary.main:"",color:"light"===r.palette.type?e?r.palette.primary.contrastText:r.palette.primary.main:e?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){n((function(t){return!t}))},children:Object(E.jsx)(yt.a,{})}))})},MentionPanel:function(t){var e=t.isMentionPanelOn;return t.setIsMentionPanelOn,Object(s.a)(t,vt),Object(E.jsx)(ct.a,{style:{position:"relative"},children:e&&Object(E.jsx)(i,{inMentionPanel:!0})})}}}var Et=n(460),wt=n(483);function At(){var t=null;return{linkPlugin:{onChange:function(e,n){var o=n.setEditorState;return t=e,o,t=function(){var e=t.getSelection().toArray(),n=Object(u.a)(e,6),o=n[0],r=n[1],a=n[2],c=n[3],i=n[4],l=n[5],s=[i?a:o,i?c:r,i?o:a,i?r:c],d=s[2],b=s[3],g=t.getSelection(),p=t.getCurrentContent(),f=t.getSelection();return t.getCurrentContent().getBlocksAsArray().forEach((function(e){var n,o=e.getKey(),r=(e.getType(),e.getText()),a=/\s([a-zA-Z]{1,10}:\/\/)(([a-zA-Z0-9-_]+\.?)+(:\d{0,6})?)(\/[^\s\r\n\/]+){0,7}(\/)?/g;for(e.getCharacterList().forEach((function(e,n){if(e.getEntity()){var r=p.getEntity(e.getEntity()).getType();"linkOn"!==r&&"linkOff"!==r||(f=t.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}),p=h.Modifier.applyEntity(p,f,null))}e.getStyle()&&e.getStyle().toArray().includes("linkStyle")&&(f=t.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}))}));null!==(n=a.exec(r));){var c=n.index,i=n.index+n[0].length,s=i-c,u=b-c,g=r.substring(c,i),m=" "+n[2],j=!l||o!==d||u<=0||u-s>0;if(l&&o===d&&u>0&&u<=s){var O=(p=p.createEntity("linkOn","MUTABLE",{linkType:"linkOn",linkAddress:g,linkHost:m})).getLastCreatedEntityKey();f=t.getSelection().merge({anchorKey:o,anchorOffset:c+1,focusKey:o,focusOffset:i,isBackward:!1,hasFocus:!1}),p=h.Modifier.applyEntity(p,f,O)}else if(j){var y=(p=p.createEntity("linkOff","MUTABLE",{linkType:"linkOff",linkAddress:g,linkHost:m})).getLastCreatedEntityKey();f=t.getSelection().merge({anchorKey:o,anchorOffset:c+1,focusKey:o,focusOffset:i,isBackward:!1,hasFocus:!1}),p=h.Modifier.applyEntity(p,f,y)}}})),t=h.EditorState.push(t,p,"insert-fragment"),t=h.EditorState.acceptSelection(t,g)}()},decorators:[{strategy:function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&("linkOn"===n.getEntity(e).getType()||"linkOff"===n.getEntity(e).getType())}),e)},component:function(t){Object(z.a)();var e=t.contentState,n=t.entityKey,o=(t.blockKey,t.offsetKey,t.start,t.end,t.decoratedText,e.getEntity(n).getData()),r=o.linkType;return o.linkAddress,o.linkHost,"linkOn"===r||"linkOff"===r?Object(E.jsx)(Et.a,{children:t.children}):void 0}}]}}}var It=n(461),Pt=n(462),Tt=n(463),Mt=n(464),Rt=["editor"],Lt=["editor"],Ft=["editor"],Kt=["editor","isCenterOn","setIsCenterOn"],Dt=["editor","isRightOn","setIsRightOn"],zt=["editor"];function Nt(){var t=null,e=null;function n(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.getCurrentContent(),a=t.getSelection(),c=(r.getSelectionBefore(),r.getSelectionAfter(),a.getEndKey()),i=r.getBlocksAsArray(),s=r.getBlockForKey(c),u=(s.getType(),Ut());return i=o?[new h.ContentBlock({key:u,type:"unstyled",text:""})].concat(Object(l.a)(i)):[].concat(Object(l.a)(i),[new h.ContentBlock({key:u,type:"unstyled",text:""})]),r=h.ContentState.createFromBlockArray(i),a=a.merge({anchorKey:u,focusKey:u,anchorOffset:0,focusOffset:0,isBackward:!1,hasFocus:!0}),t=h.EditorState.createWithContent(r),t=h.EditorState.acceptSelection(t,a),e(t),setTimeout((function(){n.current.focus()}),0),t}function o(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centerBlock",r=t.getCurrentContent(),a=t.getSelection(),c=a.getEndKey(),i=(r.getBlocksAsArray(),r.getBlockForKey(c)),l=i.getType();"unstyled"!==l&&"centerBlock"!==l&&"rightBlock"!==l||(r=h.Modifier.setBlockType(r,a,"unstyled"===l?o:l===o?"unstyled":o),t=h.EditorState.push(t,r,"change-block-type"),t=h.EditorState.acceptSelection(t,a),e(t),setTimeout((function(){n.current.focus()}),0))}return{DeleteBlogButton:function(n){var o=n.editor,r=Object(s.a)(n,Rt),a=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},r),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){!function(n){var o=t.getCurrentContent(),r=t.getSelection().getEndKey(),a=o.getBlocksAsArray(),c=o.getBlockForKey(r).getType();if("unstyled"===c||"centerBlock"===c||"rightBlock"===c||"colorBlock"===c)a.length<=1?(t=h.EditorState.createEmpty(),setTimeout((function(){e(t),n.current.focus()}),0)):(a=a.filter((function(t){return t.key!==r})),o=h.ContentState.createFromBlockArray(a),t=h.EditorState.createWithContent(o),e(t))}(o)},children:Object(E.jsx)(It.a,{})}))},AddTopLineButton:function(t){var e=t.editor,o=Object(s.a)(t,Lt),r=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){n(e)},children:Object(E.jsx)(Pt.a,{style:{transform:"rotate(180deg)"}})}))},AddBottomLineButton:function(t){var e=t.editor,o=Object(s.a)(t,Ft),r=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){n(e,!1)},children:Object(E.jsx)(Pt.a,{})}))},AlignCenterButton:function(t){var e=t.editor,n=t.isCenterOn,r=(t.setIsCenterOn,Object(s.a)(t,Kt)),a=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},r),{},{style:{backgroundColor:n?a.palette.primary.main:"",color:"light"===a.palette.type?n?a.palette.primary.contrastText:a.palette.primary.main:n?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){o(e,"centerBlock")},children:Object(E.jsx)(G.a,{})}))},AlignRightButton:function(t){var e=t.editor,n=t.isRightOn,r=(t.setIsRightOn,Object(s.a)(t,Dt)),a=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},r),{},{style:{backgroundColor:n?a.palette.primary.main:"",color:"light"===a.palette.type?n?a.palette.primary.contrastText:a.palette.primary.main:n?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){o(e,"rightBlock")},children:Object(E.jsx)(Tt.a,{})}))},AddBackColorButton:function(n){var o=n.editor,r=Object(s.a)(n,zt),a=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},r),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){!function(n){var o=t.getCurrentContent(),r=t.getSelection(),a=r.getEndKey();o.getBlocksAsArray(),o.getBlockForKey(a).getType(),o=h.Modifier.setBlockType(o,r,"colorBlock"),t=h.EditorState.push(t,o,"change-block-type"),t=h.EditorState.acceptSelection(t,r),e(t),setTimeout((function(){n.current.focus()}),0)}(o)},children:Object(E.jsx)(Mt.a,{})}))},BackColorPanel:function(t){return Object.assign({},t),Object(E.jsx)(E.Fragment,{children:"ddd"})},deleteBlogPlugin:{onChange:function(n,o){var r=o.setEditorState;return e=r,t=n}}}}function Ut(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*o));return e}var _t=["editor","isBackColorPanelOn","setIsBackColorPanelOn"],Yt=["editor","isBackColorPanelOn","backImageArr","setBackImageArr","backImageIndex","setBackImageIndex"];function Ht(){var t=null,e=null;return{AddBackColorButton:function(t){t.editor;var e=t.isBackColorPanelOn,n=t.setIsBackColorPanelOn,o=Object(s.a)(t,_t),r=Object(z.a)();return Object(E.jsx)(F.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:e?r.palette.primary.main:"",color:"light"===r.palette.type?e?r.palette.primary.contrastText:r.palette.primary.main:e?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){n((function(t){return!t}))},children:Object(E.jsx)(Mt.a,{})}))},BackColorPanel:function(n){var o=n.editor,r=n.isBackColorPanelOn,a=(n.backImageArr,n.setBackImageArr,n.backImageIndex,n.setBackImageIndex,Object(s.a)(n,Yt),Object(z.a)());return Object(E.jsx)(wt.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:r?"10px":0,maxHeight:r?"35vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:r?1:0,marginBottom:a.spacing(2),display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:a.backgourndImageArr.map((function(n,r){return Object(E.jsx)(F.a,{style:{backgroundImage:n.backgroundImage,backgroundSize:"contain",width:"80px",height:"45px"},onClick:function(){!function(n,o,r){var a=t.getCurrentContent(),c=t.getSelection(),i=c.getEndKey();a.getBlocksAsArray(),a.getBlockForKey(i).getType(),a=h.Modifier.setBlockType(a,c,"colorBlock"),a=h.Modifier.setBlockData(a,c,{img:o,textColor:r}),t=h.EditorState.push(t,a,"change-block-type"),t=h.EditorState.acceptSelection(t,c),e(t),setTimeout((function(){n.current.focus()}),0)}(o,n.backgroundImage,n.color||"white")}},r)}))})},backColorPlugin:{blockStyleFn:function(t){},onChange:function(n,o){var r=o.setEditorState;return e=r,t=n}}}}var Xt=n(72),Wt=n(44),Gt=n.n(Wt),qt=n(465),Jt=n(466),Vt=n(467),Zt=n(468),Qt=["editorPaperCss","className1","unstyledBlockCss","imageBlockCss","centerBlockCss","rightBlockCss","colorBlockCss"],$t=nt(),te=$t.boldPlugin,ee=$t.BoldButton,ne=$t.ItalicButton,oe=$t.UnderlineButton,re=$t.LargeButton,ae=$t.SmallButton,ce=gt(),ie=ce.emojiPlugin,le=ce.EmojiButton,se=ce.EmojiPanel,ue=Y(),de=ue.imagePlugin,be=ue.ImageButton,ge=(ue.TopImageButton,ue.ImageBlog),pe=(ue.hasImageBlock,Bt()),fe=pe.mentionPlugin,me=pe.MentionButton,je=pe.MentionPanel,he=At().linkPlugin,Oe=Nt(),ye=Oe.deleteBlogPlugin,ke=Oe.DeleteBlogButton,xe=Oe.AddTopLineButton,ve=Oe.AddBottomLineButton,Ce=Oe.AlignCenterButton,Se=Oe.AlignRightButton,Be=Ht(),Ee=Be.backColorPlugin,we=Be.AddBackColorButton,Ae=Be.BackColorPanel,Ie=Object(jt.a)((function(t){var e={};return t.backgourndImageArr.forEach((function(t,n){e["css"+n]=t})),console.log(e),Object(d.a)(Object(d.a)({},e),{},{labelShrinkCss:function(){return{transform:"translate(0, 1.5px) scale(0.5)"}},textFieldCss:function(){return{fontSize:"1.5rem"}},editorPaperCss:function(e){e.isLight,e.breakpointsAttribute;return{borderWidth:"1px",borderStyle:"none",borderColor:e.isEditorFocusOn?t.palette.primary.main:t.palette.text.secondary,wordBreak:"break-all",whiteSpace:"pre-wrap",lineBreak:"anywhere"}},unstyledBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)}},imageBlockCss:function(){return{margin:0,padding:0,width:"100%",height:0,paddingBottom:"56.25%"}},centerBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1),textAlign:"center"}},rightBlockCss:function(){return{paddingLeft:t.spacing(1),paddingRight:t.spacing(1),textAlign:"end"}},colorBlockCss:function(){return{position:"relative",display:"flex",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",alignItems:"center",justifyContent:"center",overflow:"auto",backgroundSize:"contain","& > div":{textAlign:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}}},className1:function(t){return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)","&:hover":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}})})),Pe={entityMap:{},blocks:[]};function Te(){var t=Object(o.useContext)(w),e=t.token,n=t.isLight,r=t.setIsLight,a=t.breakpointsAttribute,c=t.editorContent,i=t.setEditorContent,b=t.lgSizeObj,g=t.smSizeObj,p=t.deviceSize,f=t.picArr,m=t.setPicArr,j=(t.postArr,t.setPostArr),O=(t.postPicArr,t.setPostPicArr),y=Object(z.a)(),x=Object(o.useState)(!1),C=Object(u.a)(x,2),B=C[0],A=C[1],I=Object(o.useState)(!1),P=Object(u.a)(I,2),T=P[0],L=P[1],K=Object(o.useState)(!1),D=Object(u.a)(K,2),N=D[0],U=D[1],_=Object(o.useState)(!1),Y=Object(u.a)(_,2),H=Y[0],X=Y[1],W=Object(o.useState)(!1),G=Object(u.a)(W,2),q=G[0],J=G[1],V=Object(o.useState)(!1),Z=Object(u.a)(V,2),Q=Z[0],$=Z[1],tt=Object(o.useState)(!1),et=Object(u.a)(tt,2),nt=et[0],ot=et[1],rt=Object(o.useState)(!1),at=Object(u.a)(rt,2),it=at[0],lt=at[1],st=Object(o.useState)(!1),ut=Object(u.a)(st,2),dt=ut[0],bt=ut[1],gt=Object(o.useState)(!1),pt=Object(u.a)(gt,2),ft=pt[0],mt=pt[1],jt=Object(o.useState)(!1),ht=Object(u.a)(jt,2),Ot=ht[0],yt=ht[1],kt=Object(o.useRef)(),xt=Ie({isLight:n,isEditorFocusOn:Ot,breakpointsAttribute:a}),vt=xt.editorPaperCss,Ct=(xt.className1,xt.unstyledBlockCss),St=xt.imageBlockCss,Bt=xt.centerBlockCss,Et=xt.rightBlockCss,At=xt.colorBlockCss,It=Object(s.a)(xt,Qt),Pt=Object(o.useState)(h.EditorState.createWithContent(Object(h.convertFromRaw)(Pe))),Tt=Object(u.a)(Pt,2),Mt=Tt[0],Rt=Tt[1],Lt=Object(o.useState)(!0),Ft=Object(u.a)(Lt,2),Kt=Ft[0],Dt=Ft[1];function zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local",n=Object(Xt.a)(t.getCurrentContent(),{defaultBlockTag:"div",inlineStyles:{LARGE:{style:{fontSize:b[p]}},SMALL:{style:{fontSize:g[p]}}},blockStyleFn:function(t){var e=t.getType();return"unstyled"===e?{attributes:{},style:{paddingLeft:"4px",paddingRight:"4px"}}:"centerBlock"===e?{attributes:{},style:{paddingLeft:y.spacing(1),paddingRight:y.spacing(1),textAlign:"center"}}:"rightBlock"===e?{attributes:{},style:{paddingLeft:y.spacing(1),paddingRight:y.spacing(1),textAlign:"end"}}:"colorBlock"===e?{attributes:{colorblock:"true",backimage:t.getData().toJS().img,textcolor:t.getData().toJS().textColor}}:void 0},blockRenderers:{imageBlock:function(t){t.getText(),t.getData().toObject(),t.getType();return'<imgtag id="'.concat(e,'">')+escape(t.getText())+"</imgtag>"}},entityStyleFn:function(t){var e=t.toObject(),n=e.type,o=e.data;e.mutablity;if("shortMentionOff"===n)return{element:"shortMentionoff"};if("longMentionOff_HEAD"===n)return{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}};if("longMentionOff_BODY"===n)return{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}};if("EMOJI"===n)return console.log(o.url),{element:"emoji",attributes:{imgurl:o.url,symbol:o.symbol}};if("linkOff"===n){o.linkType,o.linkAddress,o.linkHost;return{element:"linkoff",attributes:Object(d.a)({},o)}}}});return n}return Object(o.useEffect)((function(){setTimeout((function(){kt.current.focus(),h.EditorState.moveFocusToEnd(Mt)}),0)}),[]),Object(E.jsxs)(qt.a,{disableGutters:!1,children:[Object(E.jsxs)(wt.a,{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:(k.isMobile,"wrap"),gap:y.spacing(1)},children:[Object(E.jsx)(ct.a,{style:Object(d.a)(Object(d.a)({},k.isMobile&&!k.isFirefox&&{marginRight:y.spacing(1)}),{},{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"}),children:Object(E.jsxs)(Jt.a,{variant:"text",style:{},children:[Object(E.jsx)(ee,{editor:kt,isBoldOn:B,setIsBoldOn:A}),Object(E.jsx)(ne,{editor:kt,isItalicOn:T,setIsItalicOn:L}),Object(E.jsx)(oe,{editor:kt,isUnderlineOn:N,setIsUnderlineOn:U}),Object(E.jsx)(re,{editor:kt,isLargeOn:H,setIsLargeOn:X}),Object(E.jsx)(ae,{editor:kt,isSmallOn:q,setIsSmallOn:J})]})}),Object(E.jsx)(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"},children:Object(E.jsxs)(Jt.a,{variant:"text",style:{},children:[!k.isMobile&&Object(E.jsx)(le,{color:"primary",fontSize:"small",isEmojiPanelOn:Q,setIsEmojiPanelOn:$}),Object(E.jsx)(me,{color:"primary",fontSize:"small",isMentionPanelOn:nt,setIsMentionPanelOn:ot}),Object(E.jsx)(be,{color:"primary",fontSize:"small",picArr:f,setPicArr:m,editor:kt}),Object(E.jsx)(we,{editor:kt,color:"primary",fontSize:"small",isBackColorPanelOn:it,setIsBackColorPanelOn:lt}),Object(E.jsx)(F.a,{onClick:function(){r((function(t){return!t})),kt.current.focus()},style:{color:"dark"===y.palette.type?y.palette.text.secondary:y.palette.primary.main},children:n?Object(E.jsx)(Vt.a,{}):Object(E.jsx)(Zt.a,{})})]})}),Object(E.jsx)(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"},children:Object(E.jsxs)(Jt.a,{variant:"text",style:{},children:[Object(E.jsx)(xe,{editor:kt}),Object(E.jsx)(ke,{editor:kt}),Object(E.jsx)(ve,{editor:kt}),Object(E.jsx)(Ce,{editor:kt,isCenterOn:dt,setIsCenterOn:bt}),Object(E.jsx)(Se,{editor:kt,isRightOn:ft,setIsRightOn:mt})]})})]}),Object(E.jsx)(ct.a,{elevation:Ot?5:1,classes:{root:vt},style:{},onClick:function(){var t=h.EditorState.moveSelectionToEnd(Mt);Rt(h.EditorState.forceSelection(t,Mt.getSelection())),yt(!0)},children:Object(E.jsx)(M.a,{ref:function(t){kt.current=t},editorState:Mt,onChange:function(t,e){Object.assign({},e);var n=t.getCurrentInlineStyle().toObject(),o=n.BOLD,r=n.ITALIC,a=n.UNDERLINE,c=n.LARGE,l=n.SMALL,s=t.getSelection(),u=t.getCurrentContent(),d=s.getFocusKey(),b=u.getBlockForKey(d).getType();bt("centerBlock"===b),mt("rightBlock"===b),yt(s.hasFocus),A(Boolean(o)),L(Boolean(r)),U(Boolean(a)),X(Boolean(c)),J(Boolean(l)),i(t),Rt(t)},plugins:[te,de,ie,fe,he,ye,Ee],preserveSelectionOnBlur:!0,customStyleMap:R.b.Map({}),customStyleFn:function(t,e){var n=t.toObject();if(n.LARGE&&n.SMALL);else{if(Boolean(n.LARGE))return{fontSize:b[p]};if(Boolean(n.SMALL))return{fontSize:g[p]};if(Boolean(n.CENTER))return{display:"flex",justifyContent:"center"}}},blockRenderMap:R.b.Map({}),blockStyleFn:function(t){var e=t.getType(),n=t.getText();if("unstyled"===e)return Ct;if("atomic"===e&&"imageBlockText"===n)return St;if("centerBlock"===e)return Bt;if("rightBlock"===e)return Et;if("colorBlock"===e){console.log(It);var o=t.getData().toJS().img,r=y.backgourndImageArr.findIndex((function(t){return t.backgroundImage===o}));return At+" "+It["css"+r]}},blockRendererFn:function(t){var e=t.getText(),n=(t.getData().toObject(),t.getType());return"atomic"===n&&"imageBlockText"===e||"imageBlock"===n?{component:function(t){return Object(E.jsx)(ge,Object(d.a)(Object(d.a)({},t),{},{picArr:f,setPicArr:m,editor:kt}))},editable:!1}:null},handleKeyCommand:function(t,e,n,o){o.getEditorState;"bold"===t?(A((function(t){return!t})),Rt(h.RichUtils.handleKeyCommand(e,t))):"italic"===t?(L((function(t){return!t})),Rt(h.RichUtils.handleKeyCommand(e,t))):"underline"===t&&(U((function(t){return!t})),Rt(h.RichUtils.handleKeyCommand(e,t)))},stripPastedStyles:!0,handlePastedText:function(t,e,n,o){return!0}})}),Object(E.jsx)(F.a,{variant:"contained",color:"primary",disabled:!Kt,style:{display:"block",width:"100%",marginTop:y.spacing(1)},onClick:function(t){kt.current.focus(),Dt(!1);var n=String(Math.floor(1e6*Math.random()))+"_"+f.length;if(v.a.post("".concat(S,"/article"),{ownerName:e.userName,content:zt(c,n),postID:n}).then((function(t){console.log(t.data),0===f.length&&(Dt(!0),Rt(h.EditorState.createWithContent(Object(h.convertFromRaw)(Pe))))})),f.length>0){var o=new FormData,r={ownerName:"aaa",picName:[]};f.forEach((function(t,e){var a=n+"_"+e;o.append("file",t),r.picName.push(a),t.picID=a,console.log(a)})),o.append("obj",JSON.stringify(r)),v.a.post("".concat(S,"/picture/uploadpicture"),o,{headers:{"content-type":"multipart/form-data"}}).then((function(t){Dt(!0),m([]),Rt(h.EditorState.createWithContent(Object(h.convertFromRaw)(Pe)))}))}j((function(t){return[{ownerName:e.userName,postID:n,postingTime:Date.now(),content:zt(c,"local")}].concat(Object(l.a)(t))})),O((function(t){return[f].concat(Object(l.a)(t))}))},children:"Post"}),Object(E.jsx)(Ae,{editor:kt,isBackColorPanelOn:it}),!k.isMobile&&Object(E.jsx)(se,{isEmojiPanelOn:Q}),Object(E.jsx)(je,{isMentionPanelOn:nt})]})}var Me=n(197),Re=n(117),Le=n.n(Re),Fe=n(478),Ke=n(481),De=n(485),ze=n(477),Ne=n(476),Ue=n(475),_e=n(479),Ye=n(473),He=n(474),Xe=n(482),We=n(77),Ge=(n(406),n(118)),qe=n(98),Je=n(99),Ve=n(61),Ze=n(103),Qe=n(102),$e=n(470),tn=n(469),en=n(471),nn=n(472),on=["editorPaperCss","className1","unstyledBlockCss","imageBlockCss","centerBlockCss","rightBlockCss","colorBlockCss"],rn=nt(),an=(rn.boldPlugin,rn.BoldButton,rn.ItalicButton,rn.UnderlineButton,rn.LargeButton,rn.SmallButton,gt()),cn=an.emojiPlugin,ln=(an.EmojiButton,an.EmojiPanel),sn=an.EmojiIconButton,un=Y(),dn=(un.imagePlugin,un.ImageButton,un.TopImageButton,un.ImageBlog,un.hasImageBlock,Bt()),bn=dn.mentionPlugin,gn=(dn.MentionButton,dn.MentionPanel,At().linkPlugin),pn=Nt(),fn=(pn.deleteBlogPlugin,pn.DeleteBlogButton,pn.AddTopLineButton,pn.AddBottomLineButton,pn.AlignCenterButton,pn.AlignRightButton,Ht()),mn=(fn.backColorPlugin,fn.AddBackColorButton,fn.BackColorPanel,Object(jt.a)((function(t){var e={};return t.backgourndImageArr.forEach((function(t,n){e["css"+n]=t})),console.log(e),Object(d.a)(Object(d.a)({},e),{},{labelShrinkCss:function(){return{transform:"translate(0, 1.5px) scale(0.5)"}},textFieldCss:function(){return{fontSize:"1.5rem"}},editorPaperCss:function(e){e.isLight,e.breakpointsAttribute;return{borderWidth:"1px",borderStyle:"none",borderColor:e.isEditorFocusOn?t.palette.primary.main:t.palette.text.secondary,wordBreak:"break-all",whiteSpace:"pre-wrap",lineBreak:"anywhere"}},unstyledBlockCss:function(){return{paddingLeft:"4px",paddingRight:"4px"}},className1:function(t){return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)","&:hover":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}})}))),jn={entityMap:{},blocks:[]};function hn(t){var e=Object(Xt.a)(t.getCurrentContent(),{defaultBlockTag:"div",inlineStyles:{},blockStyleFn:function(t){if("unstyled"===t.getType())return{attributes:{},style:{fontSize:"1.2rem"}}},blockRenderers:{},entityStyleFn:function(t){var e=t.toObject(),n=e.type,o=e.data;e.mutablity;if("shortMentionOff"===n)return{element:"shortMentionoff"};if("longMentionOff_HEAD"===n)return{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}};if("longMentionOff_BODY"===n)return{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}};if("EMOJI"===n)return console.log(o.url),{element:"emoji",attributes:{imgurl:o.url,symbol:o.symbol}};if("linkOff"===n){o.linkType,o.linkAddress,o.linkHost;return{element:"linkoff",attributes:Object(d.a)({},o)}}}});return e}function On(t){var e=t.postID,n=t.index,r=t.toHtml,a=t.setCommentCount,c=t.commentCount,i=Object(o.useContext)(w),b=i.token,g=i.isLight,p=(i.setIsLight,i.breakpointsAttribute),f=i.editorContent,m=i.setEditorContent,j=(i.lgSizeObj,i.smSizeObj,i.deviceSize,Object(z.a)()),O=Object(o.useState)(!1),y=Object(u.a)(O,2),x=y[0],C=y[1],B=Object(o.useState)(!1),A=Object(u.a)(B,2),I=(A[0],A[1],Object(o.useState)(!1)),P=Object(u.a)(I,2),T=P[0],L=P[1],K=Object(o.useRef)(),D=mn({isLight:g,isEditorFocusOn:T,breakpointsAttribute:p}),N=(D.editorPaperCss,D.className1,D.unstyledBlockCss),U=(D.imageBlockCss,D.centerBlockCss,D.rightBlockCss,D.colorBlockCss,Object(s.a)(D,on),Object(o.useState)(h.EditorState.createWithContent(Object(h.convertFromRaw)(jn)))),_=Object(u.a)(U,2),Y=_[0],H=_[1],X=Object(o.useState)(!0),W=Object(u.a)(X,2),G=(W[0],W[1],Object(o.useState)([])),q=Object(u.a)(G,2),J=q[0],V=q[1],Z=Object(o.useRef)([]),Q=Object(o.useState)(999),$=Object(u.a)(Q,2),tt=$[0],et=$[1];function nt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return Object(E.jsxs)(wt.a,{style:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:(k.isMobile,"wrap"),gap:j.spacing(0)},t&&{marginLeft:"1.6rem"}),children:[Object(E.jsx)(ht.a,{avatar:Object(E.jsx)(lt.a,{alt:null,src:"https://api.multiavatar.com/"+b.userName+".svg"}),label:Object(E.jsx)(Ot.a,{style:{marginTop:"3px",lineHeight:"1.0",fontWeight:"bold",fontSize:"0.9rem"},children:b.userName})},n),!k.isMobile&&Object(E.jsx)(sn,{color:"primary",fontSize:"small",isEmojiPanelOn:x,setIsEmojiPanelOn:C}),Object(E.jsx)(ct.a,{style:{borderRadius:"1000px",transform:"scale(0.8)",padding:"0px"},elevation:3,children:Object(E.jsx)(it.a,{size:"small",style:{},onClick:function(){var t=hn(f);if(o){var n=String(Math.floor(1e6*Math.random()));v.a.post("".concat(S,"/subcomment"),{ownerName:b.userName,content:t,postID:e,postingTime:Date.now(),commentID:o,subCommentID:n}).then((function(t){console.log(Z.current);var e=Z.current.find((function(t){return t.commentID===o}));V((function(t){return t.forEach((function(t){t.commentID===o&&(t.subCommentCount?t.subCommentCount++:t.subCommentCount=1)})),t})),e.updateSubCommentArr(t.data),H(h.EditorState.createWithContent(Object(h.convertFromRaw)(jn)))}))}else{var r=String(Math.floor(1e6*Math.random()));v.a.post("".concat(S,"/comment"),{ownerName:b.userName,content:t,postID:e,postingTime:Date.now(),commentID:r}).then((function(n){V((function(n){return[{ownerName:b.userName,content:t,postID:e,postingTime:Date.now(),commentID:r}].concat(Object(l.a)(n))})),H(h.EditorState.createWithContent(Object(h.convertFromRaw)(jn))),a((function(t){return Number(t)+1}))}))}},children:Object(E.jsx)(tn.a,{style:{transform:"scale(0.9)",color:"light"===j.palette.type?j.palette.primary.main:j.palette.text.secondary}})})})]})}function ot(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return Object(E.jsxs)(E.Fragment,{children:[nt(t,e),Object(E.jsx)(ct.a,{elevation:T?3:2,style:{marginLeft:t?"3.6rem":"2rem",marginRight:"4px",fontSize:"1.2rem",borderWidth:"2px",borderColor:"rgb(63, 81, 181)",borderStyle:"solid"},onClick:function(){var t=h.EditorState.moveSelectionToEnd(Y);H(h.EditorState.forceSelection(t,Y.getSelection())),L(!0)},children:Object(E.jsx)(M.a,{ref:function(t){K.current=t},editorState:Y,onChange:function(t,e){Object.assign({},e);var n=t.getSelection();L(n.hasFocus),m(t),H(t)},plugins:[cn,bn,gn],preserveSelectionOnBlur:!0,customStyleMap:R.b.Map({}),customStyleFn:function(t,e){t.toObject()},blockRenderMap:R.b.Map({}),blockStyleFn:function(t){var e=t.getType();t.getText();if("unstyled"===e)return N},blockRendererFn:function(t){t.getText(),t.getData().toObject(),t.getType();return null},handleKeyCommand:function(t,e,n,o){o.getEditorState}})}),!k.isMobile&&Object(E.jsx)(ln,{isEmojiPanelOn:x,marginBottom:"0"}),!t&&J.length>0&&Object(E.jsx)($e.a,{style:{marginTop:j.spacing(1)}})]})}return Object(o.useEffect)((function(){setTimeout((function(){K.current.focus(),h.EditorState.moveFocusToEnd(Y)}),0),v.a.get("".concat(S,"/comment/loadfive/").concat(e,"/").concat(Date.now())).then((function(t){V(t.data)}))}),[]),Object(E.jsxs)(qt.a,{disableGutters:!0,maxWidth:"lg",style:{backgroundColor:j.palette.action.disabledBackground,paddingBottom:j.spacing(0),display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[999===tt&&ot(!1,null),J.map((function(t,e){return Object(E.jsxs)("span",{children:[Object(E.jsx)(ht.a,{style:{verticalAlign:"top"},onClick:function(){var n=Z.current.find((function(e){return t.commentID===e.commentID}));tt===e?n.clearSubComments():n.loadSubComments(),et((function(t){return t===e?999:e})),setTimeout((function(){K.current.focus(),h.EditorState.moveFocusToEnd(Y)}),0)},deleteIcon:Object(E.jsxs)(E.Fragment,{children:[tt===e?Object(E.jsx)(en.a,{style:{fontSize:"1.2rem",color:j.palette.text.secondary}}):Object(E.jsx)(nn.a,{style:{fontSize:"1.2rem",color:j.palette.text.secondary}}),Object(E.jsx)("span",{style:{fontWeight:"bold",fontSize:"1rem",color:j.palette.text.secondary,verticalAlign:"middle"},children:t.subCommentCount})]}),onDelete:function(){var n=Z.current.find((function(e){return t.commentID===e.commentID}));tt===e?n.clearSubComments():n.loadSubComments(),et((function(t){return t===e?999:e})),setTimeout((function(){K.current.focus(),h.EditorState.moveFocusToEnd(Y)}),0)},avatar:Object(E.jsx)(lt.a,{alt:null,src:"https://api.multiavatar.com/"+t.ownerName+".svg"}),label:Object(E.jsxs)(Ot.a,{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[t.ownerName,"\xa0",Object(E.jsx)("span",{style:{color:j.palette.text.secondary,fontSize:"0.7rem",fontWeight:"normal"},children:Object(Xe.a)(Number(t.postingTime)).replace("less than ","").replace("about ","")})]})},n),b.userName==t.ownerName&&Object(E.jsx)(it.a,{size:"small",style:{float:"right"},onClick:function(){V((function(e){return e.filter((function(e){return e.commentID!==t.commentID}))})),v.a.get("".concat(S,"/comment/deletecomment/").concat(t.commentID)).then((function(t){a((function(t){return Number(t)-1}))}))},children:Object(E.jsx)(Ye.a,{style:{fontSize:"1.5rem"}})}),Object(E.jsx)(ct.a,{style:{marginLeft:"2rem",paddingLeft:"4px",paddingRight:"4px",marginRight:"4px",fontSize:"1.2rem",backgroundColor:j.palette.background.default},children:r(t.content,null,null,!0)}),tt===e&&ot(!0,t.commentID),Object(E.jsx)(yn,{setReplyNum:et,replyNum:tt,listIndex:e,commentArr:J,toHtml:r,comment:t,theme:j,index:n,editor:K,commentObjList:Z,setCommentArr:V,token:b}),e!==J.length-1&&Object(E.jsx)($e.a,{light:!1,style:{marginTop:"8px"}})]},t.commentID)})),J.length<c?Object(E.jsxs)(F.a,{onClick:function(){var t=Math.min.apply(Math,Object(l.a)(J.map((function(t){return t.postingTime})))),e=J.find((function(e){return e.postingTime===t})).postID;v.a.get("".concat(S,"/comment/loadfive/").concat(e,"/").concat(t)).then((function(t){V((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.data))}))}))},style:{marginTop:"8px",borderTopLeftRadius:0,borderTopRightRadius:0,padding:0,boxShadow:j.shadows[0],color:"dark"===j.palette.type?j.palette.text.secondary:j.palette.primary.main},size:"small",disableElevation:!0,fullWidth:!0,children:[Object(E.jsx)(He.a,{}),"\xa0",J.length,"/",c]}):Object(E.jsx)("div",{style:{marginTop:"16px"}})]})}var yn=function(t){Object(Ze.a)(n,t);var e=Object(Qe.a)(n);function n(t,o){var r;return Object(qe.a)(this,n),(r=e.call(this,t,o)).updateSubCommentArr=function(t){r.setState((function(e){var n=e.subCommentArr;return{subCommentArr:[t].concat(Object(l.a)(n))}}))},r.loadSubComments=function(){v.a.get("".concat(S,"/subcomment/").concat(r.props.comment.commentID)).then((function(t){r.setState((function(e){return e.subCommentArr=t.data})),r.props.commentObjList.current.push(Object(Ve.a)(r))}))},r.clearSubComments=function(){r.setState((function(t){return t.subCommentArr=[]}))},r.commentID=r.props.comment.commentID,r.state={subCommentArr:[]},r}return Object(Je.a)(n,[{key:"componentDidMount",value:function(){this.props.commentObjList.current.push(this)}},{key:"render",value:function(){var t=this;return Object(E.jsx)(E.Fragment,{children:this.state.subCommentArr.map((function(e,n){return Object(E.jsxs)("span",{children:[Object(E.jsx)(ht.a,{style:{marginLeft:"1.6rem"},avatar:Object(E.jsx)(lt.a,{alt:null,src:"https://api.multiavatar.com/"+e.ownerName+".svg"}),label:Object(E.jsxs)(Ot.a,{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[e.ownerName,"\xa0",Object(E.jsx)("span",{style:{color:t.props.theme.palette.text.secondary,verticalAlign:"middle",fontSize:"0.7rem",fontWeight:"normal"},children:Object(Xe.a)(Number(e.postingTime)).replace("less than ","").replace("about ","")})]})}),t.props.token.userName===e.ownerName&&Object(E.jsx)(it.a,{size:"small",style:{float:"right",marginTop:"4px"},onClick:function(){v.a.get("".concat(S,"/subcomment/deletesubcomment/").concat(e.subCommentID)).then((function(n){t.setState((function(t){return{subCommentArr:t.subCommentArr.filter((function(t){return t.subCommentID!==e.subCommentID}))}})),t.props.setCommentArr((function(e){return e.forEach((function(e){e.commentID===t.commentID&&(e.subCommentCount?e.subCommentCount--:e.subCommentCount=1)})),Object(l.a)(e)}))}))},children:Object(E.jsx)(Ye.a,{style:{fontSize:"1.5rem"}})}),Object(E.jsx)(ct.a,{style:{marginLeft:"3.6rem",paddingLeft:"4px",paddingRight:"4px",marginRight:"4px",fontSize:"1.2rem",backgroundColor:t.props.theme.palette.background.default},children:t.props.toHtml(e.content,null,null,!0)})]},e.subCommentID)}))})}}]),n}(o.Component),kn=["picArr","picName"],xn=["toHtml","node","index","imgArr"],vn=["backimage","textcolor","transformFn","node","index","arr","arr2","inView"];function Cn(t){t.style;var e,n=Object(o.useContext)(w),r=n.token,a=(n.setToken,n.breakpointsAttribute),c=(n.editorContent,n.setEditorContent,n.lgSizeObj,n.smSizeObj,n.deviceSize,n.picArr,n.setPicArr,n.postArr),i=n.setPostArr,s=n.postPicArr,d=(n.setPostPicArr,n.getSinglePost),g=n.deleteSinglePost,p=n.changeOwnerName,f=Object(o.useState)(!1),m=Object(u.a)(f,2),j=m[0],h=m[1],O=Object(z.a)(),y=Ie({}),x=y.editorPaperCss,v=(y.className1,y.unstyledBlockCss,y.imageBlockCss,y.centerBlockCss,y.rightBlockCss,y.textFieldCss),C=y.labelShrinkCss,B=St(),A=(B.mentionHeadRoot,B.mentionBodyRoot,B.mentionBodyRoot2),I=B.mentionHeadAvatar,P=(B.mentionHeadLabel,B.mentionHeadLabel2,B.mentionBodyLabel),T=Object(o.useCallback)((function(t,e,n,o){return Gt()(t,{transform:function t(r,a){if("imgtag"===r.name)return n&&Object(E.jsx)(Bn,{picArr:e,picName:r.attribs.id},a);if("emoji"===r.name){var c="url(".concat(S,"/picture/downloademoji/").concat(r.attribs.imgurl.substring(r.attribs.imgurl.lastIndexOf("/")+1,r.attribs.imgurl.length),")");return Object(E.jsx)(Ot.a,{variant:o?"inherit":"body2",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",color:"rgba(0,0,0,0)",backgroundImage:c,transform:(k.isMobile,"scale(1.2)"),marginLeft:.12*O.typography.fontSize,marginRight:.12*O.typography.fontSize},children:r.attribs.symbol},a)}if("longmentionoff_head"===r.name)return Object(E.jsx)("span",{},a);if("longmentionoff_body"===r.name){var i=[];return r.children.forEach((function(t){i.push(Object(Wt.convertNodeToElement)(t))})),Object(E.jsx)(ht.a,{classes:{root:A,label:P},avatar:Object(E.jsx)(lt.a,{alt:null,src:r.attribs.imgurl.replace("url(","").replace(")","")}),label:Object(E.jsx)(Ot.a,{variant:"body2",children:i.map((function(t,e){return Object(E.jsx)("span",{children:t},e)}))})},a)}if(Object.keys(r.attribs||{}).includes("colorblock")){var l=[],s=[],u=r.attribs.backimage,d=r.attribs.textcolor;return r.children.forEach((function(t){l.push("tag"===t.type?t:t.data),s.push(Object(Wt.convertNodeToElement)(t))})),Object(E.jsx)(wn,{arr:l,transformFn:t,index:a,arr2:s,backimage:u,textcolor:d,inView:n},Math.random())}if("linkoff"===r.name){var b=[];return r.children.forEach((function(t){b.push(Object(Wt.convertNodeToElement)(t))})),Object(E.jsx)("span",{children:Object(E.jsx)(En,{toHtml:T,node:r,imgArr:e,index:a})},a)}}})}),[]),M=(e={},Object(b.a)(e,O.breakpoints.values.xs,1),Object(b.a)(e,O.breakpoints.values.sm,1),Object(b.a)(e,O.breakpoints.values.md,2),Object(b.a)(e,O.breakpoints.values.lg,3),Object(b.a)(e,O.breakpoints.values.xl,4),e),R=Object(Ge.a)({threshold:.8,triggerOnce:!1,initialInView:!0}),L=R.ref,K=R.inView;R.entry;Object(o.useEffect)((function(){K&&!j&&d().then((function(t){0===t.length&&h(!0)}))}),[j,c,K]);var D=Object(o.useState)(!1),N=Object(u.a)(D,2),U=N[0],_=N[1],Y=Object(o.useState)(""),H=Object(u.a)(Y,2),X=H[0],W=H[1];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(qt.a,{disableGutters:!1,children:[Object(E.jsxs)(De.a,{open:U,onClose:function(){_(!1)},"aria-labelledby":"form-dialog-title",children:[Object(E.jsx)(Ue.a,{id:"form-dialog-title",children:Object(E.jsx)(ht.a,{style:{backgroundColor:"transparent"},avatar:Object(E.jsx)(lt.a,{style:{transform:"scale(2)"},alt:null,src:"https://api.multiavatar.com/"+r.userName+".svg"}),label:Object(E.jsxs)(Ot.a,{variant:"h5",children:["\xa0\xa0\xa0",r.userName]})})}),Object(E.jsx)(Ne.a,{children:Object(E.jsx)(Ke.a,{InputLabelProps:{classes:{root:v,animated:v,shrink:C}},InputProps:{classes:{input:v}},value:X,onChange:function(t){W(t.target.value)},margin:"dense",id:"name",label:"\u65b0\u540d\u5b57/new name"})}),Object(E.jsxs)(ze.a,{children:[Object(E.jsx)(F.a,{onClick:function(){W(""),_(!1)},style:{fontSize:"1.5rem",color:"dark"===O.palette.type?O.palette.text.secondary:O.palette.primary.main},children:"Cancel"}),Object(E.jsx)(F.a,{onClick:function(){var t=r.userName;p(X).then((function(e){e?(i((function(e){return Object(l.a)(e.map((function(e){return e.ownerName===t?(e.ownerName=X,e):e})))})),W(""),_(!1)):alert("name is taken")}))},style:{fontSize:"1.5rem",color:"dark"===O.palette.type?O.palette.text.secondary:O.palette.primary.main},children:"OK"})]})]}),Object(E.jsx)(Me.a,{breakpointCols:M,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:c.map((function(t,e){return Object(E.jsx)(Sn,{postArr:c,postPicArr:s,index:e,editorPaperCss:x,toHtml:T,token:r,mentionBodyRoot2:A,mentionBodyLabel:P,deleteSinglePost:g,breakpointsAttribute:a,setOpen:_,mentionHeadAvatar:I},t.postID)}))}),Object(E.jsx)(ct.a,{style:{padding:O.spacing(1),margin:"auto",backgroundColor:O.palette.background.default,width:"100%",opacity:Boolean(!j)&&K?1:0,display:"flex",justifyContent:"center",alignItems:"center"},ref:L,children:Object(E.jsx)(Fe.a,{size:"1.5rem"})})]})})}function Sn(t){var e=t.postArr,n=t.postPicArr,r=t.index,a=t.editorPaperCss,c=t.toHtml,i=t.token,l=(t.mentionBodyRoot2,t.mentionHeadAvatar,t.mentionBodyLabel,t.breakpointsAttribute,t.deleteSinglePost),s=t.setOpen,b=Object(z.a)(),g=Object(Ge.a)({threshold:0,triggerOnce:!0,initialInView:!1}),p=g.ref,f=g.inView,m=(g.entry,Object(o.useState)("auto")),j=Object(u.a)(m,2),h=j[0],O=j[1],y=Object(o.useState)("none"),k=Object(u.a)(y,2),x=k[0],C=k[1],B=Object(o.useRef)(),w=Object(o.useState)(!1),A=Object(u.a)(w,2),I=A[0],P=A[1],T=Object(o.useState)(e[r].commentCount),M=Object(u.a)(T,2),R=M[0],L=M[1];return Object(o.useEffect)((function(){Number(window.getComputedStyle(B.current).height.replace("px",""))>360&&(O("360px"),C("block"))}),[]),Object(E.jsxs)("div",{ref:B,style:{position:"relative"},children:[Object(E.jsxs)(ct.a,{classes:{root:a},elevation:3,ref:p,style:{overflow:"none"===x?"visible":"hidden",padding:"0px",whiteSpace:"normal",height:h},children:[Object(E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"2px",paddingBottom:"0px"},children:[Object(E.jsxs)("div",{children:[Object(E.jsx)(ht.a,{onClick:function(){i.userName===e[r].ownerName&&s((function(t){return!t}))},avatar:Object(E.jsx)(lt.a,{alt:null,style:{width:"1.8rem",height:"1.8rem"},src:"https://api.multiavatar.com/"+e[r].ownerName+".svg"}),label:Object(E.jsxs)(Ot.a,{style:Object(d.a)({marginTop:"3px",lineHeight:"1.0",fontWeight:"bold"},i.userName===e[r].ownerName&&{color:b.palette.primary.main}),children:[e[r].ownerName,Object(E.jsx)("br",{}),Object(E.jsx)("span",{style:{color:b.palette.text.secondary,verticalAlign:"middle",fontSize:"0.7rem",fontWeight:"normal"},children:Object(Xe.a)(e[r].postingTime)})]})},r),Object(E.jsxs)(it.a,{size:"small",style:{justifySelf:"right"},onClick:function(){P((function(t){return!t})),O("auto"),C("none"),v.a.get("".concat(S,"/comment/count/").concat(e[r].postID)).then((function(t){L(t.data)}))},children:[Object(E.jsx)(_e.a,{style:{fontSize:"1.2rem"}}),"\xa0",Object(E.jsx)("span",{style:{fontWeight:"bold",fontSize:"1rem",color:b.palette.text.secondary,verticalAlign:"middle"},children:R})]})]}),i.userName==e[r].ownerName&&Object(E.jsx)(it.a,{size:"small",onClick:function(){l(e[r].postID).then((function(t){}))},children:Object(E.jsx)(Ye.a,{style:{fontSize:"1.5rem"}})})]}),c(e[r].content,n[r],f),I&&Object(E.jsx)(On,{postID:e[r].postID,index:r,toHtml:c,setCommentCount:L,commentCount:R},e[r].postID)]},r),Object(E.jsx)(F.a,{style:Object(d.a)(Object(d.a)({marginTop:"8px",borderTopLeftRadius:0,borderTopRightRadius:0,padding:0,position:"absolute",bottom:0,opacity:.8},"none"===x&&{display:"none"}),{},{backgroundColor:b.palette.background.default,boxShadow:b.shadows[1],color:"dark"===b.palette.type?b.palette.text.secondary:b.palette.primary.main}),onClick:function(){O("auto"),C("none")},size:"small",color:"primary",fullWidth:!0,children:Object(E.jsx)(He.a,{})})]})}function Bn(t){var e=t.picArr,n=t.picName,r=(Object(s.a)(t,kn),Object(z.a)()),a="local"===n?e.length:Number(n.split("_")[1]),c=e,i=Object(o.useState)(0),l=Object(u.a)(i,2),d=l[0],g=l[1],p=Object(o.useState)(!1),f=Object(u.a)(p,2),m=f[0],j=f[1];if(1===a){var h="local"===n?[c[0].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0")];return Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),backgroundColor:r.palette.divider,overflow:"hidden"},onClick:function(){j(!0)},children:m&&Object(E.jsx)(We.a,{mainSrc:h[d],nextSrc:h[(d+1)%h.length],prevSrc:h[(d+h.length-1)%h.length],onCloseRequest:function(){return j(!1)},onMovePrevRequest:function(){return g((function(t){return(t+h.length-1)%h.length}))},onMoveNextRequest:function(){return g((function(t){return(t+h.length+1)%h.length}))}})})}if(2===a){var O="local"===n?[c[0].localUrl,c[1].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){g(0),j(!0)}}),Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){g(1),j(!0)}}),m&&Object(E.jsx)(We.a,{mainSrc:O[d],nextSrc:O[(d+1)%O.length],prevSrc:O[(d+O.length-1)%O.length],onCloseRequest:function(){return j(!1)},onMovePrevRequest:function(){return g((function(t){return(t+O.length-1)%O.length}))},onMoveNextRequest:function(){return g((function(t){return(t+O.length+1)%O.length}))}})]})}if(3===a){var y="local"===n?[c[0].localUrl,c[1].localUrl,c[2].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1"),"".concat(S,"/picture/downloadpicture/").concat(n,"_2")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(b.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){g(0),j(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"},onClick:function(){g(1),j(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(1px) translateY(1px)"},onClick:function(){g(2),j(!0)}}),m&&Object(E.jsx)(We.a,{mainSrc:y[d],nextSrc:y[(d+1)%y.length],prevSrc:y[(d+y.length-1)%y.length],onCloseRequest:function(){return j(!1)},onMovePrevRequest:function(){return g((function(t){return(t+y.length-1)%y.length}))},onMoveNextRequest:function(){return g((function(t){return(t+y.length+1)%y.length}))}})]})}var k="local"===n?[c[0].localUrl,c[1].localUrl,c[2].localUrl,c[3].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1"),"".concat(S,"/picture/downloadpicture/").concat(n,"_2"),"".concat(S,"/picture/downloadpicture/").concat(n,"_3")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(-1px)"},onClick:function(){g(0),j(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"},onClick:function(){g(1),j(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(-1px) translateY(1px)"},onClick:function(){g(2),j(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[3].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_3)"),transform:"translateX(1px) translateY(1px)"},onClick:function(){g(3),j(!0)}}),m&&Object(E.jsx)(We.a,{mainSrc:k[d],nextSrc:k[(d+1)%k.length],prevSrc:k[(d+k.length-1)%k.length],onCloseRequest:function(){return j(!1)},onMovePrevRequest:function(){return g((function(t){return(t+k.length-1)%k.length}))},onMoveNextRequest:function(){return g((function(t){return(t+k.length+1)%k.length}))}})]})}function En(t){t.toHtml;var e=t.node,n=t.index,r=(t.imgArr,Object(s.a)(t,xn),Object(z.a)()),a=e.attribs.linkhost,c=e.attribs.linkaddress,i=Object(o.useState)(a.substr(1)),l=Object(u.a)(i,2),d=l[0],b=l[1],g=[];return e.children.forEach((function(t,e){g.push(Object(Wt.convertNodeToElement)(t))})),Object(E.jsx)("span",{target:"_blank",style:{color:r.palette.primary.main,cursor:"pointer"},onClick:function(t){t.stopPropagation(),b(Object(E.jsx)(Et.a,{href:c,target:"_blank",rel:"noopener",children:g.map((function(t,e){return t}))}))},children:Object(E.jsx)("span",{children:d},n)})}function wn(t){var e=t.backimage,n=t.textcolor,r=t.transformFn,a=(t.node,t.index),c=t.arr,i=t.arr2,l=t.inView,b=(Object(s.a)(t,vn),Object(o.useState)(!1)),g=Object(u.a)(b,2),p=g[0],f=g[1],m=e.indexOf("downloadbackpicture")>=0?"url(".concat(S,"/picture/downloadbackpicture/").concat(e.substring(e.lastIndexOf("/")+1,e.length-1),")"):e;return Object(E.jsx)(Le.a,{onChange:function(t){f(t)},style:Object(d.a)(Object(d.a)({},l&&{backgroundImage:m}),{},{color:n,backgroundSize:"cover",position:"relative",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",display:"flex",alignItems:p?"flex-start":"center",justifyContent:"center",overflow:"auto"}),children:Object(E.jsx)("div",{style:Object(d.a)(Object(d.a)(Object(d.a)({textAlign:"center",position:p?"block":"absolute"},!p&&{top:"50%"}),!p&&{transform:"translateY(-50%)"}),{},{padding:"8px",whiteSpace:"pre-wrap"}),children:c.map((function(t,e){return"span"===t.name?(t.children=t.children.filter((function(t){return"br"!==t.name})),Object(Wt.convertNodeToElement)(t)):"tag"!==t.type?Object(E.jsx)("span",{children:t},e):"span"===t.name?i[e]:Object(E.jsx)("span",{children:r(t,e)},e)}))})},a)}var An=function(){return Object(o.useContext)(w).getSinglePost,Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(i.a,{}),Object(E.jsx)(L.a,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",spacing:0,children:Object(E.jsx)(L.a,{item:!0,xs:12,sm:12,md:10,lg:6,xl:6,children:Object(E.jsx)(Te,{})})}),Object(E.jsx)(Cn,{})]})},In=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,490)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),o(t),r(t),a(t),c(t)}))};c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(P,{children:Object(E.jsx)(An,{})})}),document.getElementById("root")),In()}},[[407,1,2]]]);
//# sourceMappingURL=main.a5c2e828.chunk.js.map