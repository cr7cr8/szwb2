(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{211:function(e,t,n){},212:function(e,t,n){},370:function(e,t){},400:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(18),c=n.n(a),i=(n(211),n.p,n(212),n(470)),l=n(23),s=n(11),u=n(10),d=n(7),g=n(17),b=n(194),p=n(439),f=n(438),j=n(189),h=n.n(j),m=n(3),O=n(185),y=n.n(O),k=n(22),x=n(41),v=n.n(x),C="";C="/api",v.a.interceptors.request.use((function(e){return v.a.defaults.headers.common["x-auth-token"]=localStorage.getItem("token"),e}));var S=C,B=n(98),E=n(1),w=Object(o.createContext)(),A=y()({});function P(){for(var e,t={},n={},o={},r={},a={},c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return i.forEach((function(e){t=Object(d.a)(Object(d.a)({},t),{},Object(g.a)({},e[0],e[1])),n=Object(d.a)(Object(d.a)({},n),{},Object(g.a)({},e[0],e[2]||e[1])),o=Object(d.a)(Object(d.a)({},o),{},Object(g.a)({},e[0],e[3]||e[2]||e[1])),r=Object(d.a)(Object(d.a)({},r),{},Object(g.a)({},e[0],e[4]||e[3]||e[2]||e[1])),a=Object(d.a)(Object(d.a)({},a),{},Object(g.a)({},e[0],e[5]||e[4]||e[3]||e[2]||e[1]))})),e={},Object(g.a)(e,A.only("xs"),Object(d.a)({},t)),Object(g.a)(e,A.only("sm"),Object(d.a)({},n)),Object(g.a)(e,A.only("md"),Object(d.a)({},o)),Object(g.a)(e,A.only("lg"),Object(d.a)({},r)),Object(g.a)(e,A.only("xl"),Object(d.a)({},a)),e}function I(e){var t=Object(o.useState)(localStorage.getItem("token")?Object(B.a)(localStorage.getItem("token")):{userName:"__temp__"}),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(m.EditorState.createWithContent(m.ContentState.createFromText(""))),i=Object(u.a)(c,2),s=i[0],g=i[1],j=Object(o.useState)(!0),O=Object(u.a)(j,2),y=O[0],k=O[1],x=Object(o.useState)([]),C=Object(u.a)(x,2),A=C[0],I=C[1],M=Object(o.useState)([]),T=Object(u.a)(M,2),R=T[0],L=T[1],K=Object(o.useState)([]),F=Object(u.a)(K,2),z=F[0],N=F[1],U=Object(o.useCallback)((function(e){return v.a.get("".concat(S,"/article/deletesinglepost/").concat(e)).then((function(t){var n=R.findIndex((function(t){return t.postID===e}));return L((function(t){return t.filter((function(t){return t.postID!==e}))})),N((function(e){return e.filter((function(e,t){return t!==n}))})),t.data}))})),Y=["1.5rem","1.5rem","1.5rem","1.5rem","1.5rem"],_=["2rem","2rem","2rem","2rem","2rem"];Object(o.useEffect)((function(){"__temp__"===r.userName&&v.a.post("".concat(S,"/user/register"),r).then((function(e){localStorage.setItem("token",e.headers["x-auth-token"]),a(Object(B.a)(e.headers["x-auth-token"]))}))}),[]);var D=Object(o.useMemo)((function(){var e=Object(b.a)({backgourndImageArr:[{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b7028076fa440017fb5779)"),color:"darkgray"},{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b6f77fae1acf0017a96c4b)"),color:"orange"},{backgroundImage:"url(".concat(S,"/picture/downloadbackpicture/60b701a9dc07780017dcfd38)"),color:"white"},{backgroundImage:"url(https://picsum.photos/1024/576)",color:"white"},{backgroundImage:"url(https://picsum.photos/512/288)",color:"white"}],palette:{primary:h.a,type:y?"light":"dark"},typography:{fontSize:14,button:{textTransform:"none"},body2:P(["fontSize"].concat(Y))},overrides:{MuiAvatar:{root:Object(d.a)({},P(["width"].concat(_),["height"].concat(_)))},MuiSvgIcon:{root:Object(d.a)({},P(["fontSize"].concat(_)))},MuiChip:{root:{borderRadius:0,"& .MuiChip-avatar":Object(d.a)({color:"#616161",marginLeft:"5px",marginRight:"-6px",objectFit:"cover",textAlign:"center"},P(["width"].concat(Y),["height"].concat(Y)))},label:{"& > .MuiTypography-root.MuiTypography-body2":Object(d.a)({},P(["fontSize","1.2rem","1.2rem"]))}}}});return e.palette.mentionBackColor=y?"#b7e1fc":e.palette.primary.light,e}),[y]),X=Object(f.a)(D.breakpoints.only("xs")),H=Object(f.a)(D.breakpoints.only("sm")),W=Object(f.a)(D.breakpoints.only("md")),G=Object(f.a)(D.breakpoints.only("lg")),q=(Object(f.a)(D.breakpoints.only("xl")),X?"xs":H?"sm":W?"md":G?"lg":"xl");return Object(E.jsx)(w.Provider,{value:{token:r,setToken:a,isLight:y,setIsLight:k,theme:D,breakpointsAttribute:P,editorContent:s,setEditorContent:g,lgSizeObj:{xs:"2.5rem",sm:"2.5rem",md:"2.5rem",lg:"2.5rem",xl:"2.5rem"},smSizeObj:{xs:"1rem",sm:"1rem",md:"1rem",lg:"1rem",xl:"1rem"},deviceSize:q,picArr:A,setPicArr:I,postArr:R,setPostArr:L,postPicArr:z,setPostPicArr:N,getSinglePost:function(){var e,t=Math.min.apply(Math,Object(l.a)(R.map((function(e){return e.postingTime}))).concat([Date.now()]));return(e=console).log.apply(e,Object(l.a)(R.map((function(e){return e.postingTime})))),v.a.get("".concat(S,"/article/singlepost2/").concat(t)).then((function(e){return 0===e.data.length?Promise.resolve(e.data):(L((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e.data.map((function(e){return e}))))})),N((function(e){return[].concat(Object(l.a)(e),[""])})),e.data)}))},deleteSinglePost:U,changeOwnerName:function(e){return v.a.post("".concat(S,"/article/changeownername"),{newName:e}).then((function(e){return e.data?(localStorage.setItem("token",e.headers["x-auth-token"]),a(Object(B.a)(e.headers["x-auth-token"])),r):e.data}))}},children:Object(E.jsx)(p.a,{theme:D,children:e.children})})}var M=n(58),T=n.n(M),R=n(25),L=(n(342),n(440)),K=n(403),F=n(442),z=n(443),N=n(46),U=["block","editor","contentState","picArr","setPicArr"],Y=["children","picArr","setPicArr","editor"],_=["editor"];function D(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t}var X=n(444),H=n(445),W=n(446),G=n(447),q=n(448),J=n(449),V=["editor","isLargeOn","setIsLargeOn"],Z=["editor","isSmallOn","setIsSmallOn"],Q=["children","makeBold","isBoldOn","setIsBoldOn","styleType","editor"],$=["children","makeBold","isItalicOn","setIsItalicOn","styleType","editor"],ee=["children","makeBold","isUnderlineOn","setIsUnderlineOn","styleType","editor"];function te(e){e.children;var t=e.makeBold,n=e.isBoldOn,o=e.setIsBoldOn,r=(e.styleType,e.editor),a=Object(s.a)(e,Q),c=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(e){r.current.focus(),t("BOLD",o)},children:Object(E.jsx)(G.a,{})}))}function ne(e){e.children;var t=e.makeBold,n=e.isItalicOn,o=e.setIsItalicOn,r=(e.styleType,e.editor),a=Object(s.a)(e,$),c=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(e){r.current.focus(),t("ITALIC",o)},children:Object(E.jsx)(q.a,{})}))}function oe(e){e.children;var t=e.makeBold,n=e.isUnderlineOn,o=e.setIsUnderlineOn,r=(e.styleType,e.editor),a=Object(s.a)(e,ee),c=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(e){r.current.focus(),t("UNDERLINE",o)},children:Object(E.jsx)(J.a,{})}))}var re=n(451),ae=n(476),ce=n(450),ie=["children","isEmojiPanelOn","setIsEmojiPanelOn"],le=["children","emoji","insertEmoji","isEmojiPanelOn"];function se(e){e.children;var t=e.isEmojiPanelOn,n=e.setIsEmojiPanelOn,o=Object(s.a)(e,ie),r=Object(N.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:t?r.palette.primary.main:"",color:"light"===r.palette.type?t?r.palette.primary.contrastText:r.palette.primary.main:t?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(e){n((function(e){return!e}))},children:Object(E.jsx)(ce.a,{})}))})}function ue(e){e.children;var t=e.emoji,n=e.insertEmoji,o=e.isEmojiPanelOn,r=(Object(s.a)(e,le),Object(N.a)());return Object(E.jsx)(re.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:o?"10px":0,maxHeight:o?"30vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:o?1:0,marginBottom:r.spacing(2)},children:Object.keys(t).map((function(e,o){return Object(E.jsx)(K.a,{variant:"text",onClick:function(t){n(e)},children:Object(E.jsx)(ae.a,{src:t[e].replace("url(","").replace(")",""),style:{transform:"scale(1.2)",borderRadius:0}})},e)}))})}var de=n(452),ge=n(477),be=n(197),pe=n(453),fe=["inMentionPanel"],je=["isMentionPanelOn","setIsMentionPanelOn"],he=["isMentionPanelOn","setIsMentionPanelOn"],me=["getEditorState","setEditorState"],Oe=Object(de.a)((function(e){var t=Object(N.a)();return{mentionHeadAvatar:function(e){return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1)"}},mentionHeadRoot:function(e){return Object(g.a)({borderRadius:999,borderTopRightRadius:0,borderBottomRightRadius:0,position:"relative",height:"100%",backgroundColor:t.palette.mentionBackColor},"position","relative")},mentionBodyRoot:function(e){return{borderRadius:999,borderTopLeftRadius:0,borderBottomLeftRadius:0,height:"100%",backgroundColor:t.palette.mentionBackColor}},mentionBodyRoot2:function(e){return{borderRadius:999,height:"100%",backgroundColor:t.palette.mentionBackColor,boxShadow:t.shadows[2]}},mentionHeadLabel:function(e){return{paddingLeft:0,paddingRight:0,borderStyle:"none"}},mentionHeadLabel2:function(e){return{paddingLeft:0,paddingRight:0,borderStyle:"none",color:"rgba(200,0,0,0)"}},mentionBodyLabel:function(e){return{borderStyle:"none"}}}}));var ye=n(454),ke=n(473);var xe=n(455),ve=n(456),Ce=n(457),Se=n(458),Be=["editor"],Ee=["editor"],we=["editor"],Ae=["editor","isCenterOn","setIsCenterOn"],Pe=["editor","isRightOn","setIsRightOn"],Ie=["editor"];function Me(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t}var Te=["editor","isBackColorPanelOn","setIsBackColorPanelOn"],Re=["editor","isBackColorPanelOn","backImageArr","setBackImageArr","backImageIndex","setBackImageIndex"];var Le=n(111),Ke=n(51),Fe=n.n(Ke),ze=n(459),Ne=n(460),Ue=n(461),Ye=n(462),_e=["editorPaperCss","className1","unstyledBlockCss","imageBlockCss","centerBlockCss","rightBlockCss","colorBlockCss"],De=function(){var e=null,t=null;function n(n,o){if(e.getSelection().isCollapsed()){var r=e.getSelection(),a=r.toArray(),c=Object(u.a)(a,6),i=c[0],l=c[1],s=c[2],d=c[3],g=(c[4],c[5],e.getCurrentInlineStyle().toObject()),b=m.Modifier.replaceText(e.getCurrentContent(),r," "),p=r.merge({anchorKey:i,anchorOffset:l,focusKey:s,focusOffset:d+" ".length,isBackward:!1,hasFocus:!0});Object.keys(g).forEach((function(e){e!==n&&(b=m.Modifier.applyInlineStyle(b,p,g[e]))})),b=m.Modifier.applyInlineStyle(b,p,g[n]?[]:n),e=m.EditorState.push(e,b,"insert-characters"),e=m.EditorState.acceptSelection(e,p),t(e)}else{var f=(e=m.RichUtils.toggleInlineStyle(e,n)).getSelection().toArray(),j=Object(u.a)(f,6);j[0],j[1],j[2],j[3],j[4],j[5];t(e)}}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LARGE",o=e.getSelection().isCollapsed();if(o){if(o){var r=e.getSelection(),a=r.toArray(),c=Object(u.a)(a,6),i=c[0],l=c[1],s=c[2],d=c[3],g=(c[4],c[5],e.getCurrentInlineStyle().toObject()),b=" ",p=m.Modifier.insertText(e.getCurrentContent(),r,b),f=r.merge({anchorKey:i,anchorOffset:l,focusKey:s,focusOffset:d+b.length,isBackward:!1,hasFocus:!0});Object.keys(g).forEach((function(e){e!==n&&"LARGE"!==e&&"SMALL"!==e&&(p=m.Modifier.applyInlineStyle(p,f,g[e]))})),p=m.Modifier.applyInlineStyle(p,f,g[n]?[]:n),e=m.EditorState.push(e,p,"insert-characters"),e=m.EditorState.acceptSelection(e,f),t(e)}}else{var j=e.getSelection(),h=j.toArray(),O=Object(u.a)(h,6),y=(O[0],O[1],O[2],O[3],O[4],O[5],e.getCurrentInlineStyle().toObject()),k=e.getCurrentContent();console.log(y),"LARGE"===n?(k=m.Modifier.removeInlineStyle(k,j,"SMALL"),k=m.Modifier.removeInlineStyle(k,j,"LARGE"),y.LARGE||(k=m.Modifier.applyInlineStyle(k,j,"LARGE"))):"SMALL"===n&&(k=m.Modifier.removeInlineStyle(k,j,"SMALL"),k=m.Modifier.removeInlineStyle(k,j,"LARGE"),y.SMALL||(k=m.Modifier.applyInlineStyle(k,j,"SMALL"))),e=m.EditorState.push(e,k,"change-inline-style"),e=m.EditorState.acceptSelection(e,j),t(e)}}return{boldPlugin:{onChange:function(n,o){var r=o.setEditorState;return t=r,e=n}},BoldButton:function(e){return Object(E.jsx)(te,Object(d.a)({makeBold:n},e))},ItalicButton:function(e){return Object(E.jsx)(ne,Object(d.a)({makeBold:n},e))},UnderlineButton:function(e){return Object(E.jsx)(oe,Object(d.a)({makeBold:n},e))},LargeButton:function(e){var t=e.editor,n=e.isLargeOn,r=e.setIsLargeOn,a=Object(s.a)(e,V),c=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(e){t.current.focus(),o("LARGE",r)},children:Object(E.jsx)(X.a,{})}))},SmallButton:function(e){var t=e.editor,n=e.isSmallOn,r=e.setIsSmallOn,a=Object(s.a)(e,Z),c=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},a),{},{style:{backgroundColor:n?c.palette.primary.main:"",color:"light"===c.palette.type?n?c.palette.primary.contrastText:c.palette.primary.main:n?c.palette.primary.contrastText:c.palette.text.secondary},onClick:function(e){t.current.focus(),o("SMALL",r)},children:Object(E.jsx)(H.a,{})}))}}}(),Xe=De.boldPlugin,He=De.BoldButton,We=De.ItalicButton,Ge=De.UnderlineButton,qe=De.LargeButton,Je=De.SmallButton,Ve=function(){var e=null,t=null,n="url(".concat("http://szwb1.herokuapp.com/api","/emoji/downloademoji/"),r={};function a(n){var o=e.getSelection().toArray(),r=Object(u.a)(o,6),a=r[0],c=r[1],i=r[2],l=r[3],s=r[4],d=(r[5],[s?i:a,s?l:c,s?a:i,s?c:l]),g=d[0],b=d[1],p=m.Modifier.replaceText(e.getCurrentContent(),e.getSelection(),n),f=e.getSelection().merge({anchorKey:g,anchorOffset:b+n.length,focusKey:g,focusOffset:b+n.length,isBackward:!1,hasFocus:!0});e=m.EditorState.push(e,p,"insert-characters"),e=m.EditorState.acceptSelection(e,f),t(e)}return["\u2620","\u2764","\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69","\ud83d\udc7f","\ud83d\udc80","\ud83d\udca9","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude07","\ud83d\ude08","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude0e","\ud83d\ude0f","\ud83d\ude10","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude16","\ud83d\ude18","\ud83d\ude1a","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1e","\ud83d\ude20","\ud83d\ude21","\ud83d\ude22","\ud83d\ude23","\ud83d\ude24","\ud83d\ude25","\ud83d\ude28","\ud83d\ude29","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude2d","\ud83d\ude30","\ud83d\ude31","\ud83d\ude32","\ud83d\ude33","\ud83d\ude35","\ud83d\ude36","\ud83d\ude37","\ud83d\ude47\u200d\u2640\ufe0f","\ud83e\udd24","\ud83e\udd71"].forEach((function(e){r[e]=n+e+".png"})),{emojiPlugin:{onChange:function(n,o){var a=o.setEditorState;return e=n,t=a,e=function(){var t=e.getSelection().toArray(),n=Object(u.a)(t,6),o=(n[0],n[1],n[2],n[3],n[4],n[5],e.getSelection()),a=e.getCurrentContent(),c=e.getSelection();return e.getCurrentContent().getBlocksAsArray().forEach((function(e){var t=e.toArray(),n=Object(u.a)(t,4),o=n[0],i=n[2];n[3].forEach((function(e,t){var n=e.getEntity();n&&"EMOJI"===a.getEntity(n).getType()&&(c=c.merge({anchorKey:o,anchorOffset:t,focusKey:o,focusOffset:t+1,isBackward:!1,hasFocus:!1}),a=m.Modifier.applyEntity(a,c,null))})),Object.keys(r).forEach((function(e){for(var t,n=new RegExp("".concat(e),"g"),l=[];null!==(t=n.exec(i));){var s=t.index;t.index,t[0].length,l.push(s)}l.forEach((function(t){var n=(a=a.createEntity("EMOJI","IMMUTABLE",{url:r[e],symbol:e})).getLastCreatedEntityKey();c=c.merge({anchorKey:o,anchorOffset:t,focusKey:o,focusOffset:t+e.length,isBackward:!1,hasFocus:!1}),a=m.Modifier.applyEntity(a,c,n)}))}))})),e=m.EditorState.push(e,a,"insert-characters"),e=m.EditorState.acceptSelection(e,o)}()},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"EMOJI"===n.getEntity(t).getType()}),t)},component:function(e){e.contentState,e.entityKey,e.blockKey,e.offsetKey,e.start,e.end;var t=e.decoratedText,n=Object(o.useRef)(),a=Object(N.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("span",{ref:n,className:"emoji",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",marginLeft:.12*a.typography.fontSize,marginRight:.12*a.typography.fontSize,transform:(k.isMobile,"scale(1.2)"),backgroundImage:r[t]},children:Object(E.jsx)("span",{style:{clipPath:"circle(0% at 50% 50%)"},children:e.children})})})}}]},EmojiButton:function(e){return Object(E.jsx)(se,Object(d.a)({},e))},EmojiPanel:function(e){return Object(E.jsx)(ue,Object(d.a)({emoji:r,insertEmoji:a},e))}}}(),Ze=Ve.emojiPlugin,Qe=Ve.EmojiButton,$e=Ve.EmojiPanel,et=function(){var e=null,t=null;function n(){var n=e.getCurrentContent(),o=n.getSelectionBefore(),r=n.getSelectionAfter(),a=n.getBlocksAsArray().find((function(e){return"imageBlock"===e.type||"atomic"===e.type})),c=n.getBlocksAsArray().filter((function(e){return!("imageBlock"===e.type||"atomic"===e.type)})),i=a&&a.getKey();if(i){if(i&&n.getBlocksAsArray().length<=1)return e=m.EditorState.createEmpty(),setTimeout((function(){t(e)}),0),null;a=n.getBlockForKey(i),n=(n=m.ContentState.createFromBlockArray(c)).merge({selectionAfter:r,selectionBefore:o}),e=m.EditorState.createWithContent(n),t(e)}}function r(){var t=e.getSelection(),n=e.getCurrentContent();n.getBlockForKey(t.getEndKey());return n.getBlockMap().toArray().findIndex((function(e){return"atomic"===e.type&&"imageBlockText"===e.text||"imageBlock"===e.type}))>=0}return{ImageBlog:function(e){e.block,e.editor,e.contentState;var t=e.picArr,o=e.setPicArr,r=(Object(s.a)(e,U),Object(N.a)()),a=t.length,c=t;return 0===a?Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundColor:r.palette.divider,overflow:"hidden"},children:Object(E.jsx)("button",{onClick:function(){},children:"delete"})}):1===a?Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",backgroundColor:r.palette.divider,overflow:"hidden"},onClick:function(){o((function(e){return setTimeout((function(){n()}),0),[]}))}}):2===a?Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(e){return[e[1]]}))}}),Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(e){return[e[0]]}))}})]}):3===a?Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){o((function(e){return[e[1],e[2]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(e){return[e[0],e[2]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[2].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(e){return[e[0],e[1]]}))}})]}):Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[0].localUrl+")",transform:"translateX(-1px) translateY(-1px)"},onClick:function(){o((function(e){return[e[1],e[2],e[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[1].localUrl+")",transform:"translateX(1px) translateY(-1px)"},onClick:function(){o((function(e){return[e[0],e[2],e[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[2].localUrl+")",transform:"translateX(-1px) translateY(1px)"},onClick:function(){o((function(e){return[e[0],e[1],e[3]]}))}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"url("+c[3].localUrl+")",transform:"translateX(1px) translateY(1px)"},onClick:function(){o((function(e){return[e[1],e[2],e[3]]}))}})]})},ImageButton:function(n){n.children;var a=n.picArr,c=n.setPicArr,i=n.editor,u=Object(s.a)(n,Y),g=Object(o.useRef)(),b=Object(N.a)();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},u),{},{style:{color:"dark"===b.palette.type?a.length>=4&&r()?b.palette.action.disabled:b.palette.text.secondary:a.length>=4&&r()?b.palette.action.disabled:b.palette.primary.main},disabled:a.length>=4&&r(),onClick:function(e){g.current.click()},children:Object(E.jsx)(F.a,{})})),Object(E.jsx)("input",{ref:g,type:"file",style:{display:"none"},onClick:function(e){e.currentTarget.value=null},onChange:function(n){if(n.currentTarget.files[0].name.trim().match(/\.(gif|jpe?g|tiff|png|webp|bmp)$/i)){var o=n.currentTarget.files[0];o.localUrl=URL.createObjectURL(n.currentTarget.files[0]),console.log(n.currentTarget.files[0]),c((function(e){return[].concat(Object(l.a)(e),[o])})),r()?i.current.focus():function(n){var o=e.getCurrentContent(),r=e.getSelection(),a=r.getEndKey(),c=(o.getBlockForKey(r.getEndKey()),o.getBlocksAsArray()),i=o.getSelectionBefore(),l=o.getSelectionAfter(),s=c.findIndex((function(e){return e.key===a}));s=s>=0?s:c.length-1,console.log(s),c.splice(s+1,0,new m.ContentBlock({key:D(),type:"imageBlock",text:""})),o=(o=m.ContentState.createFromBlockArray(c)).merge({selectionAfter:l,selectionBefore:i}),e=m.EditorState.push(e,o,"insert-fragment"),t(e)}(URL.createObjectURL(n.currentTarget.files[0]))}}})]})},TopImageButton:function(n){n.editor;var o=Object(s.a)(n,_),r=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){!function(n){e.getSelection();var o=e.getCurrentContent(),r=o.getSelectionBefore(),a=o.getSelectionAfter(),c=o.getBlocksAsArray().find((function(e){return"imageBlock"===e.type||"atomic"===e.type})),i=o.getBlocksAsArray().sort((function(e,t){return"imageBlock"===e.type||"atomic"===e.type?-1:0})),l=c&&c.getKey();l&&(c=o.getBlockForKey(l),console.log(o.getBlocksAsArray().length),o=(o=m.ContentState.createFromBlockArray(i)).merge({selectionAfter:a,selectionBefore:r}),e=m.EditorState.push(e,o,"insert-fragment"),t(e))}()},children:Object(E.jsx)(z.a,{})}))},removeImageBlog:n,hasImageBlock:r,imagePlugin:{onChange:function(n,o){var r=o.setEditorState;return t=r,e=n}}}}(),tt=et.imagePlugin,nt=et.ImageButton,ot=(et.TopImageButton,et.ImageBlog),rt=(et.hasImageBlock,function(){var e="https://api.multiavatar.com",t=null,n=null,r=[],a={};r.forEach((function(t){a[t]=null,v.a.get("".concat(e,"/").concat(t,".svg"),{responseType:"arraybuffer",onDownloadProgress:function(e){}}).then((function(e){var n=btoa(new Uint8Array(e.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));a[t]="data:"+e.headers["content-type"]+";base64,"+n}))}));var c=99123;function i(e){var t=e.inMentionPanel,n=void 0!==t&&t,c=Object(s.a)(e,fe),i=Object(N.a)(),l=Object(o.useState)(0),d=Object(u.a)(l,2),b=d[0],p=d[1],f=c.mentionHeadKey,j=c.mentionBodyKey,h=c.entityKey,m=Oe(),O=(m.mentionHeadRoot,m.mentionBodyRoot,m.mentionBodyRoot2),y=(m.mentionHeadAvatar,m.mentionHeadLabel,m.mentionHeadLabel2,m.mentionBodyLabel);return Object(o.useEffect)((function(){p(1)}),[]),Object(E.jsx)(re.a,{elevation:2,contentEditable:"false",suppressContentEditableWarning:"true",style:{width:"max-content",position:"absolute",marginTop:i.spacing(0),left:"0px",zIndex:122,display:"flex",flexDirection:"column",opacity:b,transform:"scale(".concat(b,")"),transitionProperty:"opacity,transform",transitionDuration:"0.2s"},children:r.map((function(e,t){return Object(E.jsx)(ge.a,{classes:{root:O,label:y},style:{backgroundColor:c.tabIndex%r.length===t||n?i.palette.mentionBackColor:i.palette.action.disabledBackground,cursor:"pointer",width:"fit-content"},avatar:Object(E.jsx)(ae.a,{alt:"Natacha",src:a[e]}),onMouseDown:function(){g(n?" @"+e:e,f,j,h)},label:Object(E.jsx)(be.a,{variant:"body2",children:e})},t)}))})}function g(e,o,r,a){var c=e+" ",i=t.getCurrentContent(),l=t.getSelection(),s=r?i.getEntity(r).getData().person.replace(" @",""):"",d=l.toArray(),g=Object(u.a)(d,6),b=g[0],p=g[1],f=g[2],j=g[3],h=g[4],O=(g[5],[h?f:b,h?j:p,h?b:f,h?p:j]),y=O[0],k=O[1],x=l.merge({anchorKey:y,anchorOffset:k,focusKey:y,focusOffset:k+s.length,isBackward:!1,hasFocus:!0}),v=m.Modifier.replaceText(i,x,c);x=t.getSelection().merge({anchorKey:y,anchorOffset:k+c.length,focusKey:y,focusOffset:k+c.length,isBackward:!1,hasFocus:!0}),t=m.EditorState.push(t,v,"insert-characters"),t=m.EditorState.acceptSelection(t,x),n(t)}function b(){if(r.length<=0)return!1;var e=!1,n=t.getCurrentContent();return n.getBlocksAsArray().forEach((function(t){if(t.getCharacterList().forEach((function(t,o){var a=t.getEntity();if(a){var i=n.getEntity(a).getData(),l=i.mentionType,s=i.mentionHeadKey,u=i.mentionBodyKey;if(l){if("shortMentionOn"===l)return e=[r[c%r.length],"","",a];if(l.indexOf("longMentionOnAt")>=0)return e=[r[c%r.length],s,u,a]}}})),e)return e})),e}return{mentionPlugin:{handleBeforeInput:function(e,o,r,a){var c=a.setEditorState,i=t.getSelection().toArray(),l=Object(u.a)(i,6),s=l[0],d=l[1],g=l[2],p=l[3],f=l[4],j=(l[5],[f?g:s,f?p:d,f?s:g,f?d:p]),h=j[1],O=j[3];if(b()&&k.isMobile&&!k.isFirefox){n=c;var y=(t=o).getSelection(),x=t.getCurrentContent();return y=y.merge({isBackward:!1,hasFocus:!0}),x=m.Modifier.replaceText(x,y,e),y=y.merge({anchorOffset:h+2*e.length,focusOffset:O+2*e.length,isBackward:!1,hasFocus:!0}),t=m.EditorState.push(t,x,"insert-characters"),c(t=m.EditorState.acceptSelection(t,y)),"handled"}},handleReturn:function(e,t,n){var o=n.setEditorState;return b()?(g.apply(void 0,Object(l.a)(b())),"handled"):(o(m.RichUtils.insertSoftNewline(t)),"handled")},keyBindingFn:function(e,t){t.getEditorState,t.setEditorState,Object(s.a)(t,me);return 40===e.keyCode&&b()?(c+=1,"fire-arrow"):38===e.keyCode&&b()?(c-=1,"fire-arrow"):void 0},handleKeyCommand:function(e,o,r,a){a.setEditorState;return"fire-arrow"===e?(n(t),"handled"):"not-handled"},onChange:function(o,r){var a=r.setEditorState;return t=o,n=a,t=function(){var n=t.getSelection().toArray(),o=Object(u.a)(n,6),r=o[0],a=o[1],c=o[2],i=o[3],l=o[4],s=o[5],d=[l?c:r,l?i:a,l?r:c,l?a:i],g=d[2],b=d[3],p=/\s([@][\w_\[\u4E00-\u9FCA\]]*)/g,f=t.getSelection(),j=t.getSelection(),h=t.getCurrentContent();return t.getCurrentContent().getBlocksAsArray().forEach((function(t){var n,o=t.toArray(),r=Object(u.a)(o,4),a=r[0],c=r[2];r[3].forEach((function(e,t){var n=e.getEntity();n&&h.getEntity(n).getType().indexOf("Mention")>=0&&(j=j.merge({anchorKey:a,anchorOffset:t,focusKey:a,focusOffset:t+1,isBackward:!1,hasFocus:!1}),h=m.Modifier.applyEntity(h,j,null))}));for(var i=function(){var t=n.index,o=n.index+n[0].length,r=o-t,i=b-t,l=2===r&&(!s||a!==g||2!==i),u=r>2&&s&&a===g&&2===i,d=r>2&&s&&a===g&&2!==i&&i>0&&i<=r,p=r>2&&(!s||a!==g||i<=0||i>r);if(2===r&&s&&a===g&&2===i){var f=(h=h.createEntity("shortMentionOn","MUTABLE",{mentionType:"shortMentionOn"})).getLastCreatedEntityKey();j=j.merge({anchorKey:a,focusKey:a,anchorOffset:t,focusOffset:o,isBackward:!1,hasFocus:!1}),h=m.Modifier.applyEntity(h,j,f)}else if(l){var O=(h=h.createEntity("shortMentionOff","MUTABLE",{mentionType:"shortMentionOff"})).getLastCreatedEntityKey();j=j.merge({anchorKey:a,focusKey:a,anchorOffset:t,focusOffset:o,isBackward:!1,hasFocus:!1}),h=m.Modifier.applyEntity(h,j,O)}else u?y("longMentionOnAt"):d?y("longMentionOnOther"):p&&y("longMentionOff");function y(n){var r=(h=h.createEntity("".concat(n,"_HEAD"),"MUTABLE",{mentionType:"".concat(n,"_HEAD")})).getLastCreatedEntityKey();j=j.merge({anchorKey:a,focusKey:a,anchorOffset:t,focusOffset:t+2,isBackward:!1,hasFocus:!1});var i=(h=(h=m.Modifier.applyEntity(h,j,r)).createEntity("".concat(n,"_BODY"),"MUTABLE",{mentionType:"".concat(n,"_BODY")})).getLastCreatedEntityKey();j=j.merge({anchorKey:a,focusKey:a,anchorOffset:t+2,focusOffset:o,isBackward:!1,hasFocus:!1}),h=(h=(h=m.Modifier.applyEntity(h,j,i)).mergeEntityData(r,{mentionHeadKey:r,mentionBodyKey:i,person:c.substring(t,o).replace(" @",""),imgurl:"".concat(e,"/").concat(c.substring(t,o).replace(" @",""),").svg")})).mergeEntityData(i,{mentionHeadKey:r,mentionBodyKey:i,person:c.substring(t,o).replace(" @",""),imgurl:"".concat(e,"/").concat(c.substring(t,o).replace(" @",""),").svg")})}};null!==(n=p.exec(c));)i()})),t=m.EditorState.push(t,h,"apply-entity"),t=m.EditorState.acceptSelection(t,f)}()},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&n.getEntity(t).getType().indexOf("Mention")>=0}),t)},component:function(t){var n=t.contentState,o=t.entityKey,r=(t.blockKey,t.offsetKey,t.start,t.end,t.decoratedText,t.children),l=n.getEntity(o).getData(),s=l.mentionHeadKey,u=l.mentionBodyKey,d=l.person,g=(l.imgurl,l.mentionType),b=(Object(N.a)(),Oe()),p=b.mentionHeadRoot,f=b.mentionBodyRoot,j=b.mentionBodyRoot2,h=b.mentionHeadAvatar,m=b.mentionHeadLabel,O=(b.mentionHeadLabel2,b.mentionBodyLabel);return"shortMentionOn"===g?Object(E.jsxs)("span",{style:{position:"relative"},children:[Object(E.jsx)(ge.a,{style:{display:"inline-block"},classes:{root:p,avatar:h,label:m},avatar:Object(E.jsx)(ae.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(be.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}),!k.isMobile&&Object(E.jsx)(i,{tabIndex:c,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"shortMentionOff"===g?Object(E.jsx)("span",{style:{position:"relative",borderTopLeftRadius:"999px",borderBottomLeftRadius:"999px"},children:r}):"longMentionOnAt_HEAD"===g?Object(E.jsxs)("span",{style:{position:"relative"},children:[Object(E.jsx)(ge.a,{classes:{root:p,avatar:h,label:m},avatar:Object(E.jsx)(ae.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(be.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}),!k.isMobile&&Object(E.jsx)(i,{tabIndex:c,mentionHeadKey:s,mentionBodyKey:u,entityKey:o})]}):"longMentionOnAt_BODY"===g?Object(E.jsx)(ge.a,{classes:{root:f,label:O},size:"medium",label:Object(E.jsx)(be.a,{variant:"body2",children:r})}):"longMentionOnOther_HEAD"===g?Object(E.jsx)(ge.a,{classes:{root:p,avatar:h,label:m},avatar:Object(E.jsx)(ae.a,{alt:"Natacha",style:{opacity:.5}}),label:Object(E.jsx)(be.a,{variant:"body2",style:{clipPath:"circle(0% at 50% 50%)"},children:r})}):"longMentionOnOther_BODY"===g?Object(E.jsx)(ge.a,{classes:{root:f,label:O},label:Object(E.jsx)(be.a,{variant:"body2",children:r})}):"longMentionOff_HEAD"===g?Object(E.jsx)(E.Fragment,{}):"longMentionOff_BODY"===g?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(ge.a,{classes:{root:j,label:O},avatar:Object(E.jsx)(ae.a,{alt:"Natacha",src:a[d]||"".concat(e,"/").concat(d,".svg")}),label:Object(E.jsx)(be.a,{variant:"body2",children:r})})}):void 0}}]},MentionButton:function(e){var t=e.isMentionPanelOn,n=e.setIsMentionPanelOn,o=Object(s.a)(e,je),r=Object(N.a)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:t?r.palette.primary.main:"",color:"light"===r.palette.type?t?r.palette.primary.contrastText:r.palette.primary.main:t?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){n((function(e){return!e}))},children:Object(E.jsx)(pe.a,{})}))})},MentionPanel:function(e){var t=e.isMentionPanelOn;return e.setIsMentionPanelOn,Object(s.a)(e,he),Object(E.jsx)(re.a,{style:{position:"relative"},children:t&&Object(E.jsx)(i,{inMentionPanel:!0})})}}}()),at=rt.mentionPlugin,ct=rt.MentionButton,it=rt.MentionPanel,lt=function(){var e=null;return{linkPlugin:{onChange:function(t,n){var o=n.setEditorState;return e=t,o,e=function(){var t=e.getSelection().toArray(),n=Object(u.a)(t,6),o=n[0],r=n[1],a=n[2],c=n[3],i=n[4],l=n[5],s=[i?a:o,i?c:r,i?o:a,i?r:c],d=s[2],g=s[3],b=e.getSelection(),p=e.getCurrentContent(),f=e.getSelection();return e.getCurrentContent().getBlocksAsArray().forEach((function(t){var n,o=t.getKey(),r=(t.getType(),t.getText()),a=/\s([a-zA-Z]{1,10}:\/\/)(([a-zA-Z0-9-_]+\.?)+(:\d{0,6})?)(\/[^\s\r\n\/]+){0,7}(\/)?/g;for(t.getCharacterList().forEach((function(t,n){if(t.getEntity()){var r=p.getEntity(t.getEntity()).getType();"linkOn"!==r&&"linkOff"!==r||(f=e.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}),p=m.Modifier.applyEntity(p,f,null))}t.getStyle()&&t.getStyle().toArray().includes("linkStyle")&&(f=e.getSelection().merge({anchorKey:o,anchorOffset:n,focusKey:o,focusOffset:n+1,isBackward:!1,hasFocus:!1}))}));null!==(n=a.exec(r));){var c=n.index,i=n.index+n[0].length,s=i-c,u=g-c,b=r.substring(c,i),j=" "+n[2],h=!l||o!==d||u<=0||u-s>0;if(l&&o===d&&u>0&&u<=s){var O=(p=p.createEntity("linkOn","MUTABLE",{linkType:"linkOn",linkAddress:b,linkHost:j})).getLastCreatedEntityKey();f=e.getSelection().merge({anchorKey:o,anchorOffset:c+1,focusKey:o,focusOffset:i,isBackward:!1,hasFocus:!1}),p=m.Modifier.applyEntity(p,f,O)}else if(h){var y=(p=p.createEntity("linkOff","MUTABLE",{linkType:"linkOff",linkAddress:b,linkHost:j})).getLastCreatedEntityKey();f=e.getSelection().merge({anchorKey:o,anchorOffset:c+1,focusKey:o,focusOffset:i,isBackward:!1,hasFocus:!1}),p=m.Modifier.applyEntity(p,f,y)}}})),e=m.EditorState.push(e,p,"insert-fragment"),e=m.EditorState.acceptSelection(e,b)}()},decorators:[{strategy:function(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&("linkOn"===n.getEntity(t).getType()||"linkOff"===n.getEntity(t).getType())}),t)},component:function(e){Object(N.a)();var t=e.contentState,n=e.entityKey,o=(e.blockKey,e.offsetKey,e.start,e.end,e.decoratedText,t.getEntity(n).getData()),r=o.linkType;return o.linkAddress,o.linkHost,"linkOn"===r||"linkOff"===r?Object(E.jsx)(ye.a,{children:e.children}):void 0}}]}}}().linkPlugin,st=function(){var e=null,t=null;function n(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.getCurrentContent(),a=e.getSelection(),c=(r.getSelectionBefore(),r.getSelectionAfter(),a.getEndKey()),i=r.getBlocksAsArray(),s=r.getBlockForKey(c),u=(s.getType(),Me());return i=o?[new m.ContentBlock({key:u,type:"unstyled",text:""})].concat(Object(l.a)(i)):[].concat(Object(l.a)(i),[new m.ContentBlock({key:u,type:"unstyled",text:""})]),r=m.ContentState.createFromBlockArray(i),a=a.merge({anchorKey:u,focusKey:u,anchorOffset:0,focusOffset:0,isBackward:!1,hasFocus:!0}),e=m.EditorState.createWithContent(r),e=m.EditorState.acceptSelection(e,a),t(e),setTimeout((function(){n.current.focus()}),0),e}function o(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centerBlock",r=e.getCurrentContent(),a=e.getSelection(),c=a.getEndKey(),i=(r.getBlocksAsArray(),r.getBlockForKey(c)),l=i.getType();"unstyled"!==l&&"centerBlock"!==l&&"rightBlock"!==l||(r=m.Modifier.setBlockType(r,a,"unstyled"===l?o:l===o?"unstyled":o),e=m.EditorState.push(e,r,"change-block-type"),e=m.EditorState.acceptSelection(e,a),t(e),setTimeout((function(){n.current.focus()}),0))}return{DeleteBlogButton:function(n){var o=n.editor,r=Object(s.a)(n,Be),a=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},r),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){!function(n){var o=e.getCurrentContent(),r=e.getSelection().getEndKey(),a=o.getBlocksAsArray(),c=o.getBlockForKey(r).getType();if("unstyled"===c||"centerBlock"===c||"rightBlock"===c||"colorBlock"===c)a.length<=1?(e=m.EditorState.createEmpty(),setTimeout((function(){t(e),n.current.focus()}),0)):(a=a.filter((function(e){return e.key!==r})),o=m.ContentState.createFromBlockArray(a),e=m.EditorState.createWithContent(o),t(e))}(o)},children:Object(E.jsx)(xe.a,{})}))},AddTopLineButton:function(e){var t=e.editor,o=Object(s.a)(e,Ee),r=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){n(t)},children:Object(E.jsx)(ve.a,{style:{transform:"rotate(180deg)"}})}))},AddBottomLineButton:function(e){var t=e.editor,o=Object(s.a)(e,we),r=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{color:"light"===r.palette.type?r.palette.primary.main:r.palette.text.secondary},onClick:function(){n(t,!1)},children:Object(E.jsx)(ve.a,{})}))},AlignCenterButton:function(e){var t=e.editor,n=e.isCenterOn,r=(e.setIsCenterOn,Object(s.a)(e,Ae)),a=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},r),{},{style:{backgroundColor:n?a.palette.primary.main:"",color:"light"===a.palette.type?n?a.palette.primary.contrastText:a.palette.primary.main:n?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){o(t,"centerBlock")},children:Object(E.jsx)(W.a,{})}))},AlignRightButton:function(e){var t=e.editor,n=e.isRightOn,r=(e.setIsRightOn,Object(s.a)(e,Pe)),a=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},r),{},{style:{backgroundColor:n?a.palette.primary.main:"",color:"light"===a.palette.type?n?a.palette.primary.contrastText:a.palette.primary.main:n?a.palette.primary.contrastText:a.palette.text.secondary},onClick:function(){o(t,"rightBlock")},children:Object(E.jsx)(Ce.a,{})}))},AddBackColorButton:function(n){var o=n.editor,r=Object(s.a)(n,Ie),a=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},r),{},{style:{color:"light"===a.palette.type?a.palette.primary.main:a.palette.text.secondary},onClick:function(){!function(n){var o=e.getCurrentContent(),r=e.getSelection(),a=r.getEndKey();o.getBlocksAsArray(),o.getBlockForKey(a).getType(),o=m.Modifier.setBlockType(o,r,"colorBlock"),e=m.EditorState.push(e,o,"change-block-type"),e=m.EditorState.acceptSelection(e,r),t(e),setTimeout((function(){n.current.focus()}),0)}(o)},children:Object(E.jsx)(Se.a,{})}))},BackColorPanel:function(e){return Object.assign({},e),Object(E.jsx)(E.Fragment,{children:"ddd"})},deleteBlogPlugin:{onChange:function(n,o){var r=o.setEditorState;return t=r,e=n}}}}(),ut=st.deleteBlogPlugin,dt=st.DeleteBlogButton,gt=st.AddTopLineButton,bt=st.AddBottomLineButton,pt=st.AlignCenterButton,ft=st.AlignRightButton,jt=function(){var e=null,t=null;return{AddBackColorButton:function(e){e.editor;var t=e.isBackColorPanelOn,n=e.setIsBackColorPanelOn,o=Object(s.a)(e,Te),r=Object(N.a)();return Object(E.jsx)(K.a,Object(d.a)(Object(d.a)({},o),{},{style:{backgroundColor:t?r.palette.primary.main:"",color:"light"===r.palette.type?t?r.palette.primary.contrastText:r.palette.primary.main:t?r.palette.primary.contrastText:r.palette.text.secondary},onClick:function(){n((function(e){return!e}))},children:Object(E.jsx)(Se.a,{})}))},BackColorPanel:function(n){var o=n.editor,r=n.isBackColorPanelOn,a=(n.backImageArr,n.setBackImageArr,n.backImageIndex,n.setBackImageIndex,Object(s.a)(n,Re),Object(N.a)());return Object(E.jsx)(ke.a,{style:{maxWidth:"100%",overflow:"auto",marginTop:r?"10px":0,maxHeight:r?"35vh":0,transitionProperty:"height,max-height, opacity",transitionDuration:"0.2s",opacity:r?1:0,marginBottom:a.spacing(2),display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:a.backgourndImageArr.map((function(n,r){return Object(E.jsx)(K.a,{style:{backgroundImage:n.backgroundImage,backgroundSize:"contain",width:"80px",height:"45px"},onClick:function(){!function(n,o,r){var a=e.getCurrentContent(),c=e.getSelection(),i=c.getEndKey();a.getBlocksAsArray(),a.getBlockForKey(i).getType(),a=m.Modifier.setBlockType(a,c,"colorBlock"),a=m.Modifier.setBlockData(a,c,{img:o,textColor:r}),e=m.EditorState.push(e,a,"change-block-type"),e=m.EditorState.acceptSelection(e,c),t(e),setTimeout((function(){n.current.focus()}),0)}(o,n.backgroundImage,n.color||"white")}},r)}))})},backColorPlugin:{blockStyleFn:function(e){},onChange:function(n,o){var r=o.setEditorState;return t=r,e=n}}}}(),ht=jt.backColorPlugin,mt=jt.AddBackColorButton,Ot=jt.BackColorPanel,yt=Object(de.a)((function(e){var t={};return e.backgourndImageArr.forEach((function(e,n){t["css"+n]=e})),console.log(t),Object(d.a)(Object(d.a)({},t),{},{labelShrinkCss:function(){return{transform:"translate(0, 1.5px) scale(0.5)"}},textFieldCss:function(){return{fontSize:"1.5rem"}},editorPaperCss:function(t){t.isLight,t.breakpointsAttribute;return{borderWidth:"1px",borderStyle:"none",borderColor:t.isEditorFocusOn?e.palette.primary.main:e.palette.text.secondary,wordBreak:"break-all",whiteSpace:"pre-wrap",lineBreak:"anywhere"}},unstyledBlockCss:function(){return{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}},imageBlockCss:function(){return{margin:0,padding:0,width:"100%",height:0,paddingBottom:"56.25%"}},centerBlockCss:function(){return{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),textAlign:"center"}},rightBlockCss:function(){return{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),textAlign:"end"}},colorBlockCss:function(){return{position:"relative",display:"flex",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",alignItems:"center",justifyContent:"center",overflow:"auto",backgroundSize:"contain","& > div":{textAlign:"center",position:"absolute",top:"50%",transform:"translateY(-50%)"}}},className1:function(e){return{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)","&:hover":{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}})})),kt={entityMap:{},blocks:[]};function xt(){var e=Object(o.useContext)(w),t=e.token,n=e.isLight,r=e.setIsLight,a=e.breakpointsAttribute,c=e.editorContent,i=e.setEditorContent,g=e.lgSizeObj,b=e.smSizeObj,p=e.deviceSize,f=e.picArr,j=e.setPicArr,h=(e.postArr,e.setPostArr),O=(e.postPicArr,e.setPostPicArr),y=Object(N.a)(),x=Object(o.useState)(!1),C=Object(u.a)(x,2),B=C[0],A=C[1],P=Object(o.useState)(!1),I=Object(u.a)(P,2),M=I[0],L=I[1],F=Object(o.useState)(!1),z=Object(u.a)(F,2),U=z[0],Y=z[1],_=Object(o.useState)(!1),D=Object(u.a)(_,2),X=D[0],H=D[1],W=Object(o.useState)(!1),G=Object(u.a)(W,2),q=G[0],J=G[1],V=Object(o.useState)(!1),Z=Object(u.a)(V,2),Q=Z[0],$=Z[1],ee=Object(o.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],oe=te[1],ae=Object(o.useState)(!1),ce=Object(u.a)(ae,2),ie=ce[0],le=ce[1],se=Object(o.useState)(!1),ue=Object(u.a)(se,2),de=ue[0],ge=ue[1],be=Object(o.useState)(!1),pe=Object(u.a)(be,2),fe=pe[0],je=pe[1],he=Object(o.useState)(!1),me=Object(u.a)(he,2),Oe=me[0],ye=me[1],xe=Object(o.useRef)(),ve=yt({isLight:n,isEditorFocusOn:Oe,breakpointsAttribute:a}),Ce=ve.editorPaperCss,Se=(ve.className1,ve.unstyledBlockCss),Be=ve.imageBlockCss,Ee=ve.centerBlockCss,we=ve.rightBlockCss,Ae=ve.colorBlockCss,Pe=Object(s.a)(ve,_e),Ie=Object(o.useState)(m.EditorState.createWithContent(Object(m.convertFromRaw)(kt))),Me=Object(u.a)(Ie,2),Te=Me[0],Re=Me[1],Ke=Object(o.useState)(!0),Fe=Object(u.a)(Ke,2),De=Fe[0],Ve=Fe[1];function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local",n=Object(Le.a)(e.getCurrentContent(),{defaultBlockTag:"div",inlineStyles:{LARGE:{style:{fontSize:g[p]}},SMALL:{style:{fontSize:b[p]}}},blockStyleFn:function(e){var t=e.getType();return"unstyled"===t?{attributes:{},style:{paddingLeft:"8px",paddingRight:"8px"}}:"centerBlock"===t?{attributes:{className:Ee}}:"rightBlock"===t?{attributes:{className:we}}:"colorBlock"===t?{attributes:{colorblock:"true",backimage:e.getData().toJS().img,textcolor:e.getData().toJS().textColor}}:void 0},blockRenderers:{imageBlock:function(e){e.getText(),e.getData().toObject(),e.getType();return'<imgtag id="'.concat(t,'">')+escape(e.getText())+"</imgtag>"}},entityStyleFn:function(e){var t=e.toObject(),n=t.type,o=t.data;t.mutablity;if("shortMentionOff"===n)return{element:"shortMentionoff"};if("longMentionOff_HEAD"===n)return{element:"longmentionoff_head",attributes:{imgurl:o.imgurl,person:o.person},style:{}};if("longMentionOff_BODY"===n)return{element:"longmentionoff_body",attributes:{imgurl:o.imgurl,person:o.person}};if("EMOJI"===n)return console.log(o.url),{element:"emoji",attributes:{imgurl:o.url,symbol:o.symbol}};if("linkOff"===n){o.linkType,o.linkAddress,o.linkHost;return{element:"linkoff",attributes:Object(d.a)({},o)}}}});return n}return Object(o.useEffect)((function(){setTimeout((function(){xe.current.focus(),m.EditorState.moveFocusToEnd(Te)}),0)}),[]),Object(E.jsxs)(ze.a,{disableGutters:!1,children:[Object(E.jsxs)(ke.a,{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:(k.isMobile,"wrap"),gap:y.spacing(1)},children:[Object(E.jsx)(re.a,{style:Object(d.a)(Object(d.a)({},k.isMobile&&!k.isFirefox&&{marginRight:y.spacing(1)}),{},{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"}),children:Object(E.jsxs)(Ne.a,{variant:"text",style:{},children:[Object(E.jsx)(He,{editor:xe,isBoldOn:B,setIsBoldOn:A}),Object(E.jsx)(We,{editor:xe,isItalicOn:M,setIsItalicOn:L}),Object(E.jsx)(Ge,{editor:xe,isUnderlineOn:U,setIsUnderlineOn:Y}),Object(E.jsx)(qe,{editor:xe,isLargeOn:X,setIsLargeOn:H}),Object(E.jsx)(Je,{editor:xe,isSmallOn:q,setIsSmallOn:J})]})}),Object(E.jsx)(re.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"},children:Object(E.jsxs)(Ne.a,{variant:"text",style:{},children:[!k.isMobile&&Object(E.jsx)(Qe,{color:"primary",fontSize:"small",isEmojiPanelOn:Q,setIsEmojiPanelOn:$}),Object(E.jsx)(ct,{color:"primary",fontSize:"small",isMentionPanelOn:ne,setIsMentionPanelOn:oe}),Object(E.jsx)(nt,{color:"primary",fontSize:"small",picArr:f,setPicArr:j,editor:xe}),Object(E.jsx)(mt,{editor:xe,color:"primary",fontSize:"small",isBackColorPanelOn:ie,setIsBackColorPanelOn:le}),Object(E.jsx)(K.a,{onClick:function(){r((function(e){return!e})),xe.current.focus()},style:{color:"dark"===y.palette.type?y.palette.text.secondary:y.palette.primary.main},children:n?Object(E.jsx)(Ue.a,{}):Object(E.jsx)(Ye.a,{})})]})}),Object(E.jsx)(re.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",gap:y.spacing(1),width:"fit-content"},children:Object(E.jsxs)(Ne.a,{variant:"text",style:{},children:[Object(E.jsx)(gt,{editor:xe}),Object(E.jsx)(dt,{editor:xe}),Object(E.jsx)(bt,{editor:xe}),Object(E.jsx)(pt,{editor:xe,isCenterOn:de,setIsCenterOn:ge}),Object(E.jsx)(ft,{editor:xe,isRightOn:fe,setIsRightOn:je})]})})]}),Object(E.jsx)(re.a,{elevation:Oe?5:1,classes:{root:Ce},style:{},onClick:function(){var e=m.EditorState.moveSelectionToEnd(Te);Re(m.EditorState.forceSelection(e,Te.getSelection())),ye(!0)},children:Object(E.jsx)(T.a,{ref:function(e){xe.current=e},editorState:Te,onChange:function(e,t){Object.assign({},t);var n=e.getCurrentInlineStyle().toObject(),o=n.BOLD,r=n.ITALIC,a=n.UNDERLINE,c=n.LARGE,l=n.SMALL,s=e.getSelection(),u=e.getCurrentContent(),d=s.getFocusKey(),g=u.getBlockForKey(d).getType();ge("centerBlock"===g),je("rightBlock"===g),ye(s.hasFocus),A(Boolean(o)),L(Boolean(r)),Y(Boolean(a)),H(Boolean(c)),J(Boolean(l)),i(e),Re(e)},plugins:[Xe,tt,Ze,at,lt,ut,ht],preserveSelectionOnBlur:!0,customStyleMap:R.b.Map({}),customStyleFn:function(e,t){var n=e.toObject();if(n.LARGE&&n.SMALL);else{if(Boolean(n.LARGE))return{fontSize:g[p]};if(Boolean(n.SMALL))return{fontSize:b[p]};if(Boolean(n.CENTER))return{display:"flex",justifyContent:"center"}}},blockRenderMap:R.b.Map({}),blockStyleFn:function(e){var t=e.getType(),n=e.getText();if("unstyled"===t)return Se;if("atomic"===t&&"imageBlockText"===n)return Be;if("centerBlock"===t)return Ee;if("rightBlock"===t)return we;if("colorBlock"===t){console.log(Pe);var o=e.getData().toJS().img,r=y.backgourndImageArr.findIndex((function(e){return e.backgroundImage===o}));return Ae+" "+Pe["css"+r]}},blockRendererFn:function(e){var t=e.getText(),n=(e.getData().toObject(),e.getType());return"atomic"===n&&"imageBlockText"===t||"imageBlock"===n?{component:function(e){return Object(E.jsx)(ot,Object(d.a)(Object(d.a)({},e),{},{picArr:f,setPicArr:j,editor:xe}))},editable:!1}:null},handleKeyCommand:function(e,t,n,o){o.getEditorState;"bold"===e?(A((function(e){return!e})),Re(m.RichUtils.handleKeyCommand(t,e))):"italic"===e?(L((function(e){return!e})),Re(m.RichUtils.handleKeyCommand(t,e))):"underline"===e&&(Y((function(e){return!e})),Re(m.RichUtils.handleKeyCommand(t,e)))}})}),Object(E.jsx)(K.a,{variant:"contained",color:"primary",disabled:!De,style:{display:"block",width:"100%",marginTop:y.spacing(1)},onClick:function(e){xe.current.focus(),Ve(!1);var n=String(Math.floor(1e6*Math.random()))+"_"+f.length;if(v.a.post("".concat(S,"/article"),{ownerName:t.userName,content:et(c,n),postID:n}).then((function(e){console.log(e.data),0===f.length&&(Ve(!0),Re(m.EditorState.createWithContent(Object(m.convertFromRaw)(kt))))})),f.length>0){var o=new FormData,r={ownerName:"aaa",picName:[]};f.forEach((function(e,t){var a=n+"_"+t;o.append("file",e),r.picName.push(a),e.picID=a,console.log(a)})),o.append("obj",JSON.stringify(r)),v.a.post("".concat(S,"/picture/uploadpicture"),o,{headers:{"content-type":"multipart/form-data"}}).then((function(e){Ve(!0),j([]),Re(m.EditorState.createWithContent(Object(m.convertFromRaw)(kt)))}))}h((function(e){return[{ownerName:t.userName,postID:n,postingTime:Date.now(),content:et(c,"local")}].concat(Object(l.a)(e))})),O((function(e){return[f].concat(Object(l.a)(e))}))},children:"Post"}),Object(E.jsx)(Ot,{editor:xe,isBackColorPanelOn:ie}),!k.isMobile&&Object(E.jsx)($e,{isEmojiPanelOn:Q}),Object(E.jsx)(it,{isMentionPanelOn:ne})]})}var vt=n(195),Ct=n(110),St=n.n(Ct),Bt=n(466),Et=n(467),wt=n(471),At=n(475),Pt=n(465),It=n(464),Mt=n(463),Tt=n(468),Rt=n(469),Lt=n(472),Kt=n(75),Ft=(n(399),n(112)),zt=["picArr","picName"],Nt=["toHtml","node","index","imgArr"],Ut=["backimage","textcolor","transformFn","node","index","arr","arr2","inView"];function Yt(e){e.style;var t,n=Object(o.useContext)(w),r=n.token,a=(n.setToken,n.editorContent,n.setEditorContent,n.lgSizeObj,n.smSizeObj,n.deviceSize,n.picArr,n.setPicArr,n.postArr),c=n.setPostArr,i=n.postPicArr,s=(n.setPostPicArr,n.getSinglePost),d=n.deleteSinglePost,b=n.changeOwnerName,p=Object(o.useState)(!1),f=Object(u.a)(p,2),j=f[0],h=f[1],m=Object(N.a)(),O=yt({}),y=O.editorPaperCss,x=(O.className1,O.unstyledBlockCss,O.imageBlockCss,O.centerBlockCss,O.rightBlockCss,O.textFieldCss),v=O.labelShrinkCss,C=Oe(),S=(C.mentionHeadRoot,C.mentionBodyRoot,C.mentionBodyRoot2),B=(C.mentionHeadAvatar,C.mentionHeadLabel,C.mentionHeadLabel2,C.mentionBodyLabel);function A(e,t,n){return Fe()(e,{transform:function e(o,r){if("imgtag"===o.name)return n&&Object(E.jsx)(Dt,{picArr:t,picName:o.attribs.id},r);if("emoji"===o.name)return Object(E.jsx)(be.a,{variant:"body2",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",display:"inline-block",textAlign:"right",color:"rgba(0,0,0,0)",backgroundImage:o.attribs.imgurl,transform:(k.isMobile,"scale(1.2)"),marginLeft:.12*m.typography.fontSize,marginRight:.12*m.typography.fontSize},children:o.attribs.symbol},r);if("longmentionoff_head"===o.name)return Object(E.jsx)("span",{},r);if("longmentionoff_body"===o.name){var a=[];return o.children.forEach((function(e){a.push(Object(Ke.convertNodeToElement)(e))})),Object(E.jsx)(ge.a,{classes:{root:S,label:B},avatar:Object(E.jsx)(ae.a,{alt:null,src:o.attribs.imgurl.replace("url(","").replace(")","")}),label:Object(E.jsx)(be.a,{variant:"body2",children:a.map((function(e,t){return Object(E.jsx)("span",{children:e},t)}))})},r)}if(Object.keys(o.attribs||{}).includes("colorblock")){var c=[],i=[],l=o.attribs.backimage,s=o.attribs.textcolor;return o.children.forEach((function(e){c.push("tag"===e.type?e:e.data),i.push(Object(Ke.convertNodeToElement)(e))})),Object(E.jsx)(Ht,{arr:c,transformFn:e,index:r,arr2:i,backimage:l,textcolor:s,inView:n},Math.random())}if("linkoff"===o.name){var u=[];return o.children.forEach((function(e){u.push(Object(Ke.convertNodeToElement)(e))})),Object(E.jsx)("span",{children:Object(E.jsx)(Xt,{toHtml:A,node:o,imgArr:t,index:r})},r)}}})}var P=(t={},Object(g.a)(t,m.breakpoints.values.xs,1),Object(g.a)(t,m.breakpoints.values.sm,1),Object(g.a)(t,m.breakpoints.values.md,2),Object(g.a)(t,m.breakpoints.values.lg,3),Object(g.a)(t,m.breakpoints.values.xl,4),t),I=Object(Ft.a)({threshold:.8,triggerOnce:!1,initialInView:!0}),M=I.ref,T=I.inView;I.entry;Object(o.useEffect)((function(){T&&!j&&s().then((function(e){0===e.length&&h(!0)}))}),[j,a,T]);var R=Object(o.useState)(!1),L=Object(u.a)(R,2),F=L[0],z=L[1],U=Object(o.useState)(""),Y=Object(u.a)(U,2),_=Y[0],D=Y[1];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(ze.a,{disableGutters:!1,children:[Object(E.jsxs)(At.a,{open:F,onClose:function(){z(!1)},"aria-labelledby":"form-dialog-title",children:[Object(E.jsx)(Mt.a,{id:"form-dialog-title",children:Object(E.jsx)(ge.a,{style:{backgroundColor:"transparent"},avatar:Object(E.jsx)(ae.a,{style:{transform:"scale(2)"},alt:null,src:"https://api.multiavatar.com/"+r.userName+".svg"}),label:Object(E.jsxs)(be.a,{variant:"h5",children:["\xa0\xa0\xa0",r.userName]})})}),Object(E.jsx)(It.a,{children:Object(E.jsx)(wt.a,{InputLabelProps:{classes:{root:x,animated:x,shrink:v}},InputProps:{classes:{input:x}},value:_,onChange:function(e){D(e.target.value)},margin:"dense",id:"name",label:"\u65b0\u540d\u5b57/new name"})}),Object(E.jsxs)(Pt.a,{children:[Object(E.jsx)(K.a,{onClick:function(){D(""),z(!1)},style:{fontSize:"2rem",color:"dark"===m.palette.type?m.palette.text.secondary:m.palette.primary.main},children:"Cancel"}),Object(E.jsx)(K.a,{onClick:function(){var e=r.userName;b(_).then((function(t){t?(c((function(t){return Object(l.a)(t.map((function(t){return console.log(t.ownerName,e),t.ownerName===e?(t.ownerName=_,t):t})))})),D(""),z(!1)):alert("name is taken")}))},style:{fontSize:"2rem",color:"dark"===m.palette.type?m.palette.text.secondary:m.palette.primary.main},children:"OK"})]})]}),Object(E.jsx)(vt.a,{breakpointCols:P,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:a.map((function(e,t){return Object(E.jsx)(_t,{postArr:a,postPicArr:i,index:t,editorPaperCss:y,toHtml:A,token:r,mentionBodyRoot2:S,mentionBodyLabel:B,deleteSinglePost:d,setOpen:z},e.postID)}))}),Object(E.jsx)(re.a,{style:{padding:m.spacing(1),margin:"auto",backgroundColor:m.palette.background.default,width:"100%",opacity:Boolean(!j)&&T?1:0,display:"flex",justifyContent:"center",alignItems:"center"},ref:M,children:Object(E.jsx)(Bt.a,{size:"1.5rem"})})]})})}function _t(e){var t=e.postArr,n=e.postPicArr,r=e.index,a=e.editorPaperCss,c=e.toHtml,i=e.token,l=(e.mentionBodyRoot2,e.mentionBodyLabel,e.deleteSinglePost),s=e.setOpen,g=Object(N.a)(),b=Object(Ft.a)({threshold:0,triggerOnce:!0,initialInView:!1}),p=b.ref,f=b.inView,j=(b.entry,Object(o.useState)("auto")),h=Object(u.a)(j,2),m=h[0],O=h[1],y=Object(o.useState)("none"),k=Object(u.a)(y,2),x=k[0],v=k[1],C=Object(o.useRef)();return Object(o.useEffect)((function(){Number(window.getComputedStyle(C.current).height.replace("px",""))>360&&(O("360px"),v("block"))}),[]),Object(E.jsxs)("div",{ref:C,style:{position:"relative"},children:[Object(E.jsxs)(re.a,{classes:{root:a},elevation:3,ref:p,style:{overflow:"hidden",padding:"0px",whiteSpace:"normal",height:m},children:[Object(E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(E.jsxs)("div",{children:[Object(E.jsx)(ge.a,{style:{backgroundColor:"transparent"},onClick:function(){i.userName===t[r].ownerName&&s((function(e){return!e}))},avatar:Object(E.jsx)(ae.a,{alt:null,src:"https://api.multiavatar.com/"+t[r].ownerName+".svg"}),label:Object(E.jsx)(be.a,{style:Object(d.a)({},i.userName===t[r].ownerName&&{color:g.palette.primary.main,fontWeight:"bold"}),children:t[r].ownerName})},r),Object(E.jsx)("span",{style:{color:g.palette.text.secondary,verticalAlign:"middle",fontSize:"0.8rem"},children:Object(Lt.a)(t[r].postingTime)})]}),i.userName==t[r].ownerName&&Object(E.jsx)(Et.a,{size:"small",style:{float:"right"},onClick:function(){l(t[r].postID).then((function(e){}))},children:Object(E.jsx)(Tt.a,{style:{transform:"scale(0.7) translateY(-0px)"}})})]}),c(t[r].content,n[r],f)]},r),Object(E.jsx)(K.a,{onClick:function(){O("auto"),v("none")},size:"small",style:{position:"absolute",bottom:0,display:x,width:"100%",opacity:.8,borderTopRightRadius:0,borderTopLeftRadius:0,backgroundColor:g.palette.background.default,color:"dark"===g.palette.type?g.palette.text.secondary:g.palette.primary.main},children:Object(E.jsx)(Rt.a,{})})]})}function Dt(e){var t=e.picArr,n=e.picName,r=(Object(s.a)(e,zt),Object(N.a)()),a="local"===n?t.length:Number(n.split("_")[1]),c=t,i=Object(o.useState)(0),l=Object(u.a)(i,2),d=l[0],b=l[1],p=Object(o.useState)(!1),f=Object(u.a)(p,2),j=f[0],h=f[1];if(1===a){var m="local"===n?[c[0].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0")];return Object(E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),backgroundColor:r.palette.divider,overflow:"hidden"},onClick:function(){h(!0)},children:j&&Object(E.jsx)(Kt.a,{mainSrc:m[d],nextSrc:m[(d+1)%m.length],prevSrc:m[(d+m.length-1)%m.length],onCloseRequest:function(){return h(!1)},onMovePrevRequest:function(){return b((function(e){return(e+m.length-1)%m.length}))},onMoveNextRequest:function(){return b((function(e){return(e+m.length+1)%m.length}))}})})}if(2===a){var O="local"===n?[c[0].localUrl,c[1].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){b(0),h(!0)}}),Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){b(1),h(!0)}}),j&&Object(E.jsx)(Kt.a,{mainSrc:O[d],nextSrc:O[(d+1)%O.length],prevSrc:O[(d+O.length-1)%O.length],onCloseRequest:function(){return h(!1)},onMovePrevRequest:function(){return b((function(e){return(e+O.length-1)%O.length}))},onMoveNextRequest:function(){return b((function(e){return(e+O.length+1)%O.length}))}})]})}if(3===a){var y="local"===n?[c[0].localUrl,c[1].localUrl,c[2].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1"),"".concat(S,"/picture/downloadpicture/").concat(n,"_2")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:Object(g.a)({position:"absolute",width:"50%",height:"100%",backgroundColor:"pink",left:"0%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(0px)"},"backgroundColor","wheat"),onClick:function(){b(0),h(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"},onClick:function(){b(1),h(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",left:"50%",top:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(1px) translateY(1px)"},onClick:function(){b(2),h(!0)}}),j&&Object(E.jsx)(Kt.a,{mainSrc:y[d],nextSrc:y[(d+1)%y.length],prevSrc:y[(d+y.length-1)%y.length],onCloseRequest:function(){return h(!1)},onMovePrevRequest:function(){return b((function(e){return(e+y.length-1)%y.length}))},onMoveNextRequest:function(){return b((function(e){return(e+y.length+1)%y.length}))}})]})}var k="local"===n?[c[0].localUrl,c[1].localUrl,c[2].localUrl,c[3].localUrl]:["".concat(S,"/picture/downloadpicture/").concat(n,"_0"),"".concat(S,"/picture/downloadpicture/").concat(n,"_1"),"".concat(S,"/picture/downloadpicture/").concat(n,"_2"),"".concat(S,"/picture/downloadpicture/").concat(n,"_3")];return Object(E.jsxs)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%",backgroundPositionX:"center",backgroundPositionY:"center",backgroundColor:r.palette.divider,overflow:"hidden"},children:[Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[0].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_0)"),transform:"translateX(-1px) translateY(-1px)"},onClick:function(){b(0),h(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"0%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[1].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_1)"),transform:"translateX(1px) translateY(-1px)"},onClick:function(){b(1),h(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"0%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[2].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_2)"),transform:"translateX(-1px) translateY(1px)"},onClick:function(){b(2),h(!0)}}),Object(E.jsx)("div",{style:{position:"absolute",width:"50%",height:"50%",backgroundColor:"wheat",top:"50%",left:"50%",backgroundRepeat:"no-repeat",overflow:"hidden",backgroundPositionX:"center",backgroundPositionY:"center",backgroundSize:"cover",backgroundImage:"local"===n?"url("+c[3].localUrl+")":"url(".concat(S,"/picture/downloadpicture/").concat(n,"_3)"),transform:"translateX(1px) translateY(1px)"},onClick:function(){b(3),h(!0)}}),j&&Object(E.jsx)(Kt.a,{mainSrc:k[d],nextSrc:k[(d+1)%k.length],prevSrc:k[(d+k.length-1)%k.length],onCloseRequest:function(){return h(!1)},onMovePrevRequest:function(){return b((function(e){return(e+k.length-1)%k.length}))},onMoveNextRequest:function(){return b((function(e){return(e+k.length+1)%k.length}))}})]})}function Xt(e){e.toHtml;var t=e.node,n=e.index,r=(e.imgArr,Object(s.a)(e,Nt),Object(N.a)()),a=t.attribs.linkhost,c=t.attribs.linkaddress,i=Object(o.useState)(a.substr(1)),l=Object(u.a)(i,2),d=l[0],g=l[1],b=[];return t.children.forEach((function(e,t){b.push(Object(Ke.convertNodeToElement)(e))})),Object(E.jsx)("span",{target:"_blank",style:{color:r.palette.primary.main,cursor:"pointer"},onClick:function(e){e.stopPropagation(),g(Object(E.jsx)(ye.a,{href:c,target:"_blank",rel:"noopener",children:b.map((function(e,t){return e}))}))},children:Object(E.jsx)("span",{children:d},n)})}function Ht(e){var t=e.backimage,n=e.textcolor,r=e.transformFn,a=(e.node,e.index),c=e.arr,i=e.arr2,l=e.inView,g=(Object(s.a)(e,Ut),Object(o.useState)(!1)),b=Object(u.a)(g,2),p=b[0],f=b[1];return Object(E.jsx)(St.a,{onChange:function(e){f(e)},style:Object(d.a)(Object(d.a)({},l&&{backgroundImage:t}),{},{color:n,backgroundSize:"cover",position:"relative",backgroundColor:"wheat",height:0,paddingBottom:"56.25%",display:"flex",alignItems:p?"flex-start":"center",justifyContent:"center",overflow:"auto"}),children:Object(E.jsx)("div",{style:Object(d.a)(Object(d.a)(Object(d.a)({textAlign:"center",position:p?"block":"absolute"},!p&&{top:"50%"}),!p&&{transform:"translateY(-50%)"}),{},{padding:"8px",whiteSpace:"pre-wrap"}),children:c.map((function(e,t){return"span"===e.name?(e.children=e.children.filter((function(e){return"br"!==e.name})),Object(Ke.convertNodeToElement)(e)):"tag"!==e.type?Object(E.jsx)("span",{children:e},t):"span"===e.name?i[t]:Object(E.jsx)("span",{children:r(e,t)},t)}))})},a)}var Wt=function(){return Object(o.useContext)(w).getSinglePost,Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(i.a,{}),Object(E.jsx)(L.a,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",spacing:0,children:Object(E.jsx)(L.a,{item:!0,xs:12,sm:12,md:10,lg:6,xl:6,children:Object(E.jsx)(xt,{})})}),Object(E.jsx)(Yt,{})]})},Gt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,480)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),o(e),r(e),a(e),c(e)}))};c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(I,{children:Object(E.jsx)(Wt,{})})}),document.getElementById("root")),Gt()}},[[400,1,2]]]);
//# sourceMappingURL=main.af055542.chunk.js.map